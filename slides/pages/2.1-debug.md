---
layout: section
---

# âœ¨ Debugging âœ¨

<!-- 

We all have to debug for our jobs, but there are same debug tools that I've noticed are not very
commonly used in web dev, so I wanted to quick share what those are, and how to configure them.

-->

---

# âœ¨ Debugging âœ¨


<h2 style="transform: rotate(-30deg); font-size: 3rem;">
The tools available
</h2>

<div v-click style="transform: rotate(20deg) translateX(40vw) translateY(25vh); font-size: 2rem">
	logging
</div>
<div v-click style="transform: rotate(-15deg) translateX(40vw) translateY(25vh); font-size: 2rem">
	breakpoints
</div>
<div v-click style="transform: rotate(35deg) translateX(60vw) translateY(-5vh); font-size: 2rem">
	REPL
</div>


<!-- 

So, in all of debugging, we have three techniques, which have various ways of using and interacting
with your code.

[click] logging
[click] breakpoints
[click] and REPLs

However, how you got about using these 3 techniques can greatly change how effective you are at
figuriing out what is going on

-->

---


# âœ¨ Debugging âœ¨ via logging

<div class="centered">

## `console.log`

<div v-click style="font-size: 15rem; position: absolute;">
	ðŸš«
</div>

</div>

<!--

console.log.

[click] we don't want to do this.
a few reasons:
- requires a code change in order to see things
- if your code uses a build, this will require a rebuild of the changed code
- if your code is in the browser, and you don't have hot-module-reloading, 
  you have to wait for a full browser refresh, and all those network requests, etc

-->

---

## logpoints



<div class="image-stack">

<img v-after src="/images/debugging-menu.png" />
<Arrow v-click.after.hide="1" x1="75" y1="155" x2="100" y2="140" color="red" />
<img style="position: absolute; left: 3rem; top: 7rem;" v-click src="/images/logpoint-begin.png" />
<img style="position: absolute; left: 3.5rem; top: 7.5rem;" v-click src="/images/logpoint-filled.png" />
<img style="position: absolute; left: 4rem; top: 8rem;" v-click src="/images/logpoint-marked.png" />
<img style="position: absolute; left: 4.5rem; top: 8.5rem;" v-click src="/images/logpoint-result.png" />

</div>	

<!-- 

we start with right-clicking the gutter on the left side of a file in the sources or debugger panel
of the browser's tools

[click] we're presented with a little inline modal here where we can enter what we want to log, and
say if we want the stack printed as well.

[click] I like having the stack trace, but I understand it can often be redundant and noisy for how
some folks like to debug

[click] this is what the created logpoint looks like -- a Pink lil'flag thing

[click] and here is what it looks like -- the console has a similar color indicator to the left, it
logs what we told it to. On the right, it tells us where the logpoint is, and then we have a stack
for how we got to `compiler.ts` line 49


I find this technique is most useful for when I have to figure out how a particular function is
getting called _and_ I expect it to be called multiple times, and I don't want to pause at every
call in to a function. and I didn't need to change any of the source code to gain this information. 

... but speaking of pausing at a call in to a function.

-->


---

# âœ¨ Debugging âœ¨ via breakpoints


<div class="centered">

## `debugger`

<div v-click style="font-size: 15rem; position: absolute;">
	ðŸš«
</div>

</div>

<!-- 

Next up is the debugger.

[click] we don't want to do this either, and for similar reasons:
- requires a code change in order to see things
- if your code uses a build, this will require a rebuild of the changed code
- if your code is in the browser, and you don't have hot-module-reloading, 
  you have to wait for a full browser refresh, and all those network requests, etc

-->

---

<div class="image-stack">

<img style="position: absolute; left: 3rem; top: 2rem;" src="/images/breakpoint-condition-begin.png" />
<img style="position: absolute; left: 3rem; top: 2.5rem;" v-click src="/images/breakpoint-condition-prompt.png" />
<img style="position: absolute; left: 3rem; top: 3rem;" v-click src="/images/breakpoint-condition-filled.png" />
<img style="position: absolute; left: 3rem; top: 3.5rem;" v-click src="/images/breakpoint-condition-marked.png" />
<img style="position: absolute; left: 3rem; top: 4rem;" v-click src="/images/breakpoint-condition-result.png" />

</div>

<!-- 

like with a log point, we start by right-clicking the gutter on the left side of a file in the
sources or debugger panel of the browser's tools.

[click] after clicking "Add condition", we're presented with a little inline modal here where we can enter the condition on which to
break. I like using conditional breakpoints, because I often don't want to always pause. but
sometimes I do, like if I don't know what sort of data-situation gets me in to trouble jest yet.

[click] in this case, maybe I know that some problem arises when the `text` argument here contains a
tracked decorator - this condition can be any value -- falsey values will be skipped over.

[click] this is what the created conditional breakpoint looks like -- an orange~ish flag thing.

[click] here is what it looks like in-browser.


-->

---


<img src="/images/breakpoint-condition-for-later.png" />

<!-- 

here is some more of the stack -- we'll come back to this in a bit, and dive deeper.

-->

---


<div class="centered" style="max-height: 100%">

<img style="max-height: 60%" src="/images/vscode.png" />

# âœ¨ Debugging âœ¨ via breakpoints

</div>

<!-- 

This can be done in VSCode as well, but the default configuration is bad,
so we need to change it.


Here is what you have to do:

-->

---
title: Configuring VSCode
---

### Default

<img src="/images/vscode-auto-attach-default.png" />

<br />

### Change to

<img src="/images/vscode-auto-attach.png" />

<!-- 

First is change the auto-attach filter. You always want all processes attached when debugging.
A lot of build tools will take advantage of the number of processors and cores available on your
machine, so you'll want to attach to and debug all of them.

-->

---

### Default

<img src="/images/vscode-auto-attach-pattern-default.png" />
<br />

### Change to

<img src="/images/vscode-auto-attach-pattern.png" />

<!--

Next we need to completely delete the auto attach smart pattern defaults.

This is possibly unneeded due to the previous setting being set to "always", but filtering out
node_modules is silly. Node modules is often where we need to debug!

-->

---


<img src="/images/vscode-debug-terminal-command-pallette.png" />

<!-- 

Normally you'll want to use the JavaScript Debug Terminal, though there are ways to set up your
default terminal to have debugging enabled as well.

-->

---


### Injected options

<div style="
  border: 5px solid red; 
  width: 120px; 
  height: 2rem;
  position: absolute;
  top: 8rem;
  right: 16.5rem;
  "></div>

<img src="/images/vscode-node-options.png" />

<br />


### If you set `NODE_OPTIONS`

<div class="medium-code">


```bash
export NODE_OPTIONS="\
  --max-old-space-size=64000 \
  --trace-deprecation \
  --trace-warnings \
  --unhandled-rejections=strict $NODE_OPTIONS"
```

<Arrow x1="800" y1="300" x2="700" y2="475" color="red" />

</div>


<!-- 

Lastly, if you configure NODE_OPTIONS, you'll need to make sure you forward the node options,
because
VSCode also configures NODE_OPTIONS on the init of your terminal.


There are 3 key things to configure before VSCode will just let you debug things in node.

-->



---

# âœ¨ Debugging âœ¨ via REPL


<!-- 

Debugging in a REPL can be helpful for minimally reproducing problems.

Chances are, if you've interacted with me in the Discord about a reactivity or data flow situation,
I may have asked if you have been able to reproduce the problem in a REPL.

This has some nice benefits:
- minimal, no fluff code to get distracted by


-->

