!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.LinkerLine=t():e.LinkerLine=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>l});const n=function({ee:e=40}){var t,n,i,a,o,s,l,r,u,h,p,c,d,f,m,y,g,S,_,v,b,x,E,k=navigator.userAgent.includes("Gecko"),w="linker-line",O={top:1,right:2,bottom:3,left:4},M={straight:1,arc:2,fluid:3,magnet:4,grid:5},I="behind",C=w+"-defs",L=ze.plugs={disc:{elmId:"linker-line-disc",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},square:{elmId:"linker-line-square",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},arrow1:{elmId:"linker-line-arrow1",bBox:{left:-8,top:-8,width:16,height:16,right:8,bottom:8},widthR:4,heightR:4,bCircle:8,sideLen:8,backLen:8,overhead:8,outlineBase:2,outlineMax:1.5},arrow2:{elmId:"linker-line-arrow2",bBox:{left:-7,top:-8,width:11,height:16,right:4,bottom:8},widthR:2.75,heightR:4,bCircle:8,sideLen:8,backLen:7,overhead:4,outlineBase:1,outlineMax:1.75},arrow3:{elmId:"linker-line-arrow3",bBox:{left:-4,top:-5,width:12,height:10,right:8,bottom:5},widthR:3,heightR:2.5,bCircle:8,sideLen:5,backLen:4,overhead:8,outlineBase:1,outlineMax:2.5},hand:{elmId:"linker-line-hand",bBox:{left:-3,top:-12,width:40,height:24,right:37,bottom:12},widthR:10,heightR:6,bCircle:37,sideLen:12,backLen:3,overhead:37},crosshair:{elmId:"linker-line-crosshair",noRotate:!0,bBox:{left:-96,top:-96,width:192,height:192,right:96,bottom:96},widthR:48,heightR:48,bCircle:96,sideLen:96,backLen:96,overhead:0}},A=ze.names={behind:I,disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},V=A,P=[1,2,3,4],N="auto",T={x:"left",y:"top",width:"width",height:"height"},W=10,B=.5522847,R=.25*Math.PI,F=/^\s*(\-?[\d\.]+)\s*(\%)?\s*$/,D="http://www.w3.org/2000/svg",G=!($="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&!window.navigator.msPointerEnabled)&&!!document.uniqueID,j="MozAppearance"in document.documentElement.style,z=!($||j||!window.chrome||!window.CSS),H=!($||G||j||z||window.chrome||!("WebkitAppearance"in document.documentElement.style)),U=G||$?.2:.1,Y={path:3,lineColor:"coral",lineSize:4,plugSE:[I,"arrow1"],plugSizeSE:[1,1],lineOutlineEnabled:!1,lineOutlineColor:"indianred",lineOutlineSize:.25,plugOutlineEnabledSE:[!1,!1],plugOutlineSizeSE:[1,1]},Z=(b={}.toString,x={}.hasOwnProperty.toString,E=x.call(Object),function(e){return e&&"[object Object]"===b.call(e)&&(!(e=Object.getPrototypeOf(e))||(e=e.hasOwnProperty("constructor")&&e.constructor)&&"function"==typeof e&&x.call(e)===E)}),q=Number.isFinite||function(e){return"number"==typeof e&&window.isFinite(e)},X=(f={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},m=1e3/60/2,y=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,m)},g=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){clearTimeout(e)},S=Number.isFinite||function(e){return"number"==typeof e&&window.isFinite(e)},_=[],v=0,{add:function(e,t,n,i,a,o,s){var l,r,u,h,p,c,d,y,g,S,b=++v;function x(t,n){return{value:e(n),timeRatio:t,outputRatio:n}}if("string"==typeof a&&(a=f[a]),e=e||function(){},n<m)l=[x(0,0),x(1,1)];else{if(r=m/n,l=[x(0,0)],0===a[0]&&0===a[1]&&1===a[2]&&1===a[3])for(h=r;h<=1;h+=r)l.push(x(h,h));else for(p=u=(h=r)/10;p<=1;p+=u)S=void 0,y=(S=p*p)*p,S*=3*(g=1-p),h<=(c={x:(d=g*g*3*p)*a[0]+S*a[2]+y,y:d*a[1]+S*a[3]+y}).x&&(l.push(x(c.x,c.y)),h+=r);l.push(x(1,1))}return _.push(o={animId:b,frameCallback:t,duration:n,count:i,frames:l,reverse:!!o}),!1!==s&&le(o,s),b},remove:function(e){var t;_.some((function(n,i){return n.animId===e&&(t=i,!(n.framesStart=null))}))&&_.splice(t,1)},start:function(e,t,n){_.some((function(i){return i.animId===e&&(i.reverse=!!t,le(i,n),!0)}))},stop:function(e,t){var n;return _.some((function(i){return i.animId===e&&(t?null!=i.lastFrame&&(n=i.frames[i.lastFrame].timeRatio):(n=(Date.now()-i.framesStart)/i.duration,(n=i.reverse?1-n:n)<0?n=0:1<n&&(n=1)),!(i.framesStart=null))})),n},validTiming:function(e){return"string"==typeof e?f[e]:Array.isArray(e)&&[0,1,2,3].every((function(t){return S(e[t])&&0<=e[t]&&e[t]<=1}))?[e[0],e[1],e[2],e[3]]:null}}),$=(c={},oe.m=p=[function(e,t,n){n.r(t);var i=[],a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)},s=Date.now(),l=void 0;function r(){var e=void 0,t=void 0;l&&(o.call(window,l),l=null),i.forEach((function(t){var n;(n=t.event)&&(t.event=null,t.listener(n),e=!0)})),e?(s=Date.now(),t=!0):Date.now()-s<500&&(t=!0),t&&(l=a.call(window,r))}function u(e){var t=-1;return i.some((function(n,i){return n.listener===e&&(t=i,!0)})),t}t.default={add:function(e){var t=void 0;return-1===u(e)?(i.push(t={listener:e}),function(e){t.event=e,l||r()}):null},remove:function(e){-1<(e=u(e))&&(i.splice(e,1),!i.length&&l&&(o.call(window,l),l=null))}}}],oe.c=c,oe.d=function(e,t,n){oe.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},oe.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},oe.t=function(e,t){if(1&t&&(e=oe(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(oe.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)oe.d(n,i,function(t){return e[t]}.bind(null,i));return n},oe.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return oe.d(t,"a",t),t},oe.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},oe.p="",oe(oe.s=0).default),Q={line_altColor:{iniValue:!1},line_color:{},line_colorTra:{iniValue:!1},line_strokeWidth:{},plug_enabled:{iniValue:!1},plug_enabledSE:{hasSE:!0,iniValue:!1},plug_plugSE:{hasSE:!0,iniValue:I},plug_colorSE:{hasSE:!0},plug_colorTraSE:{hasSE:!0,iniValue:!1},plug_markerWidthSE:{hasSE:!0},plug_markerHeightSE:{hasSE:!0},lineOutline_enabled:{iniValue:!1},lineOutline_color:{},lineOutline_colorTra:{iniValue:!1},lineOutline_strokeWidth:{},lineOutline_inStrokeWidth:{},plugOutline_enabledSE:{hasSE:!0,iniValue:!1},plugOutline_plugSE:{hasSE:!0,iniValue:I},plugOutline_colorSE:{hasSE:!0},plugOutline_colorTraSE:{hasSE:!0,iniValue:!1},plugOutline_strokeWidthSE:{hasSE:!0},plugOutline_inStrokeWidthSE:{hasSE:!0},position_socketXYSE:{hasSE:!0,hasProps:!0},position_plugOverheadSE:{hasSE:!0},position_path:{},position_lineStrokeWidth:{},position_socketGravitySE:{hasSE:!0},path_pathData:{},path_edge:{hasProps:!0},viewBox_bBox:{hasProps:!0},viewBox_plugBCircleSE:{hasSE:!0},lineMask_enabled:{iniValue:!1},lineMask_outlineMode:{iniValue:!1},lineMask_x:{},lineMask_y:{},lineOutlineMask_x:{},lineOutlineMask_y:{},maskBGRect_x:{},maskBGRect_y:{},capsMaskAnchor_enabledSE:{hasSE:!0,iniValue:!1},capsMaskAnchor_pathDataSE:{hasSE:!0},capsMaskAnchor_strokeWidthSE:{hasSE:!0},capsMaskMarker_enabled:{iniValue:!1},capsMaskMarker_enabledSE:{hasSE:!0,iniValue:!1},capsMaskMarker_plugSE:{hasSE:!0,iniValue:I},capsMaskMarker_markerWidthSE:{hasSE:!0},capsMaskMarker_markerHeightSE:{hasSE:!0},caps_enabled:{iniValue:!1},attach_plugSideLenSE:{hasSE:!0},attach_plugBackLenSE:{hasSE:!0}},K={show_on:{},show_effect:{},show_animOptions:{},show_animId:{},show_inAnim:{}},J="fade",ee=[],te={},ne=0,ie={},ae=0;function oe(e){if(c[e])return c[e].exports;var t=c[e]={i:e,l:!1,exports:{}};return p[e].call(t.exports,t,t.exports,oe),t.l=!0,t.exports}function se(){var e=Date.now(),t=!1;d&&(g.call(window,d),d=null),_.forEach((function(n){var i,a,o;if(n.framesStart){if((i=e-n.framesStart)>=n.duration&&n.count&&n.loopsLeft<=1)return o=n.frames[n.lastFrame=n.reverse?0:n.frames.length-1],n.frameCallback(o.value,!0,o.timeRatio,o.outputRatio),void(n.framesStart=null);if(i>n.duration){if(a=Math.floor(i/n.duration),n.count){if(a>=n.loopsLeft)return o=n.frames[n.lastFrame=n.reverse?0:n.frames.length-1],n.frameCallback(o.value,!0,o.timeRatio,o.outputRatio),void(n.framesStart=null);n.loopsLeft-=a}n.framesStart+=n.duration*a,i=e-n.framesStart}n.reverse&&(i=n.duration-i),o=n.frames[n.lastFrame=Math.round(i/m)],!1!==n.frameCallback(o.value,!1,o.timeRatio,o.outputRatio)?t=!0:n.framesStart=null}})),t&&(d=y.call(window,se))}function le(e,t){e.framesStart=Date.now(),null!=t&&(e.framesStart-=e.duration*(e.reverse?1-t:t)),e.loopsLeft=e.count,e.lastFrame=null,se()}function re(e,t){var n,i;return typeof e!=typeof t||(n=Z(e)?"obj":Array.isArray(e)?"array":"")!=(Z(t)?"obj":Array.isArray(t)?"array":"")||("obj"===n?re(i=Object.keys(e).sort(),Object.keys(t).sort())||i.some((function(n){return re(e[n],t[n])})):"array"===n?e.length!==t.length||e.some((function(e,n){return re(e,t[n])})):e!==t)}function ue(e){return e&&(Z(e)?Object.keys(e).reduce((function(t,n){return t[n]=ue(e[n]),t}),{}):Array.isArray(e)?e.map(ue):e)}function he(e){var t,n,i,a=1,o=e=(e+"").trim();function s(e){var t=1;return(e=F.exec(e))&&(t=parseFloat(e[1]),e[2]?t=0<=t&&t<=100?t/100:1:(t<0||1<t)&&(t=1)),t}return(t=/^(rgba|hsla|hwb|gray|device\-cmyk)\s*\(([\s\S]+)\)$/i.exec(e))?(n=t[1].toLowerCase(),i=t[2].trim().split(/\s*,\s*/),"rgba"===n&&4===i.length?(a=s(i[3]),o="rgb("+i.slice(0,3).join(", ")+")"):"hsla"===n&&4===i.length?(a=s(i[3]),o="hsl("+i.slice(0,3).join(", ")+")"):"hwb"===n&&4===i.length?(a=s(i[3]),o="hwb("+i.slice(0,3).join(", ")+")"):"gray"===n&&2===i.length?(a=s(i[1]),o="gray("+i[0]+")"):"device-cmyk"===n&&5<=i.length&&(a=s(i[4]),o="device-cmyk("+i.slice(0,4).join(", ")+")")):(t=/^\#(?:([\da-f]{6})([\da-f]{2})|([\da-f]{3})([\da-f]))$/i.exec(e))?o=t[1]?(a=parseInt(t[2],16)/255,"#"+t[1]):(a=parseInt(t[4]+t[4],16)/255,"#"+t[3]):"transparent"===e.toLocaleLowerCase()&&(a=0),[a,o]}function pe(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE||"function"!=typeof e.getBoundingClientRect)}function ce(e,t){var n,i,a,o={};if(!(a=e.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(e.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_DISCONNECTED)return console.error("A disconnected element was passed."),null;for(i in n=e.getBoundingClientRect())o[i]=n[i];if(!t){if(!(a=a.defaultView))return console.error("Cannot get window that contains the element."),null;o.left+=a.pageXOffset,o.right+=a.pageXOffset,o.top+=a.pageYOffset,o.bottom+=a.pageYOffset}return o}function de(e,t){var n,i=[],a=e;for(t=t||window;;){if(!(n=a.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(!(n=n.defaultView))return console.error("Cannot get window that contains the element."),null;if(n===t)break;if(!(a=n.frameElement))return console.error("`baseWindow` was not found."),null;i.unshift(a)}return i}function fe(e,t){var n=0,i=0;return(t=de(e,t=t||window))?t.length?(t.forEach((function(e,t){var a=ce(e,0<t);n+=a.left,i+=a.top,e=(t=e).ownerDocument.defaultView.getComputedStyle(t,""),a={left:t.clientLeft+parseFloat(e.paddingLeft),top:t.clientTop+parseFloat(e.paddingTop)},n+=a.left,i+=a.top})),(t=ce(e,!0)).left+=n,t.right+=n,t.top+=i,t.bottom+=i,t):ce(e):null}function me(e,t){var n=e.x-t.x;return t=e.y-t.y,Math.sqrt(n*n+t*t)}function ye(e,t,n){var i=t.x-e.x;return t=t.y-e.y,{x:e.x+i*n,y:e.y+t*n,angle:Math.atan2(t,i)/(Math.PI/180)}}function ge(e,t,n){return e=Math.atan2(e.y-t.y,t.x-e.x),{x:t.x+Math.cos(e)*n,y:t.y+Math.sin(e)*n*-1}}function Se(e,t,n,i,a){var o=(c=a*a)*a,s=1-a,l=(h=(p=s*s)*s)*e.x+3*p*a*t.x+3*s*c*n.x+o*i.x,r=h*e.y+3*p*a*t.y+3*s*c*n.y+o*i.y,u=e.x+2*a*(t.x-e.x)+c*(n.x-2*t.x+e.x),h=e.y+2*a*(t.y-e.y)+c*(n.y-2*t.y+e.y),p=t.x+2*a*(n.x-t.x)+c*(i.x-2*n.x+t.x),c=(o=t.y+2*a*(n.y-t.y)+c*(i.y-2*n.y+t.y),s*e.x+a*t.x);return e=s*e.y+a*t.y,t=s*n.x+a*i.x,a=s*n.y+a*i.y,i=90-180*Math.atan2(u-p,h-o)/Math.PI,{x:l,y:r,fromP2:{x:u,y:h},toP1:{x:p,y:o},fromP1:{x:c,y:e},toP2:{x:t,y:a},angle:i+=180<i?-180:180}}function _e(e,t,n,i,a){function o(e,t,n,i,a){return e*(e*(-3*t+9*n-9*i+3*a)+6*t-12*n+6*i)-3*t+3*n}var s,l,r=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],u=0,h=(a=null==a||1<a?1:a<0?0:a)/2;return[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816].forEach((function(a,p){s=o(l=h*a+h,e.x,t.x,n.x,i.x),l=o(l,e.y,t.y,n.y,i.y),l=s*s+l*l,u+=r[p]*Math.sqrt(l)})),h*u}function ve(e,t,n,i,a){for(var o,s=.5,l=1-s;o=_e(e,t,n,i,l),!(Math.abs(o-a)<=.01);)l+=(o<a?1:-1)*(s/=2);return l}function be(e,t){var n;return e.forEach((function(e){e=t?e.map((function(e){return e={x:e.x,y:e.y},t(e),e})):e,(n=n||[{type:"M",values:[e[0].x,e[0].y]}]).push(e.length?2===e.length?{type:"L",values:[e[1].x,e[1].y]}:{type:"C",values:[e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]}:{type:"Z",values:[]})})),n}function xe(e){var t=[],n=0;return e.forEach((function(e){e=(2===e.length?me:_e).apply(null,e),t.push(e),n+=e})),{segsLen:t,lenAll:n}}function Ee(e,t){return null==e||null==t||e.length!==t.length||e.some((function(e,n){var i=t[n];return e.type!==i.type||e.values.some((function(e,t){return e!==i.values[t]}))}))}function ke(e,t,n){e.events[t]?e.events[t].indexOf(n)<0&&e.events[t].push(n):e.events[t]=[n]}function we(e,t,n){var i;e.events[t]&&-1<(i=e.events[t].indexOf(n))&&e.events[t].splice(i,1)}function Oe(e){l&&clearTimeout(l),ee.push(e),l=setTimeout((function(){ee.forEach((function(e){e()})),ee=[]}),0)}function Me(e,t){e.reflowTargets.indexOf(t)<0&&e.reflowTargets.push(t)}function Ie(e){e.reflowTargets.forEach((function(e){var t;t=e,setTimeout((function(){var e=t.parentNode,n=t.nextSibling;e.insertBefore(e.removeChild(t),n)}),0)})),e.reflowTargets=[]}function Ce(e,t,n,i,a,o,s){var l;"auto-start-reverse"===n?("boolean"!=typeof r&&(t.setAttribute("orient","auto-start-reverse"),r=t.orientType.baseVal===SVGMarkerElement.SVG_MARKER_ORIENT_UNKNOWN),r?t.setAttribute("orient",n):((l=a.createSVGTransform()).setRotate(180,0,0),o.transform.baseVal.appendItem(l),t.setAttribute("orient","auto"),l=!0)):(t.setAttribute("orient",n),!1===r&&o.transform.baseVal.clear()),t=t.viewBox.baseVal,l?(t.x=-i.right,t.y=-i.bottom):(t.x=i.left,t.y=i.top),t.width=i.width,t.height=i.height,G&&Me(e,s)}function Le(e,t){return{prop:e?"markerEnd":"markerStart",orient:t?t.noRotate?"0":e?"auto":"auto-start-reverse":null}}function Ae(e,t){Object.keys(t).forEach((function(n){var i=t[n];e[n]=null!=i.iniValue?i.hasSE?[i.iniValue,i.iniValue]:i.iniValue:i.hasSE?i.hasProps?[{},{}]:[]:i.hasProps?{}:null}))}function Ve(e,t,n,i,a){return i!==t[n]&&(t[n]=i,a&&a.forEach((function(t){t(e,i,n)})),!0)}function Pe(e){function t(e,t){return e+parseFloat(t)}var n=e.document,i=e.getComputedStyle(n.documentElement,"");return e=e.getComputedStyle(n.body,""),n={x:0,y:0},"static"!==e.position?(n.x-=[i.marginLeft,i.borderLeftWidth,i.paddingLeft,e.marginLeft,e.borderLeftWidth].reduce(t,0),n.y-=[i.marginTop,i.borderTopWidth,i.paddingTop,e.marginTop,e.borderTopWidth].reduce(t,0)):"static"!==i.position&&(n.x-=[i.marginLeft,i.borderLeftWidth].reduce(t,0),n.y-=[i.marginTop,i.borderTopWidth].reduce(t,0)),n}function Ne(e){var t,n=e.document;n.getElementById(C)||(t=(new e.DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="linker-line-defs"><style><![CDATA[.linker-line{position:absolute;overflow:visible!important;pointer-events:none!important;font-size:1em}#linker-line-defs{width:0;height:0;position:absolute;left:0;top:0}.linker-line-line-path{fill:none}.linker-line-mask-bg-rect{fill:white}.linker-line-caps-mask-anchor,.linker-line-caps-mask-marker-shape{fill:black}.linker-line-caps-mask-anchor{stroke:black}.linker-line-caps-mask-line,.linker-line-plugs-face{stroke:rgba(0,0,0,0)}.linker-line-line-mask-shape{stroke:white}.linker-line-line-outline-mask-shape{stroke:black}.linker-line-plug-mask-shape{fill:white;stroke:black}.linker-line-plug-outline-mask-shape{fill:black;stroke:white}.linker-line-areaAnchor{position:absolute;overflow:visible!important}]]></style><defs><circle id="linker-line-disc" cx="0" cy="0" r="5"/><rect id="linker-line-square" x="-5" y="-5" width="10" height="10"/><polygon id="linker-line-arrow1" points="-8,-8 8,0 -8,8 -5,0"/><polygon id="linker-line-arrow2" points="-4,-8 4,0 -4,8 -7,5 -2,0 -7,-5"/><polygon id="linker-line-arrow3" points="-4,-5 8,0 -4,5"/><g id="linker-line-hand"><path style="fill: #fcfcfc" d="M9.19 11.14h4.75c1.38 0 2.49-1.11 2.49-2.49 0-.51-.15-.98-.41-1.37h1.3c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.53-2.49-2.53h1.02c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49h14.96c1.37 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49H16.58C16-9.86 14.28-11.14 9.7-11.14c-4.79 0-6.55 3.42-7.87 4.73H-2.14v13.23h3.68C3.29 9.97 5.47 11.14 9.19 11.14L9.19 11.14Z"/><path style="fill: black" d="M13.95 12c1.85 0 3.35-1.5 3.35-3.35 0-.17-.02-.34-.04-.51h.07c1.85 0 3.35-1.5 3.35-3.35 0-.79-.27-1.51-.72-2.08 1.03-.57 1.74-1.67 1.74-2.93 0-.59-.16-1.15-.43-1.63h12.04c1.85 0 3.35-1.5 3.35-3.35 0-1.85-1.5-3.35-3.35-3.35H17.2C16.26-10.93 13.91-12 9.7-12 5.36-12 3.22-9.4 1.94-7.84c0 0-.29.33-.5.57-.63 0-3.58 0-3.58 0C-2.61-7.27-3-6.88-3-6.41v13.23c0 .47.39.86.86.86 0 0 2.48 0 3.2 0C2.9 10.73 5.29 12 9.19 12L13.95 12ZM9.19 10.28c-3.46 0-5.33-1.05-6.9-3.87-.15-.27-.44-.44-.75-.44 0 0-1.81 0-2.82 0V-5.55c1.06 0 3.11 0 3.11 0 .25 0 .44-.06.61-.25l.83-.95c1.23-1.49 2.91-3.53 6.43-3.53 3.45 0 4.9.74 5.57 1.72h-4.3c-.48 0-.86.38-.86.86s.39.86.86.86h22.34c.9 0 1.63.73 1.63 1.63 0 .9-.73 1.63-1.63 1.63H15.83c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.52c.9 0 1.63.73 1.63 1.63s-.73 1.63-1.63 1.63h-3.12c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.11c.88 0 1.63.76 1.63 1.67 0 .9-.73 1.63-1.63 1.63h-3.2c-.48 0-.86.39-.86.86 0 .47.39.86.86.86h1.36c.05.16.09.34.09.51 0 .9-.73 1.63-1.63 1.63C13.95 10.28 9.19 10.28 9.19 10.28Z"/></g><g id="linker-line-crosshair"><path d="M0-78.97c-43.54 0-78.97 35.43-78.97 78.97 0 43.54 35.43 78.97 78.97 78.97s78.97-35.43 78.97-78.97C78.97-43.54 43.55-78.97 0-78.97ZM76.51-1.21h-9.91v-9.11h-2.43v9.11h-11.45c-.64-28.12-23.38-50.86-51.5-51.5V-64.17h9.11V-66.6h-9.11v-9.91C42.46-75.86 75.86-42.45 76.51-1.21ZM-1.21-30.76h-9.11v2.43h9.11V-4.2c-1.44.42-2.57 1.54-2.98 2.98H-28.33v-9.11h-2.43v9.11H-50.29C-49.65-28-27.99-49.65-1.21-50.29V-30.76ZM-30.76 1.21v9.11h2.43v-9.11H-4.2c.42 1.44 1.54 2.57 2.98 2.98v24.13h-9.11v2.43h9.11v19.53C-27.99 49.65-49.65 28-50.29 1.21H-30.76ZM1.22 30.75h9.11v-2.43h-9.11V4.2c1.44-.42 2.56-1.54 2.98-2.98h24.13v9.11h2.43v-9.11h19.53C49.65 28 28 49.65 1.22 50.29V30.75ZM30.76-1.21v-9.11h-2.43v9.11H4.2c-.42-1.44-1.54-2.56-2.98-2.98V-28.33h9.11v-2.43h-9.11V-50.29C28-49.65 49.65-28 50.29-1.21H30.76ZM-1.21-76.51v9.91h-9.11v2.43h9.11v11.45c-28.12.64-50.86 23.38-51.5 51.5H-64.17v-9.11H-66.6v9.11h-9.91C-75.86-42.45-42.45-75.86-1.21-76.51ZM-76.51 1.21h9.91v9.11h2.43v-9.11h11.45c.64 28.12 23.38 50.86 51.5 51.5v11.45h-9.11v2.43h9.11v9.91C-42.45 75.86-75.86 42.45-76.51 1.21ZM1.22 76.51v-9.91h9.11v-2.43h-9.11v-11.45c28.12-.64 50.86-23.38 51.5-51.5h11.45v9.11h2.43v-9.11h9.91C75.86 42.45 42.45 75.86 1.22 76.51Z"/><path d="M0 83.58-7.1 96 7.1 96Z"/><path d="M0-83.58 7.1-96-7.1-96"/><path d="M83.58 0 96 7.1 96-7.1Z"/><path d="M-83.58 0-96-7.1-96 7.1Z"/></g></defs></svg>',"image/svg+xml"),n.body.appendChild(t.documentElement),function(e,t){e.SVGPathElement.prototype.getPathData&&e.SVGPathElement.prototype.setPathData&&!t||function(){function t(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()}var n={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},i=-1!==e.navigator.userAgent.indexOf("MSIE ");function a(e){if(!e||0===e.length)return[];var n=new t(e),i=[];if(n.initialCommandIsMoveTo())for(;n.hasMoreData();){var a=n.parseSegment();if(null===a)break;i.push(a)}return i}function o(e){return e.map((function(e){return{type:e.type,values:Array.prototype.slice.call(e.values)}}))}function s(e){var t=[],n=null,i=null,a=null,o=null,s=null,l=null,r=null;return e.forEach((function(e){var u,h,c,d,f,m,y,g;"M"===e.type?(y=e.values[0],g=e.values[1],t.push({type:"M",values:[y,g]}),o=l=y,s=r=g):"C"===e.type?(f=e.values[0],m=e.values[1],u=e.values[2],h=e.values[3],y=e.values[4],g=e.values[5],t.push({type:"C",values:[f,m,u,h,y,g]}),i=u,a=h,o=y,s=g):"L"===e.type?(y=e.values[0],g=e.values[1],t.push({type:"L",values:[y,g]}),o=y,s=g):"H"===e.type?(y=e.values[0],t.push({type:"L",values:[y,s]}),o=y):"V"===e.type?(g=e.values[0],t.push({type:"L",values:[o,g]}),s=g):"S"===e.type?(u=e.values[0],h=e.values[1],y=e.values[2],g=e.values[3],d="C"===n||"S"===n?(c=o+(o-i),s+(s-a)):(c=o,s),t.push({type:"C",values:[c,d,u,h,y,g]}),i=u,a=h,o=y,s=g):"T"===e.type?(y=e.values[0],g=e.values[1],m="Q"===n||"T"===n?(f=o+(o-i),s+(s-a)):(f=o,s),t.push({type:"C",values:[c=o+2*(f-o)/3,d=s+2*(m-s)/3,y+2*(f-y)/3,g+2*(m-g)/3,y,g]}),i=f,a=m,o=y,s=g):"Q"===e.type?(f=e.values[0],m=e.values[1],y=e.values[2],g=e.values[3],t.push({type:"C",values:[c=o+2*(f-o)/3,d=s+2*(m-s)/3,y+2*(f-y)/3,g+2*(m-g)/3,y,g]}),i=f,a=m,o=y,s=g):"A"===e.type?(h=e.values[0],c=e.values[1],d=e.values[2],f=e.values[3],m=e.values[4],y=e.values[5],g=e.values[6],0===h||0===c?(t.push({type:"C",values:[o,s,y,g,y,g]}),o=y,s=g):o===y&&s===g||p(o,s,y,g,h,c,d,f,m).forEach((function(e){t.push({type:"C",values:e}),o=y,s=g}))):"Z"===e.type&&(t.push(e),o=l,s=r),n=e.type})),t}t.prototype={parseSegment:function(){var e=this._string[this._currentIndex],t=n[e]||null;if(null===t){if(null===this._prevCommand)return null;if(null===(t=("+"===e||"-"===e||"."===e||"0"<=e&&e<="9")&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null))return null}else this._currentIndex+=1;var i=null;return"H"===(e=(this._prevCommand=t).toUpperCase())||"V"===e?i=[this._parseNumber()]:"M"===e||"L"===e||"T"===e?i=[this._parseNumber(),this._parseNumber()]:"S"===e||"Q"===e?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"C"===e?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"A"===e?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:"Z"===e&&(this._skipOptionalSpaces(),i=[]),null===i||0<=i.indexOf(null)?null:{type:t,values:i}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var e=this._string[this._currentIndex];return n[e]||null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return"M"===e||"m"===e},_isCurrentSpace:function(){var e=this._string[this._currentIndex];return e<=" "&&(" "===e||"\n"===e||"\t"===e||"\r"===e||"\f"===e)},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex])&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var e=0,t=0,n=1,i=0,a=1,o=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string[this._currentIndex]?this._currentIndex+=1:this._currentIndex<this._endIndex&&"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,a=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])&&"."!==this._string[this._currentIndex])return null;for(var l=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==l)for(var r=this._currentIndex-1,u=1;l<=r;)t+=u*(this._string[r]-"0"),--r,u*=10;if(this._currentIndex<this._endIndex&&"."===this._string[this._currentIndex]){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)n*=10,i+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!==s&&this._currentIndex+1<this._endIndex&&("e"===this._string[this._currentIndex]||"E"===this._string[this._currentIndex])&&"x"!==this._string[this._currentIndex+1]&&"m"!==this._string[this._currentIndex+1]){if(this._currentIndex+=1,"+"===this._string[this._currentIndex]?this._currentIndex+=1:"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,o=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)e*=10,e+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var h=t+i;return h*=a,e&&(h*=Math.pow(10,o*e)),s===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),h)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===t)e=0;else{if("1"!==t)return null;e=1}return this._skipOptionalSpacesOrDelimiter(),e}};var l=e.SVGPathElement.prototype.setAttribute,r=e.SVGPathElement.prototype.removeAttribute,u=e.Symbol?e.Symbol():"__cachedPathData",h=e.Symbol?e.Symbol():"__cachedNormalizedPathData",p=function(e,t,n,i,a,o,s,l,r,u){function h(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}var c=Math.PI*s/180,d=[];u?(v=u[0],b=u[1],S=u[2],_=u[3]):(e=(g=h(e,t,-c)).x,t=g.y,1<(g=(y=(e-(n=(m=h(n,i,-c)).x))/2)*y/(a*a)+(f=(t-(i=m.y))/2)*f/(o*o))&&(a*=g=Math.sqrt(g),o*=g),m=a*a,g=o*o,S=(m=(l===r?-1:1)*Math.sqrt(Math.abs((m*g-m*f*f-g*y*y)/(m*f*f+g*y*y))))*a*f/o+(e+n)/2,_=m*-o*y/a+(t+i)/2,v=Math.asin(parseFloat(((t-_)/o).toFixed(9))),b=Math.asin(parseFloat(((i-_)/o).toFixed(9))),e<S&&(v=Math.PI-v),n<S&&(b=Math.PI-b),v<0&&(v=2*Math.PI+v),b<0&&(b=2*Math.PI+b),r&&b<v&&(v-=2*Math.PI),!r&&v<b&&(b-=2*Math.PI));var f,m,y,g=b-v;Math.abs(g)>120*Math.PI/180&&(f=b,m=n,y=i,b=r&&v<b?v+120*Math.PI/180*1:v+120*Math.PI/180*-1,n=S+a*Math.cos(b),i=_+o*Math.sin(b),d=p(n,i,m,y,a,o,s,0,r,[b,f,S,_])),g=b-v;var S=Math.cos(v),_=Math.sin(v),v=Math.cos(b),b=Math.sin(b);if(v=[n+(a=4/3*a*(g=Math.tan(g/4)))*b,i-(o=4/3*o*g)*v],i=[n,i],(S=[e+a*_,t-o*S])[0]=2*(g=[e,t])[0]-S[0],S[1]=2*g[1]-S[1],u)return[S,v,i].concat(d);d=[S,v,i].concat(d).join().split(",");var x=[],E=[];return d.forEach((function(e,t){t%2?E.push(h(d[t-1],d[t],c).y):E.push(h(d[t],d[t+1],c).x),6===E.length&&(x.push(E),E=[])})),x};e.SVGPathElement.prototype.setAttribute=function(e,t){"d"===e&&(this[u]=null,this[h]=null),l.call(this,e,t)},e.SVGPathElement.prototype.removeAttribute=function(e,t){"d"===e&&(this[u]=null,this[h]=null),r.call(this,e)},e.SVGPathElement.prototype.getPathData=function(e){if(e&&e.normalize)return this[h]?o(this[h]):(this[u]?p=o(this[u]):(p=a(this.getAttribute("d")||""),this[u]=o(p)),e=s((t=[],r=l=i=n=null,p.forEach((function(e){var a,o,s,u,h,p,c=e.type;"M"===c?(h=e.values[0],p=e.values[1],t.push({type:"M",values:[h,p]}),n=l=h,i=r=p):"m"===c?(h=n+e.values[0],p=i+e.values[1],t.push({type:"M",values:[h,p]}),n=l=h,i=r=p):"L"===c?(h=e.values[0],p=e.values[1],t.push({type:"L",values:[h,p]}),n=h,i=p):"l"===c?(h=n+e.values[0],p=i+e.values[1],t.push({type:"L",values:[h,p]}),n=h,i=p):"C"===c?(a=e.values[0],o=e.values[1],s=e.values[2],u=e.values[3],h=e.values[4],p=e.values[5],t.push({type:"C",values:[a,o,s,u,h,p]}),n=h,i=p):"c"===c?(a=n+e.values[0],o=i+e.values[1],s=n+e.values[2],u=i+e.values[3],h=n+e.values[4],p=i+e.values[5],t.push({type:"C",values:[a,o,s,u,h,p]}),n=h,i=p):"Q"===c?(a=e.values[0],o=e.values[1],h=e.values[2],p=e.values[3],t.push({type:"Q",values:[a,o,h,p]}),n=h,i=p):"q"===c?(a=n+e.values[0],o=i+e.values[1],h=n+e.values[2],p=i+e.values[3],t.push({type:"Q",values:[a,o,h,p]}),n=h,i=p):"A"===c?(h=e.values[5],p=e.values[6],t.push({type:"A",values:[e.values[0],e.values[1],e.values[2],e.values[3],e.values[4],h,p]}),n=h,i=p):"a"===c?(h=n+e.values[5],p=i+e.values[6],t.push({type:"A",values:[e.values[0],e.values[1],e.values[2],e.values[3],e.values[4],h,p]}),n=h,i=p):"H"===c?(h=e.values[0],t.push({type:"H",values:[h]}),n=h):"h"===c?(h=n+e.values[0],t.push({type:"H",values:[h]}),n=h):"V"===c?(p=e.values[0],t.push({type:"V",values:[p]}),i=p):"v"===c?(p=i+e.values[0],t.push({type:"V",values:[p]}),i=p):"S"===c?(s=e.values[0],u=e.values[1],h=e.values[2],p=e.values[3],t.push({type:"S",values:[s,u,h,p]}),n=h,i=p):"s"===c?(s=n+e.values[0],u=i+e.values[1],h=n+e.values[2],p=i+e.values[3],t.push({type:"S",values:[s,u,h,p]}),n=h,i=p):"T"===c?(h=e.values[0],p=e.values[1],t.push({type:"T",values:[h,p]}),n=h,i=p):"t"===c?(h=n+e.values[0],p=i+e.values[1],t.push({type:"T",values:[h,p]}),n=h,i=p):"Z"!==c&&"z"!==c||(t.push({type:"Z",values:[]}),n=l,i=r)})),t)),this[h]=o(e),e);if(this[u])return o(this[u]);var t,n,i,l,r,p=a(this.getAttribute("d")||"");return this[u]=o(p),p},e.SVGPathElement.prototype.setPathData=function(e){if(0===e.length)i?this.setAttribute("d",""):this.removeAttribute("d");else{for(var t="",n=0,a=e.length;n<a;n+=1){var o=e[n];0<n&&(t+=" "),t+=o.type,o.values&&0<o.values.length&&(t+=" "+o.values.join(" "))}this.setAttribute("d",t)}},e.SVGRectElement.prototype.getPathData=function(e){var t=this.x.baseVal.value,n=this.y.baseVal.value,i=this.width.baseVal.value,a=this.height.baseVal.value,o=(this.hasAttribute("rx")?this.rx:this.ry).baseVal.value,l=(this.hasAttribute("ry")?this.ry:this.rx).baseVal.value;return n=(n=[{type:"M",values:[t+(o=i/2<o?i/2:o),n]},{type:"H",values:[t+i-o]},{type:"A",values:[o,l=a/2<l?a/2:l,0,0,1,t+i,n+l]},{type:"V",values:[n+a-l]},{type:"A",values:[o,l,0,0,1,t+i-o,n+a]},{type:"H",values:[t+o]},{type:"A",values:[o,l,0,0,1,t,n+a-l]},{type:"V",values:[n+l]},{type:"A",values:[o,l,0,0,1,t+o,n]},{type:"Z",values:[]}]).filter((function(e){return"A"!==e.type||0!==e.values[0]&&0!==e.values[1]})),e&&!0===e.normalize?s(n):n},e.SVGCircleElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,n=this.cy.baseVal.value,i=this.r.baseVal.value;return n=[{type:"M",values:[t+i,n]},{type:"A",values:[i,i,0,0,1,t,n+i]},{type:"A",values:[i,i,0,0,1,t-i,n]},{type:"A",values:[i,i,0,0,1,t,n-i]},{type:"A",values:[i,i,0,0,1,t+i,n]},{type:"Z",values:[]}],e&&!0===e.normalize?s(n):n},e.SVGEllipseElement.prototype.getPathData=function(e){var t=this.cx.baseVal.value,n=this.cy.baseVal.value,i=this.rx.baseVal.value,a=this.ry.baseVal.value;return n=[{type:"M",values:[t+i,n]},{type:"A",values:[i,a,0,0,1,t,n+a]},{type:"A",values:[i,a,0,0,1,t-i,n]},{type:"A",values:[i,a,0,0,1,t,n-a]},{type:"A",values:[i,a,0,0,1,t+i,n]},{type:"Z",values:[]}],e&&!0===e.normalize?s(n):n},e.SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},e.SVGPolylineElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[n.x,n.y]})}return e},e.SVGPolygonElement.prototype.getPathData=function(){for(var e=[],t=0;t<this.points.numberOfItems;t+=1){var n=this.points.getItem(t);e.push({type:0===t?"M":"L",values:[n.x,n.y]})}return e.push({type:"Z",values:[]}),e}}()}(e,k))}function Te(e){let{ee:t}=e.options;var n,i,a,o,s,l,r,u,h,p,c,d,f,m,y=e.options,g=e.curStats,S=e.aplStats,_=g.position_socketXYSE,v=!1;function b(e,t){return(e=1===t?{x:e.left+e.width/2,y:e.top}:2===t?{x:e.right,y:e.top+e.height/2}:3===t?{x:e.left+e.width/2,y:e.bottom}:{x:e.left,y:e.top+e.height/2}).socketId=t,e}function x(e){return{x:e.x,y:e.y}}if(g.position_path=y.path,g.position_lineStrokeWidth=g.line_strokeWidth,g.position_socketGravitySE=n=ue(y.socketGravitySE),i=[0,1].map((function(t){var n=y.anchorSE[t],i=e.optionIsAttach.anchorSE[t],a=!1!==i?ie[n._id]:null,o=!1!==i&&a.conf.getStrokeWidth?a.conf.getStrokeWidth(a,e):0,s=!1!==i&&a.conf.getBBoxNest?a.conf.getBBoxNest(a,e,o):fe(n,e.baseWindow);return g.capsMaskAnchor_pathDataSE[t]=!1!==i&&a.conf.getPathData?a.conf.getPathData(a,e,o):(i=null!=(n=s).right?n.right:n.left+n.width,a=null!=n.bottom?n.bottom:n.top+n.height,[{type:"M",values:[n.left,n.top]},{type:"L",values:[i,n.top]},{type:"L",values:[i,a]},{type:"L",values:[n.left,a]},{type:"Z",values:[]}]),g.capsMaskAnchor_strokeWidthSE[t]=o,s})),r=-1,y.socketSE[0]&&y.socketSE[1]?(_[0]=b(i[0],y.socketSE[0]),_[1]=b(i[1],y.socketSE[1])):(y.socketSE[0]||y.socketSE[1]?(l=y.socketSE[0]?(s=0,1):(s=1,0),_[s]=b(i[s],y.socketSE[s]),(o=P.map((function(e){return b(i[l],e)}))).forEach((function(e){var t=me(e,_[s]);(t<r||-1===r)&&(_[l]=e,r=t)}))):(o=P.map((function(e){return b(i[1],e)})),P.map((function(e){return b(i[0],e)})).forEach((function(e){o.forEach((function(t){var n=me(e,t);(n<r||-1===r)&&(_[0]=e,_[1]=t,r=n)}))}))),[0,1].forEach((function(e){var t,n;y.socketSE[e]||(i[e].width||i[e].height?i[e].width||4!==_[e].socketId&&2!==_[e].socketId?i[e].height||1!==_[e].socketId&&3!==_[e].socketId||(_[e].socketId=0<=_[e?0:1].y-i[e].top?3:1):_[e].socketId=0<=_[e?0:1].x-i[e].left?2:4:(t=_[e?0:1].x-i[e].left,n=_[e?0:1].y-i[e].top,_[e].socketId=Math.abs(t)>=Math.abs(n)?0<=t?2:4:0<=n?3:1))}))),g.position_path!==S.position_path||g.position_lineStrokeWidth!==S.position_lineStrokeWidth||[0,1].some((function(e){return g.position_plugOverheadSE[e]!==S.position_plugOverheadSE[e]||(t=_[e],i=S.position_socketXYSE[e],t.x!==i.x||t.y!==i.y||t.socketId!==i.socketId)||(t=n[e],i=S.position_socketGravitySE[e],(e=null==t?"auto":Array.isArray(t)?"array":"number")!=(null==i?"auto":Array.isArray(i)?"array":"number")||("array"==e?t[0]!==i[0]||t[1]!==i[1]:t!==i));var t,i}))){switch(e.pathList.baseVal=a=[],e.pathList.animVal=null,g.position_path){case 1:a.push([x(_[0]),x(_[1])]);break;case 2:d="number"==typeof n[0]&&0<n[0]||"number"==typeof n[1]&&0<n[1],d=(f=R*(d?-1:1))-(m=Math.atan2(_[1].y-_[0].y,_[1].x-_[0].x)),m=Math.PI-m-f,f=me(_[0],_[1])/Math.sqrt(2)*B,d={x:_[0].x+Math.cos(d)*f,y:_[0].y+Math.sin(d)*f*-1},f={x:_[1].x+Math.cos(m)*f,y:_[1].y+Math.sin(m)*f*-1},a.push([x(_[0]),d,f,x(_[1])]);break;case 3:case 4:h=[n[0],4===g.position_path?0:n[1]],p=[],c=[],_.forEach((function(e,t){var n,i=h[t],a=Array.isArray(i)?{x:i[0],y:i[1]}:"number"==typeof i?1===e.socketId?{x:0,y:-i}:2===e.socketId?{x:i,y:0}:3===e.socketId?{x:0,y:i}:{x:-i,y:0}:(n=_[t?0:1],i=0<(i=g.position_plugOverheadSE[t])?120+(8<i?3.75*(i-8):0):80+(g.position_lineStrokeWidth>4?5*(g.position_lineStrokeWidth-4):0),1===e.socketId?{x:0,y:-(a=(a=(e.y-n.y)/2)<i?i:a)}:2===e.socketId?{x:a=(a=(n.x-e.x)/2)<i?i:a,y:0}:3===e.socketId?{x:0,y:a=(a=(n.y-e.y)/2)<i?i:a}:{x:-(a=(a=(e.x-n.x)/2)<i?i:a),y:0});p[t]=e.x+a.x,c[t]=e.y+a.y})),a.push([x(_[0]),{x:p[0],y:c[0]},{x:p[1],y:c[1]},x(_[1])]);break;case 5:!function(){var e,i=[[],[]],o=[];function s(e){return 1===e?3:2===e?4:3===e?1:2}function l(e){return 2===e||4===e?"x":"y"}function r(e,t,n){var i={x:e.x,y:e.y};if(n){if(n===s(e.dirId))throw new Error("Invalid dirId: "+n);i.dirId=n}else i.dirId=e.dirId;return 1===i.dirId?i.y-=t:2===i.dirId?i.x+=t:3===i.dirId?i.y+=t:i.x-=t,i}function u(e,t){return 1===t.dirId?e.y<=t.y:2===t.dirId?e.x>=t.x:3===t.dirId?e.y>=t.y:e.x<=t.x}function h(e,t){return 1===t.dirId||3===t.dirId?e.x===t.x:e.y===t.y}function p(e){return e[0]?{contain:0,notContain:1}:{contain:1,notContain:0}}function c(e,t,n){return Math.abs(t[n]-e[n])}function d(e,t,n){return"x"===n?e.x<t.x?2:4:e.y<t.y?3:1}for(_.forEach((function(e,a){var l=x(e),u=n[a];e=Array.isArray(u)?u[0]<0?[4,-u[0]]:0<u[0]?[2,u[0]]:u[1]<0?[1,-u[1]]:0<u[1]?[3,u[1]]:[e.socketId,0]:"number"!=typeof u?[e.socketId,t]:0<=u?[e.socketId,u]:[s(e.socketId),-u],l.dirId=e[0],u=e[1],i[a].push(l),o[a]=r(l,u)}));function(){var e,n,a,s,f=[u(o[1],o[0]),u(o[0],o[1])],m=[l(o[0].dirId),l(o[1].dirId)];if(m[0]===m[1]){if(f[0]&&f[1])return void(h(o[1],o[0])||(o[0][m[0]]===o[1][m[1]]?(i[0].push(o[0]),i[1].push(o[1])):(e=o[0][m[0]]+(o[1][m[1]]-o[0][m[0]])/2,i[0].push(r(o[0],Math.abs(e-o[0][m[0]]))),i[1].push(r(o[1],Math.abs(e-o[1][m[1]]))))));f[0]!==f[1]?(n=p(f),(a=c(o[n.notContain],o[n.contain],m[n.notContain]))<t&&(o[n.notContain]=r(o[n.notContain],t-a)),i[n.notContain].push(o[n.notContain]),o[n.notContain]=r(o[n.notContain],t,h(o[n.contain],o[n.notContain])?"x"===m[n.notContain]?3:2:d(o[n.notContain],o[n.contain],"x"===m[n.notContain]?"y":"x"))):(a=c(o[0],o[1],"x"===m[0]?"y":"x"),i.forEach((function(e,n){var i=0===n?1:0;e.push(o[n]),o[n]=r(o[n],t,2*t<=a?d(o[n],o[i],"x"===m[n]?"y":"x"):"x"===m[n]?3:2)})))}else{if(f[0]&&f[1])return void(h(o[1],o[0])?i[1].push(o[1]):h(o[0],o[1])?i[0].push(o[0]):i[0].push("x"===m[0]?{x:o[1].x,y:o[0].y}:{x:o[0].x,y:o[1].y}));f[0]!==f[1]?(n=p(f),i[n.notContain].push(o[n.notContain]),o[n.notContain]=r(o[n.notContain],t,c(o[n.notContain],o[n.contain],m[n.contain])>=t?d(o[n.notContain],o[n.contain],m[n.contain]):o[n.contain].dirId)):(s=[{x:o[0].x,y:o[0].y},{x:o[1].x,y:o[1].y}],i.forEach((function(e,n){var i=0===n?1:0,a=c(s[n],s[i],m[n]);a<t&&(o[n]=r(o[n],t-a)),e.push(o[n]),o[n]=r(o[n],t,d(o[n],o[i],m[i]))})))}return 1}(););i[1].reverse(),i[0].concat(i[1]).forEach((function(t,n){t={x:t.x,y:t.y},0<n&&a.push([e,t]),e=t}))}()}u=[],g.position_plugOverheadSE.forEach((function(e,t){var n,o,s,l,r,h,p,c,d,f=!t;0<e?2===(n=a[o=f?0:a.length-1]).length?(u[o]=u[o]||me.apply(null,n),u[o]>W&&(u[o]-e<W&&(e=u[o]-W),p=ye(n[0],n[1],(f?e:u[o]-e)/u[o]),a[o]=f?[p,n[1]]:[n[0],p],u[o]-=e)):(u[o]=u[o]||_e.apply(null,n),u[o]>W&&(u[o]-e<W&&(e=u[o]-W),p=Se(n[0],n[1],n[2],n[3],ve(n[0],n[1],n[2],n[3],f?e:u[o]-e)),l=f?(s=n[0],p.toP1):(s=n[3],p.fromP2),r=Math.atan2(s.y-p.y,p.x-s.x),h=me(p,l),p.x=s.x+Math.cos(r)*e,p.y=s.y+Math.sin(r)*e*-1,l.x=p.x+Math.cos(r)*h,l.y=p.y+Math.sin(r)*h*-1,a[o]=f?[p,p.toP1,p.toP2,n[3]]:[n[0],p.fromP1,p.fromP2,p],u[o]=null)):e<0&&(n=a[o=f?0:a.length-1],p=_[t].socketId,t=-i[t]["x"==(c=4===p||2===p?"x":"y")?"width":"height"],d=(e=e<t?t:e)*(4===p||1===p?-1:1),2===n.length?n[f?0:n.length-1][c]+=d:(f?[0,1]:[n.length-2,n.length-1]).forEach((function(e){n[e][c]+=d})),u[o]=null)})),S.position_socketXYSE=ue(_),S.position_plugOverheadSE=ue(g.position_plugOverheadSE),S.position_path=g.position_path,S.position_lineStrokeWidth=g.position_lineStrokeWidth,S.position_socketGravitySE=ue(n),v=!0,e.events.apl_position&&e.events.apl_position.forEach((function(t){t(e,a)}))}return v}function We(e,t){t!==e.isShown&&(!!t!=!!e.isShown&&(e.svg.style.visibility=t?"":"hidden"),e.isShown=t,e.events&&e.events.svgShow&&e.events.svgShow.forEach((function(n){n(e,t)})))}function Be(e,n){var i,a,o,s,l,r,u,h,p,c,d,f,m,y,g,S,_,v,b,x,E,k,w,O,M,C,A,P,N,W,B,R,F,D,Z,q,X,$,Q,K,J,ee,te,ne={};n.line&&(ne.line=(h=(i=e).options,a=i.curStats,p=i.events,c=!1,c=Ve(i,a,"line_color",h.lineColor,p.cur_line_color)||c,c=Ve(i,a,"line_colorTra",he(a.line_color)[0]<1)||c,c=Ve(i,a,"line_strokeWidth",h.lineSize,p.cur_line_strokeWidth)||c)),(n.plug||ne.line)&&(ne.plug=(s=(o=e).options,l=o.curStats,r=o.events,u=!1,[0,1].forEach((function(e){var t,n,i,a,h,p,c,d,f=s.plugSE[e];u=Ve(o,l.plug_enabledSE,e,f!==I)||u,u=Ve(o,l.plug_plugSE,e,f)||u,u=Ve(o,l.plug_colorSE,e,d=s.plugColorSE[e]||l.line_color,r.cur_plug_colorSE)||u,u=Ve(o,l.plug_colorTraSE,e,he(d)[0]<1)||u,f!==I&&(a=n=(t=L[V[f]]).widthR*s.plugSizeSE[e],h=i=t.heightR*s.plugSizeSE[e],H&&(a*=l.line_strokeWidth,h*=l.line_strokeWidth),u=Ve(o,l.plug_markerWidthSE,e,a)||u,u=Ve(o,l.plug_markerHeightSE,e,h)||u,l.capsMaskMarker_markerWidthSE[e]=n,l.capsMaskMarker_markerHeightSE[e]=i),l.plugOutline_plugSE[e]=l.capsMaskMarker_plugSE[e]=f,l.plug_enabledSE[e]?(d=l.line_strokeWidth/Y.lineSize*s.plugSizeSE[e],l.position_plugOverheadSE[e]=t.overhead*d,l.viewBox_plugBCircleSE[e]=t.bCircle*d,p=t.sideLen*d,c=t.backLen*d):(l.position_plugOverheadSE[e]=-l.line_strokeWidth/2,l.viewBox_plugBCircleSE[e]=p=c=0),Ve(o,l.attach_plugSideLenSE,e,p,r.cur_attach_plugSideLenSE),Ve(o,l.attach_plugBackLenSE,e,c,r.cur_attach_plugBackLenSE),l.capsMaskAnchor_enabledSE[e]=!l.plug_enabledSE[e]})),u=Ve(o,l,"plug_enabled",l.plug_enabledSE[0]||l.plug_enabledSE[1])||u)),(n.lineOutline||ne.line)&&(ne.lineOutline=(p=(h=e).options,w=!1,w=Ve(h,c=h.curStats,"lineOutline_enabled",p.lineOutlineEnabled)||w,w=Ve(h,c,"lineOutline_color",p.lineOutlineColor)||w,w=Ve(h,c,"lineOutline_colorTra",he(c.lineOutline_color)[0]<1)||w,p=c.line_strokeWidth*p.lineOutlineSize,w=Ve(h,c,"lineOutline_strokeWidth",c.line_strokeWidth-2*p)||w,w=Ve(h,c,"lineOutline_inStrokeWidth",c.lineOutline_colorTra?c.lineOutline_strokeWidth+2*U:c.line_strokeWidth-p)||w)),(n.plugOutline||ne.line||ne.plug||ne.lineOutline)&&(ne.plugOutline=(f=(d=e).options,m=d.curStats,y=!1,[0,1].forEach((function(e){var t=m.plugOutline_plugSE[e],n=t!==I?L[V[t]]:null;y=Ve(d,m.plugOutline_enabledSE,e,f.plugOutlineEnabledSE[e]&&m.plug_enabled&&m.plug_enabledSE[e]&&!!n&&!!n.outlineBase)||y,y=Ve(d,m.plugOutline_colorSE,e,t=f.plugOutlineColorSE[e]||m.lineOutline_color)||y,y=Ve(d,m.plugOutline_colorTraSE,e,he(t)[0]<1)||y,n&&n.outlineBase&&((t=f.plugOutlineSizeSE[e])>n.outlineMax&&(t=n.outlineMax),t*=2*n.outlineBase,y=Ve(d,m.plugOutline_strokeWidthSE,e,t)||y,y=Ve(d,m.plugOutline_inStrokeWidthSE,e,m.plugOutline_colorTraSE[e]?t-U/(m.line_strokeWidth/Y.lineSize)/f.plugSizeSE[e]*2:t/2)||y)})),y)),(n.faces||ne.line||ne.plug||ne.lineOutline||ne.plugOutline)&&(ne.faces=(_=(g=e).curStats,v=g.aplStats,b=g.events,x=!1,!_.line_altColor&&Ve(g,v,"line_color",S=_.line_color,b.apl_line_color)&&(g.lineFace.style.stroke=S,x=!0),Ve(g,v,"line_strokeWidth",S=_.line_strokeWidth,b.apl_line_strokeWidth)&&(g.lineShape.style.strokeWidth=S+"px",x=!0,(j||G)&&(Me(g,g.lineShape),G&&(Me(g,g.lineFace),Me(g,g.lineMaskCaps)))),Ve(g,v,"lineOutline_enabled",S=_.lineOutline_enabled,b.apl_lineOutline_enabled)&&(g.lineOutlineFace.style.display=S?"inline":"none",x=!0),_.lineOutline_enabled&&(Ve(g,v,"lineOutline_color",S=_.lineOutline_color,b.apl_lineOutline_color)&&(g.lineOutlineFace.style.stroke=S,x=!0),Ve(g,v,"lineOutline_strokeWidth",S=_.lineOutline_strokeWidth,b.apl_lineOutline_strokeWidth)&&(g.lineOutlineMaskShape.style.strokeWidth=S+"px",x=!0,G&&(Me(g,g.lineOutlineMaskCaps),Me(g,g.lineOutlineFace))),Ve(g,v,"lineOutline_inStrokeWidth",S=_.lineOutline_inStrokeWidth,b.apl_lineOutline_inStrokeWidth)&&(g.lineMaskShape.style.strokeWidth=S+"px",x=!0,G&&(Me(g,g.lineOutlineMaskCaps),Me(g,g.lineOutlineFace)))),Ve(g,v,"plug_enabled",S=_.plug_enabled,b.apl_plug_enabled)&&(g.plugsFace.style.display=S?"inline":"none",x=!0),_.plug_enabled&&[0,1].forEach((function(e){var t=_.plug_plugSE[e],n=t!==I?L[V[t]]:null,i=Le(e,n);Ve(g,v.plug_enabledSE,e,S=_.plug_enabledSE[e],b.apl_plug_enabledSE)&&(g.plugsFace.style[i.prop]=S?"url(#"+g.plugMarkerIdSE[e]+")":"none",x=!0),_.plug_enabledSE[e]&&(Ve(g,v.plug_plugSE,e,t,b.apl_plug_plugSE)&&(g.plugFaceSE[e].href.baseVal="#"+n.elmId,Ce(g,g.plugMarkerSE[e],i.orient,n.bBox,g.svg,g.plugMarkerShapeSE[e],g.plugsFace),x=!0,j&&Me(g,g.plugsFace)),Ve(g,v.plug_colorSE,e,S=_.plug_colorSE[e],b.apl_plug_colorSE)&&(g.plugFaceSE[e].style.fill=S,x=!0,(z||H||G)&&!_.line_colorTra&&Me(g,G?g.lineMaskCaps:g.capsMaskLine)),["markerWidth","markerHeight"].forEach((function(t){var n="plug_"+t+"SE";Ve(g,v[n],e,S=_[n][e],b["apl_"+n])&&(g.plugMarkerSE[e][t].baseVal.value=S,x=!0)})),Ve(g,v.plugOutline_enabledSE,e,S=_.plugOutline_enabledSE[e],b.apl_plugOutline_enabledSE)&&(S?(g.plugFaceSE[e].style.mask="url(#"+g.plugMaskIdSE[e]+")",g.plugOutlineFaceSE[e].style.display="inline"):(g.plugFaceSE[e].style.mask="none",g.plugOutlineFaceSE[e].style.display="none"),x=!0),_.plugOutline_enabledSE[e]&&(Ve(g,v.plugOutline_plugSE,e,t,b.apl_plugOutline_plugSE)&&(g.plugOutlineFaceSE[e].href.baseVal=g.plugMaskShapeSE[e].href.baseVal=g.plugOutlineMaskShapeSE[e].href.baseVal="#"+n.elmId,[g.plugMaskSE[e],g.plugOutlineMaskSE[e]].forEach((function(e){e.x.baseVal.value=n.bBox.left,e.y.baseVal.value=n.bBox.top,e.width.baseVal.value=n.bBox.width,e.height.baseVal.value=n.bBox.height})),x=!0),Ve(g,v.plugOutline_colorSE,e,S=_.plugOutline_colorSE[e],b.apl_plugOutline_colorSE)&&(g.plugOutlineFaceSE[e].style.fill=S,x=!0,G&&(Me(g,g.lineMaskCaps),Me(g,g.lineOutlineMaskCaps))),Ve(g,v.plugOutline_strokeWidthSE,e,S=_.plugOutline_strokeWidthSE[e],b.apl_plugOutline_strokeWidthSE)&&(g.plugOutlineMaskShapeSE[e].style.strokeWidth=S+"px",x=!0),Ve(g,v.plugOutline_inStrokeWidthSE,e,S=_.plugOutline_inStrokeWidthSE[e],b.apl_plugOutline_inStrokeWidthSE)&&(g.plugMaskShapeSE[e].style.strokeWidth=S+"px",x=!0)))})),x)),(n.position||ne.line||ne.plug)&&(ne.position=Te(e)),(n.path||ne.position)&&(ne.path=(w=(E=e).curStats,A=E.aplStats,C=E.pathList.animVal||E.pathList.baseVal,O=w.path_edge,P=!1,C&&(O.x1=O.x2=C[0][0].x,O.y1=O.y2=C[0][0].y,w.path_pathData=k=be(C,(function(e){e.x<O.x1&&(O.x1=e.x),e.y<O.y1&&(O.y1=e.y),e.x>O.x2&&(O.x2=e.x),e.y>O.y2&&(O.y2=e.y)})),Ee(k,A.path_pathData)&&(E.linePath.setPathData(k),A.path_pathData=k,P=!0,G?(Me(E,E.plugsFace),Me(E,E.lineMaskCaps)):j&&Me(E,E.linePath),E.events.apl_path&&E.events.apl_path.forEach((function(e){e(E,k)})))),P)),ne.viewBox=(C=(M=e).curStats,A=M.aplStats,P=C.path_edge,N=C.viewBox_bBox,W=A.viewBox_bBox,B=M.svg.viewBox.baseVal,R=M.svg.style,F=!1,A=Math.max(C.line_strokeWidth/2,C.viewBox_plugBCircleSE[0]||0,C.viewBox_plugBCircleSE[1]||0),D={x1:P.x1-A,y1:P.y1-A,x2:P.x2+A,y2:P.y2+A},M.events.new_edge4viewBox&&M.events.new_edge4viewBox.forEach((function(e){e(M,D)})),N.x=C.lineMask_x=C.lineOutlineMask_x=C.maskBGRect_x=D.x1,N.y=C.lineMask_y=C.lineOutlineMask_y=C.maskBGRect_y=D.y1,N.width=D.x2-D.x1,N.height=D.y2-D.y1,["x","y","width","height"].forEach((function(e){var t;(t=N[e])!==W[e]&&(B[e]=W[e]=t,R[T[e]]=t+("x"===e||"y"===e?M.bodyOffset[e]:0)+"px",F=!0)})),F),ne.mask=(X=(Z=e).curStats,$=Z.aplStats,Q=!1,X.plug_enabled?[0,1].forEach((function(e){X.capsMaskMarker_enabledSE[e]=X.plug_enabledSE[e]&&X.plug_colorTraSE[e]||X.plugOutline_enabledSE[e]&&X.plugOutline_colorTraSE[e]})):X.capsMaskMarker_enabledSE[0]=X.capsMaskMarker_enabledSE[1]=!1,X.capsMaskMarker_enabled=X.capsMaskMarker_enabledSE[0]||X.capsMaskMarker_enabledSE[1],X.lineMask_outlineMode=X.lineOutline_enabled,X.caps_enabled=X.capsMaskMarker_enabled||X.capsMaskAnchor_enabledSE[0]||X.capsMaskAnchor_enabledSE[1],X.lineMask_enabled=X.caps_enabled||X.lineMask_outlineMode,(X.lineMask_enabled&&!X.lineMask_outlineMode||X.lineOutline_enabled)&&["x","y"].forEach((function(e){var t="maskBGRect_"+e;Ve(Z,$,t,q=X[t])&&(Z.maskBGRect[e].baseVal.value=q,Q=!0)})),Ve(Z,$,"lineMask_enabled",q=X.lineMask_enabled)&&(Z.lineFace.style.mask=q?"url(#"+Z.lineMaskId+")":"none",Q=!0,H&&Me(Z,Z.lineMask)),X.lineMask_enabled&&(Ve(Z,$,"lineMask_outlineMode",q=X.lineMask_outlineMode)&&(q?(Z.lineMaskBG.style.display="none",Z.lineMaskShape.style.display="inline"):(Z.lineMaskBG.style.display="inline",Z.lineMaskShape.style.display="none"),Q=!0),["x","y"].forEach((function(e){var t="lineMask_"+e;Ve(Z,$,t,q=X[t])&&(Z.lineMask[e].baseVal.value=q,Q=!0)})),Ve(Z,$,"caps_enabled",q=X.caps_enabled)&&(Z.lineMaskCaps.style.display=Z.lineOutlineMaskCaps.style.display=q?"inline":"none",Q=!0,H&&Me(Z,Z.capsMaskLine)),X.caps_enabled&&([0,1].forEach((function(e){var t;Ve(Z,$.capsMaskAnchor_enabledSE,e,q=X.capsMaskAnchor_enabledSE[e])&&(Z.capsMaskAnchorSE[e].style.display=q?"inline":"none",Q=!0,H&&Me(Z,Z.lineMask)),X.capsMaskAnchor_enabledSE[e]&&(Ee(t=X.capsMaskAnchor_pathDataSE[e],$.capsMaskAnchor_pathDataSE[e])&&(Z.capsMaskAnchorSE[e].setPathData(t),$.capsMaskAnchor_pathDataSE[e]=t,Q=!0),Ve(Z,$.capsMaskAnchor_strokeWidthSE,e,q=X.capsMaskAnchor_strokeWidthSE[e])&&(Z.capsMaskAnchorSE[e].style.strokeWidth=q+"px",Q=!0))})),Ve(Z,$,"capsMaskMarker_enabled",q=X.capsMaskMarker_enabled)&&(Z.capsMaskLine.style.display=q?"inline":"none",Q=!0),X.capsMaskMarker_enabled&&[0,1].forEach((function(e){var t=X.capsMaskMarker_plugSE[e],n=t!==I?L[V[t]]:null,i=Le(e,n);Ve(Z,$.capsMaskMarker_enabledSE,e,q=X.capsMaskMarker_enabledSE[e])&&(Z.capsMaskLine.style[i.prop]=q?"url(#"+Z.lineMaskMarkerIdSE[e]+")":"none",Q=!0),X.capsMaskMarker_enabledSE[e]&&(Ve(Z,$.capsMaskMarker_plugSE,e,t)&&(Z.capsMaskMarkerShapeSE[e].href.baseVal="#"+n.elmId,Ce(Z,Z.capsMaskMarkerSE[e],i.orient,n.bBox,Z.svg,Z.capsMaskMarkerShapeSE[e],Z.capsMaskLine),Q=!0,j&&(Me(Z,Z.capsMaskLine),Me(Z,Z.lineFace))),["markerWidth","markerHeight"].forEach((function(t){var n="capsMaskMarker_"+t+"SE";Ve(Z,$[n],e,q=X[n][e])&&(Z.capsMaskMarkerSE[e][t].baseVal.value=q,Q=!0)})))})))),X.lineOutline_enabled&&["x","y"].forEach((function(e){var t="lineOutlineMask_"+e;Ve(Z,$,t,q=X[t])&&(Z.lineOutlineMask[e].baseVal.value=q,Q=!0)})),Q),n.effect&&(ee=(K=e).curStats,te=K.aplStats,Object.keys(t).forEach((function(e){var n=t[e],i=e+"_enabled",a=e+"_options";e=ee[a],Ve(K,te,i,J=ee[i])?(J&&(te[a]=ue(e)),n[J?"init":"remove"](K)):J&&re(e,te[a])&&(n.remove(K),te[i]=!0,te[a]=ue(e),n.init(K))}))),(z||H)&&ne.line&&!ne.path&&Me(e,e.lineShape),z&&ne.plug&&!ne.line&&Me(e,e.plugsFace),Ie(e)}function Re(e,t){return{duration:(q(e.duration)&&0<e.duration?e:t).duration,timing:X.validTiming(e.timing)?e.timing:ue(t.timing)}}function Fe(e,t,i,a){var o=e.curStats,s=e.aplStats,l={};function r(){["show_on","show_effect","show_animOptions"].forEach((function(e){s[e]=o[e]}))}o.show_on=t,i&&n[i]&&(o.show_effect=i,o.show_animOptions=Re(Z(a)?a:{},n[i].defaultAnimOptions)),l.show_on=o.show_on!==s.show_on,l.show_effect=o.show_effect!==s.show_effect,l.show_animOptions=re(o.show_animOptions,s.show_animOptions),l.show_effect||l.show_animOptions?o.show_inAnim?(i=l.show_effect?n[s.show_effect].stop(e,!0,!0):n[s.show_effect].stop(e),r(),n[s.show_effect].init(e,i)):l.show_on&&(s.show_effect&&l.show_effect&&n[s.show_effect].stop(e,!0,!0),r(),n[s.show_effect].init(e)):l.show_on&&(r(),n[s.show_effect].start(e))}function De(e,t,n){return n={props:e,optionName:n},e.attachments.indexOf(t)<0&&(!t.conf.bind||t.conf.bind(t,n))&&(e.attachments.push(t),t.boundTargets.push(n),1)}function Ge(e,t,n){var i=e.attachments.indexOf(t);-1<i&&e.attachments.splice(i,1),t.boundTargets.some((function(n,a){return n.props===e&&(t.conf.unbind&&t.conf.unbind(t,n),i=a,!0)}))&&(t.boundTargets.splice(i,1),n||Oe((function(){t.boundTargets.length||s(t)})))}function je(e,s){var l,r,u,h,p,c,d,f,m,y,g,S,_,v,b,x=e.options,E={};function k(e,t,n,i,a){var o={};return n?null!=i?(o.container=e[n],o.key=i):(o.container=e,o.key=n):(o.container=e,o.key=t),o.default=a,o.acceptsAuto=null==o.default,o}function I(e,t,n,i,a,o,s){var l,r,u;return s=k(e,n,a,o,s),null!=t[n]&&(r=(t[n]+"").toLowerCase())&&(s.acceptsAuto&&r===N||(u=i[r]))&&u!==s.container[s.key]&&(s.container[s.key]=u,l=!0),null!=s.container[s.key]||s.acceptsAuto||(s.container[s.key]=s.default,l=!0),l}function C(e,t,n,i,a,o,s,l,r){var u,h,p,c;if(s=k(e,n,a,o,s),!i){if(null==s.default)throw new Error("Invalid `type`: "+n);i=typeof s.default}return null!=t[n]&&(s.acceptsAuto&&(t[n]+"").toLowerCase()===N||(p=h=t[n],("number"===(c=i)?q(p):typeof p===c)&&(h=r&&"string"===i&&h?h.trim():h,1)&&(!l||l(h))))&&h!==s.container[s.key]&&(s.container[s.key]=h,u=!0),null!=s.container[s.key]||s.acceptsAuto||(s.container[s.key]=s.default,u=!0),u}if(s=s||{},["start","end"].forEach((function(t,n){var i=s[t],a=!1;if(i&&(pe(i)||(a=o(i,"anchor")))&&i!==x.anchorSE[n]){if(!1!==e.optionIsAttach.anchorSE[n]&&Ge(e,ie[x.anchorSE[n]._id]),a&&!De(e,ie[i._id],t))throw new Error("Can't bind attachment");x.anchorSE[n]=i,e.optionIsAttach.anchorSE[n]=a,l=E.position=!0}})),!x.anchorSE[0]||!x.anchorSE[1]||x.anchorSE[0]===x.anchorSE[1])throw new Error("`start` and `end` are required.");function L(e){var t=p.appendChild(v.createElementNS(D,"mask"));return t.id=e,t.maskUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[t.x,t.y,t.width,t.height].forEach((function(e){e.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)})),t}function V(e){var t=p.appendChild(v.createElementNS(D,"marker"));return t.id=e,t.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_STROKEWIDTH,t.viewBox.baseVal||t.setAttribute("viewBox","0 0 0 0"),t}function P(e){return[e.width,e.height].forEach((function(e){e.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100)})),e}l&&(g=function(e,t){var n,i;if(!(e=de(e))||!(n=de(t)))throw new Error("Cannot get frames.");return e.length&&n.length&&(e.reverse(),n.reverse(),e.some((function(e){return n.some((function(t){return t===e&&(i=t.contentWindow,!0)}))}))),i||window}(!1!==e.optionIsAttach.anchorSE[0]?ie[x.anchorSE[0]._id].element:x.anchorSE[0],!1!==e.optionIsAttach.anchorSE[1]?ie[x.anchorSE[1]._id].element:x.anchorSE[1]))!==e.baseWindow&&(u=g,_=(r=e).aplStats,v=u.document,b=w+"-"+r._id,r.pathList={},Ae(_,Q),Object.keys(t).forEach((function(e){var n=e+"_enabled";_[n]&&(t[e].remove(r),_[n]=!1)})),r.baseWindow&&r.svg&&r.baseWindow.document.body.removeChild(r.svg),Ne(r.baseWindow=u),r.bodyOffset=Pe(u),r.svg=h=v.createElementNS(D,"svg"),h.className.baseVal=w,h.viewBox.baseVal||h.setAttribute("viewBox","0 0 0 0"),r.defs=p=h.appendChild(v.createElementNS(D,"defs")),r.linePath=d=p.appendChild(v.createElementNS(D,"path")),d.id=f=b+"-line-path",d.className.baseVal=w+"-line-path",H&&(d.style.fill="none"),r.lineShape=d=p.appendChild(v.createElementNS(D,"use")),d.id=m=b+"-line-shape",d.href.baseVal="#"+f,(c=p.appendChild(v.createElementNS(D,"g"))).id=y=b+"-caps",r.capsMaskAnchorSE=[0,1].map((function(){var e=c.appendChild(v.createElementNS(D,"path"));return e.className.baseVal=w+"-caps-mask-anchor",e})),r.lineMaskMarkerIdSE=[b+"-caps-mask-marker-0",b+"-caps-mask-marker-1"],r.capsMaskMarkerSE=[0,1].map((function(e){return V(r.lineMaskMarkerIdSE[e])})),r.capsMaskMarkerShapeSE=[0,1].map((function(e){return(e=r.capsMaskMarkerSE[e].appendChild(v.createElementNS(D,"use"))).className.baseVal=w+"-caps-mask-marker-shape",e})),r.capsMaskLine=d=c.appendChild(v.createElementNS(D,"use")),d.className.baseVal=w+"-caps-mask-line",d.href.baseVal="#"+m,r.maskBGRect=d=P(p.appendChild(v.createElementNS(D,"rect"))),d.id=g=b+"-mask-bg-rect",d.className.baseVal=w+"-mask-bg-rect",H&&(d.style.fill="white"),r.lineMask=P(L(r.lineMaskId=b+"-line-mask")),r.lineMaskBG=d=r.lineMask.appendChild(v.createElementNS(D,"use")),d.href.baseVal="#"+g,r.lineMaskShape=d=r.lineMask.appendChild(v.createElementNS(D,"use")),d.className.baseVal=w+"-line-mask-shape",d.href.baseVal="#"+f,d.style.display="none",r.lineMaskCaps=d=r.lineMask.appendChild(v.createElementNS(D,"use")),d.href.baseVal="#"+y,r.lineOutlineMask=P(L(u=b+"-line-outline-mask")),(d=r.lineOutlineMask.appendChild(v.createElementNS(D,"use"))).href.baseVal="#"+g,r.lineOutlineMaskShape=d=r.lineOutlineMask.appendChild(v.createElementNS(D,"use")),d.className.baseVal=w+"-line-outline-mask-shape",d.href.baseVal="#"+f,r.lineOutlineMaskCaps=d=r.lineOutlineMask.appendChild(v.createElementNS(D,"use")),d.href.baseVal="#"+y,r.face=h.appendChild(v.createElementNS(D,"g")),r.lineFace=d=r.face.appendChild(v.createElementNS(D,"use")),d.href.baseVal="#"+m,r.lineOutlineFace=d=r.face.appendChild(v.createElementNS(D,"use")),d.href.baseVal="#"+m,d.style.mask="url(#"+u+")",d.style.display="none",r.plugMaskIdSE=[b+"-plug-mask-0",b+"-plug-mask-1"],r.plugMaskSE=[0,1].map((function(e){return L(r.plugMaskIdSE[e])})),r.plugMaskShapeSE=[0,1].map((function(e){return(e=r.plugMaskSE[e].appendChild(v.createElementNS(D,"use"))).className.baseVal=w+"-plug-mask-shape",e})),S=[],r.plugOutlineMaskSE=[0,1].map((function(e){return L(S[e]=b+"-plug-outline-mask-"+e)})),r.plugOutlineMaskShapeSE=[0,1].map((function(e){return(e=r.plugOutlineMaskSE[e].appendChild(v.createElementNS(D,"use"))).className.baseVal=w+"-plug-outline-mask-shape",e})),r.plugMarkerIdSE=[b+"-plug-marker-0",b+"-plug-marker-1"],r.plugMarkerSE=[0,1].map((function(e){return e=V(r.plugMarkerIdSE[e]),H&&(e.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_USERSPACEONUSE),e})),r.plugMarkerShapeSE=[0,1].map((function(e){return r.plugMarkerSE[e].appendChild(v.createElementNS(D,"g"))})),r.plugFaceSE=[0,1].map((function(e){return r.plugMarkerShapeSE[e].appendChild(v.createElementNS(D,"use"))})),r.plugOutlineFaceSE=[0,1].map((function(e){var t=r.plugMarkerShapeSE[e].appendChild(v.createElementNS(D,"use"));return t.style.mask="url(#"+S[e]+")",t.style.display="none",t})),r.plugsFace=d=r.face.appendChild(v.createElementNS(D,"use")),d.className.baseVal=w+"-plugs-face",d.href.baseVal="#"+m,d.style.display="none",r.curStats.show_inAnim?(r.isShown=1,n[_.show_effect].stop(r,!0)):r.isShown||(h.style.visibility="hidden"),v.body.appendChild(h),[0,1,2].forEach((function(e){var t;(e=r.options.labelSEM[e])&&o(e,"label")&&(t=ie[e._id]).conf.initSvg&&t.conf.initSvg(t,r)})),E.line=E.plug=E.lineOutline=E.plugOutline=E.faces=E.effect=!0),E.position=I(x,s,"path",M,null,null,Y.path)||E.position,E.position=I(x,s,"startSocket",O,"socketSE",0)||E.position,E.position=I(x,s,"endSocket",O,"socketSE",1)||E.position,[s.startSocketGravity,s.endSocketGravity].forEach((function(e,t){var n,i,a=!1;null!=e&&(Array.isArray(e)?q(e[0])&&q(e[1])&&(a=[e[0],e[1]],Array.isArray(x.socketGravitySE[t])&&(n=a,i=x.socketGravitySE[t],n.length===i.length&&n.every((function(e,t){return e===i[t]})))&&(a=!1)):((e+"").toLowerCase()===N?a=null:q(e)&&0<=e&&(a=e),a===x.socketGravitySE[t]&&(a=!1)),!1!==a&&(x.socketGravitySE[t]=a,E.position=!0))})),E.line=C(x,s,"color",null,"lineColor",null,Y.lineColor,null,!0)||E.line,E.line=C(x,s,"size",null,"lineSize",null,Y.lineSize,(function(e){return 0<e}))||E.line,["startPlug","endPlug"].forEach((function(e,t){E.plug=I(x,s,e,A,"plugSE",t,Y.plugSE[t])||E.plug,E.plug=C(x,s,e+"Color","string","plugColorSE",t,null,null,!0)||E.plug,E.plug=C(x,s,e+"Size",null,"plugSizeSE",t,Y.plugSizeSE[t],(function(e){return 0<e}))||E.plug})),E.lineOutline=C(x,s,"outline",null,"lineOutlineEnabled",null,Y.lineOutlineEnabled)||E.lineOutline,E.lineOutline=C(x,s,"outlineColor",null,"lineOutlineColor",null,Y.lineOutlineColor,null,!0)||E.lineOutline,E.lineOutline=C(x,s,"outlineSize",null,"lineOutlineSize",null,Y.lineOutlineSize,(function(e){return 0<e&&e<=.48}))||E.lineOutline,["startPlugOutline","endPlugOutline"].forEach((function(e,t){E.plugOutline=C(x,s,e,null,"plugOutlineEnabledSE",t,Y.plugOutlineEnabledSE[t])||E.plugOutline,E.plugOutline=C(x,s,e+"Color","string","plugOutlineColorSE",t,null,null,!0)||E.plugOutline,E.plugOutline=C(x,s,e+"Size",null,"plugOutlineSizeSE",t,Y.plugOutlineSizeSE[t],(function(e){return 1<=e}))||E.plugOutline})),["startLabel","endLabel","middleLabel"].forEach((function(t,n){var l,r,u,h=s[t],p=x.labelSEM[n]&&!e.optionIsAttach.labelSEM[n]?ie[x.labelSEM[n]._id].text:x.labelSEM[n],c=!1;if((l="string"==typeof h)&&(h=h.trim()),(l||h&&(c=o(h,"label")))&&h!==p){if(x.labelSEM[n]&&(Ge(e,ie[x.labelSEM[n]._id]),x.labelSEM[n]=""),h){if(c?(r=ie[(u=h)._id]).boundTargets.slice().forEach((function(e){r.conf.removeOption(r,e)})):u=new a(i.captionLabel,[h]),!De(e,ie[u._id],t))throw new Error("Can't bind attachment");x.labelSEM[n]=u}e.optionIsAttach.labelSEM[n]=c}})),Object.keys(t).forEach((function(n){var i,a,o=t[n],l=n+"_enabled",r=n+"_options";function u(e){var t={};return o.optionsConf.forEach((function(n){var i=n[0],a=n[3];null==n[4]||t[a]||(t[a]=[]),("function"==typeof i?i:"id"===i?I:C).apply(null,[t,e].concat(n.slice(1)))})),t}function h(t){var i,a=n+"_animOptions";return t.hasOwnProperty("animation")?Z(t.animation)?i=e.curStats[a]=Re(t.animation,o.defaultAnimOptions):(i=!!t.animation,e.curStats[a]=i?Re({},o.defaultAnimOptions):null):(i=!!o.defaultEnabled,e.curStats[a]=i?Re({},o.defaultAnimOptions):null),i}s.hasOwnProperty(n)&&(i=s[n],Z(i)?(e.curStats[l]=!0,a=e.curStats[r]=u(i),o.anim&&(e.curStats[r].animation=h(i))):(a=e.curStats[l]=!!i)&&(e.curStats[r]=u({}),o.anim&&(e.curStats[r].animation=h({}))),re(a,x[n])&&(x[n]=a,E.effect=!0))})),Be(e,E)}function ze(e,i,a){var o={options:{ee:e.ee,anchorSE:[],socketSE:[],socketGravitySE:[],plugSE:[],plugColorSE:[],plugSizeSE:[],plugOutlineEnabledSE:[],plugOutlineColorSE:[],plugOutlineSizeSE:[],labelSEM:["","",""]},optionIsAttach:{anchorSE:[!1,!1],labelSEM:[!1,!1,!1]},curStats:{},aplStats:{},attachments:[],events:{},reflowTargets:[]};Ae(o.curStats,Q),Ae(o.aplStats,Q),Object.keys(t).forEach((function(e){var n=t[e].stats;Ae(o.curStats,n),Ae(o.aplStats,n),o.options[e]=!1})),Ae(o.curStats,K),Ae(o.aplStats,K),o.curStats.show_effect=J,o.curStats.show_animOptions=ue(n[J].defaultAnimOptions),Object.defineProperty(this,"_id",{value:++ne}),o._id=this._id,te[this._id]=o,1===arguments.length&&(a=e,e=null),a=a||{},(e||i)&&(a=ue(a),e&&(a.start=e),i&&(a.end=i)),o.isShown=o.aplStats.show_on=!a.hide;try{this.setOptions(a)}catch{}}function He(e){return function(t){var n={};n[e]=t,this.setOptions(n)}}function Ue(e,t){var n,i={conf:e,curStats:{},aplStats:{},boundTargets:[]},a={};e.argOptions.every((function(e){return!(!t.length||("string"==typeof e.type?typeof t[0]!==e.type:"function"!=typeof e.type||!e.type(t[0]))||(a[e.optionName]=t.shift(),0))})),n=t.length&&Z(t[0])?ue(t[0]):{},Object.keys(a).forEach((function(e){n[e]=a[e]})),e.stats&&(Ae(i.curStats,e.stats),Ae(i.aplStats,e.stats)),Object.defineProperty(this,"_id",{value:++ae}),Object.defineProperty(this,"isRemoved",{get:function(){return!ie[this._id]}}),i._id=this._id,e.init&&!e.init(i,n)||(ie[this._id]=i)}return t={dash:{stats:{dash_len:{},dash_gap:{},dash_maxOffset:{}},anim:!0,defaultAnimOptions:{duration:1e3,timing:"linear"},optionsConf:[["type","len","number",null,null,null,function(e){return 0<e}],["type","gap","number",null,null,null,function(e){return 0<e}]],init:function(e){ke(e,"apl_line_strokeWidth",t.dash.update),e.lineFace.style.strokeDashoffset=0,t.dash.update(e)},remove:function(e){var n=e.curStats;we(e,"apl_line_strokeWidth",t.dash.update),n.dash_animId&&(X.remove(n.dash_animId),n.dash_animId=null),e.lineFace.style.strokeDasharray="none",e.lineFace.style.strokeDashoffset=0,Ae(e.aplStats,t.dash.stats)},update:function(e){var t,n=e.curStats,i=e.aplStats,a=i.dash_options,o=!1;n.dash_len=a.len||2*i.line_strokeWidth,n.dash_gap=a.gap||i.line_strokeWidth,n.dash_maxOffset=n.dash_len+n.dash_gap,o=Ve(e,i,"dash_len",n.dash_len)||o,(o=Ve(e,i,"dash_gap",n.dash_gap)||o)&&(e.lineFace.style.strokeDasharray=i.dash_len+","+i.dash_gap),n.dash_animOptions?(o=Ve(e,i,"dash_maxOffset",n.dash_maxOffset),i.dash_animOptions&&(o||re(n.dash_animOptions,i.dash_animOptions))&&(n.dash_animId&&(t=X.stop(n.dash_animId),X.remove(n.dash_animId)),i.dash_animOptions=null),i.dash_animOptions||(n.dash_animId=X.add((function(e){return(1-e)*i.dash_maxOffset+"px"}),(function(t){e.lineFace.style.strokeDashoffset=t}),n.dash_animOptions.duration,0,n.dash_animOptions.timing,!1,t),i.dash_animOptions=ue(n.dash_animOptions))):i.dash_animOptions&&(n.dash_animId&&(X.remove(n.dash_animId),n.dash_animId=null),e.lineFace.style.strokeDashoffset=0,i.dash_animOptions=null)}},gradient:{stats:{gradient_colorSE:{hasSE:!0},gradient_pointSE:{hasSE:!0,hasProps:!0}},optionsConf:[["type","startColor","string","colorSE",0,null,null,!0],["type","endColor","string","colorSE",1,null,null,!0]],init:function(e){var n=e.baseWindow.document,i=e.defs,a=w+"-"+e._id+"-gradient";e.efc_gradient_gradient=i=i.appendChild(n.createElementNS(D,"linearGradient")),i.id=a,i.gradientUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[i.x1,i.y1,i.x2,i.y2].forEach((function(e){e.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)})),e.efc_gradient_stopSE=[0,1].map((function(t){var i=e.efc_gradient_gradient.appendChild(n.createElementNS(D,"stop"));try{i.offset.baseVal=t}catch(e){if(e.code!==DOMException.NO_MODIFICATION_ALLOWED_ERR)throw e;i.setAttribute("offset",t)}return i})),ke(e,"cur_plug_colorSE",t.gradient.update),ke(e,"apl_path",t.gradient.update),e.curStats.line_altColor=!0,e.lineFace.style.stroke="url(#"+a+")",t.gradient.update(e)},remove:function(e){e.efc_gradient_gradient&&(e.defs.removeChild(e.efc_gradient_gradient),e.efc_gradient_gradient=e.efc_gradient_stopSE=null),we(e,"cur_plug_colorSE",t.gradient.update),we(e,"apl_path",t.gradient.update),e.curStats.line_altColor=!1,e.lineFace.style.stroke=e.curStats.line_color,Ae(e.aplStats,t.gradient.stats)},update:function(e){var t,n=e.curStats,i=e.aplStats,a=i.gradient_options,o=e.pathList.animVal||e.pathList.baseVal;[0,1].forEach((function(e){n.gradient_colorSE[e]=a.colorSE[e]||n.plug_colorSE[e]})),t=o[0][0],n.gradient_pointSE[0]={x:t.x,y:t.y},t=(o=o[o.length-1])[o.length-1],n.gradient_pointSE[1]={x:t.x,y:t.y},[0,1].forEach((function(t){var a;Ve(e,i.gradient_colorSE,t,a=n.gradient_colorSE[t])&&(H?(a=he(a),e.efc_gradient_stopSE[t].style.stopColor=a[1],e.efc_gradient_stopSE[t].style.stopOpacity=a[0]):e.efc_gradient_stopSE[t].style.stopColor=a),["x","y"].forEach((function(o){(a=n.gradient_pointSE[t][o])!==i.gradient_pointSE[t][o]&&(e.efc_gradient_gradient[o+(t+1)].baseVal.value=i.gradient_pointSE[t][o]=a)}))}))}},dropShadow:{stats:{dropShadow_dx:{},dropShadow_dy:{},dropShadow_blur:{},dropShadow_color:{},dropShadow_opacity:{},dropShadow_x:{},dropShadow_y:{}},optionsConf:[["type","dx",null,null,null,2],["type","dy",null,null,null,4],["type","blur",null,null,null,3,function(e){return 0<=e}],["type","color",null,null,null,"#000",null,!0],["type","opacity",null,null,null,.8,function(e){return 0<=e&&e<=1}]],init:function(e){var n,i,a,o,s=e.baseWindow.document,l=e.defs,r=w+"-"+e._id+"-dropShadow",u=(n=s,i=r,o={},"boolean"!=typeof h&&(h=!!window.SVGFEDropShadowElement&&!H),o.elmsAppend=[o.elmFilter=s=n.createElementNS(D,"filter")],s.filterUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,s.x.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),s.y.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),s.width.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),s.height.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),s.id=i,h?(o.elmOffset=o.elmBlur=a=s.appendChild(n.createElementNS(D,"feDropShadow")),o.styleFlood=a.style):(o.elmBlur=s.appendChild(n.createElementNS(D,"feGaussianBlur")),o.elmOffset=a=s.appendChild(n.createElementNS(D,"feOffset")),a.result.baseVal="offsetblur",a=s.appendChild(n.createElementNS(D,"feFlood")),o.styleFlood=a.style,(a=s.appendChild(n.createElementNS(D,"feComposite"))).in2.baseVal="offsetblur",a.operator.baseVal=SVGFECompositeElement.SVG_FECOMPOSITE_OPERATOR_IN,(a=s.appendChild(n.createElementNS(D,"feMerge"))).appendChild(n.createElementNS(D,"feMergeNode")),a.appendChild(n.createElementNS(D,"feMergeNode")).in1.baseVal="SourceGraphic"),o);["elmFilter","elmOffset","elmBlur","styleFlood","elmsAppend"].forEach((function(t){e["efc_dropShadow_"+t]=u[t]})),u.elmsAppend.forEach((function(e){l.appendChild(e)})),e.face.setAttribute("filter","url(#"+r+")"),ke(e,"new_edge4viewBox",t.dropShadow.adjustEdge),t.dropShadow.update(e)},remove:function(e){var n=e.defs;e.efc_dropShadow_elmsAppend&&(e.efc_dropShadow_elmsAppend.forEach((function(e){n.removeChild(e)})),e.efc_dropShadow_elmFilter=e.efc_dropShadow_elmOffset=e.efc_dropShadow_elmBlur=e.efc_dropShadow_styleFlood=e.efc_dropShadow_elmsAppend=null),we(e,"new_edge4viewBox",t.dropShadow.adjustEdge),Be(e,{}),e.face.removeAttribute("filter"),Ae(e.aplStats,t.dropShadow.stats)},update:function(e){var t,n,i=e.curStats,a=e.aplStats,o=a.dropShadow_options;i.dropShadow_dx=t=o.dx,Ve(e,a,"dropShadow_dx",t)&&(e.efc_dropShadow_elmOffset.dx.baseVal=t,n=!0),i.dropShadow_dy=t=o.dy,Ve(e,a,"dropShadow_dy",t)&&(e.efc_dropShadow_elmOffset.dy.baseVal=t,n=!0),i.dropShadow_blur=t=o.blur,Ve(e,a,"dropShadow_blur",t)&&(e.efc_dropShadow_elmBlur.setStdDeviation(t,t),n=!0),n&&Be(e,{}),i.dropShadow_color=t=o.color,Ve(e,a,"dropShadow_color",t)&&(e.efc_dropShadow_styleFlood.floodColor=t),i.dropShadow_opacity=t=o.opacity,Ve(e,a,"dropShadow_opacity",t)&&(e.efc_dropShadow_styleFlood.floodOpacity=t)},adjustEdge:function(e,t){var n,i=e.curStats,a=e.aplStats;null!=i.dropShadow_dx&&(n=3*i.dropShadow_blur,(n={x1:t.x1-n+i.dropShadow_dx,y1:t.y1-n+i.dropShadow_dy,x2:t.x2+n+i.dropShadow_dx,y2:t.y2+n+i.dropShadow_dy}).x1<t.x1&&(t.x1=n.x1),n.y1<t.y1&&(t.y1=n.y1),n.x2>t.x2&&(t.x2=n.x2),n.y2>t.y2&&(t.y2=n.y2),["x","y"].forEach((function(n){var o,s="dropShadow_"+n;i[s]=o=t[n+"1"],Ve(e,a,s,o)&&(e.efc_dropShadow_elmFilter[n].baseVal.value=o)})))}}},Object.keys(t).forEach((function(e){var n=t[e],i=n.stats;i[e+"_enabled"]={iniValue:!1},i[e+"_options"]={hasProps:!0},n.anim&&(i[e+"_animOptions"]={},i[e+"_animId"]={})})),n={none:{defaultAnimOptions:{},init:function(e,t){var i=e.curStats;i.show_animId&&(X.remove(i.show_animId),i.show_animId=null),n.none.start(e,t)},start:function(e,t){n.none.stop(e,!0)},stop:function(e,t,n){var i=e.curStats;return n=null!=n?n:e.aplStats.show_on,i.show_inAnim=!1,t&&We(e,n),n?1:0}},fade:{defaultAnimOptions:{duration:300,timing:"linear"},init:function(e,t){var i=e.curStats,a=e.aplStats;i.show_animId&&X.remove(i.show_animId),i.show_animId=X.add((function(e){return e}),(function(t,i){i?n.fade.stop(e,!0):(e.svg.style.opacity=t+"",G&&(Me(e,e.svg),Ie(e)))}),a.show_animOptions.duration,1,a.show_animOptions.timing,null,!1),n.fade.start(e,t)},start:function(e,t){var n,i=e.curStats;i.show_inAnim&&(n=X.stop(i.show_animId)),We(e,1),i.show_inAnim=!0,X.start(i.show_animId,!e.aplStats.show_on,null!=t?t:n)},stop:function(e,t,n){var i,a=e.curStats;return n=null!=n?n:e.aplStats.show_on,i=a.show_inAnim?X.stop(a.show_animId):n?1:0,a.show_inAnim=!1,t&&(e.svg.style.opacity=n?"":"0",We(e,n)),i}},draw:{defaultAnimOptions:{duration:500,timing:[.58,0,.42,1]},init:function(e,t){var i=e.curStats,a=e.aplStats,o=e.pathList.baseVal,s=xe(o),l=s.segsLen,r=s.lenAll;i.show_animId&&X.remove(i.show_animId),i.show_animId=X.add((function(e){var t,n,i,a=-1;if(0===e)n=[[o[0][0],o[0][0]]];else if(1===e)n=o;else{for(t=r*e,n=[];t>=l[++a];)n.push(o[a]),t-=l[a];t&&(2===(i=o[a]).length?n.push([i[0],ye(i[0],i[1],t/l[a])]):(e=Se(i[0],i[1],i[2],i[3],ve(i[0],i[1],i[2],i[3],t)),n.push([i[0],e.fromP1,e.fromP2,e])))}return n}),(function(t,i){i?n.draw.stop(e,!0):(e.pathList.animVal=t,Be(e,{path:!0}))}),a.show_animOptions.duration,1,a.show_animOptions.timing,null,!1),n.draw.start(e,t)},start:function(e,t){var i,a=e.curStats;a.show_inAnim&&(i=X.stop(a.show_animId)),We(e,1),a.show_inAnim=!0,ke(e,"apl_position",n.draw.update),X.start(a.show_animId,!e.aplStats.show_on,null!=t?t:i)},stop:function(e,t,n){var i,a=e.curStats;return n=null!=n?n:e.aplStats.show_on,i=a.show_inAnim?X.stop(a.show_animId):n?1:0,a.show_inAnim=!1,t&&(e.pathList.animVal=n?null:[[e.pathList.baseVal[0][0],e.pathList.baseVal[0][0]]],Be(e,{path:!0}),We(e,n)),i},update:function(e){we(e,"apl_position",n.draw.update),e.curStats.show_inAnim?n.draw.init(e,n.draw.stop(e)):e.aplStats.show_animOptions={}}}},[["start","anchorSE",0],["end","anchorSE",1],["color","lineColor"],["size","lineSize"],["startSocketGravity","socketGravitySE",0],["endSocketGravity","socketGravitySE",1],["startPlugColor","plugColorSE",0],["endPlugColor","plugColorSE",1],["startPlugSize","plugSizeSE",0],["endPlugSize","plugSizeSE",1],["outline","lineOutlineEnabled"],["outlineColor","lineOutlineColor"],["outlineSize","lineOutlineSize"],["startPlugOutline","plugOutlineEnabledSE",0],["endPlugOutline","plugOutlineEnabledSE",1],["startPlugOutlineColor","plugOutlineColorSE",0],["endPlugOutlineColor","plugOutlineColorSE",1],["startPlugOutlineSize","plugOutlineSizeSE",0],["endPlugOutlineSize","plugOutlineSizeSE",1]].forEach((function(e){var t=e[0],n=e[1],i=e[2];Object.defineProperty(ze.prototype,t,{get:function(){var e=null!=i?te[this._id].options[n][i]:n?te[this._id].options[n]:te[this._id].options[t];return null==e?N:ue(e)},set:He(t),enumerable:!0})})),[["path",M],["startSocket",O,"socketSE",0],["endSocket",O,"socketSE",1],["startPlug",A,"plugSE",0],["endPlug",A,"plugSE",1]].forEach((function(e){var t=e[0],n=e[1],i=e[2],a=e[3];Object.defineProperty(ze.prototype,t,{get:function(){var e,o=null!=a?te[this._id].options[i][a]:i?te[this._id].options[i]:te[this._id].options[t];return o?Object.keys(n).some((function(t){return n[t]===o&&(e=t,!0)}))?e:new Error("It's broken"):N},set:He(t),enumerable:!0})})),Object.keys(t).forEach((function(e){var n=t[e];Object.defineProperty(ze.prototype,e,{get:function(){var t,i,a=te[this._id].options[e];return Z(a)?(t=a,i=n.optionsConf.reduce((function(e,n){var i,a=n[0],o=n[1],s=n[2],l=n[3],r=null!=(n=n[4])?t[l][n]:l?t[l]:t[o];return e[o]="id"===a?r?Object.keys(s).some((function(e){return s[e]===r&&(i=e,!0)}))?i:new Error("It's broken"):N:null==r?N:ue(r),e}),{}),n.anim&&(i.animation=ue(t.animation)),i):a},set:He(e),enumerable:!0})})),["startLabel","endLabel","middleLabel"].forEach((function(e,t){Object.defineProperty(ze.prototype,e,{get:function(){var e=te[this._id],n=e.options;return n.labelSEM[t]&&!e.optionIsAttach.labelSEM[t]?ie[n.labelSEM[t]._id].text:n.labelSEM[t]||""},set:He(e),enumerable:!0})})),ze.prototype.setOptions=function(e){return je(te[this._id],e),this},ze.prototype.position=function(){return Be(te[this._id],{position:!0}),this},ze.prototype.remove=function(){var e=te[this._id],n=e.curStats;Object.keys(t).forEach((function(e){n[e+="_animId"]&&X.remove(n[e])})),n.show_animId&&X.remove(n.show_animId),e.attachments.slice().forEach((function(t){Ge(e,t)})),e.baseWindow&&e.svg&&e.baseWindow.document.body.removeChild(e.svg),delete te[this._id]},ze.prototype.show=function(e,t){return Fe(te[this._id],!0,e,t),this},ze.prototype.hide=function(e,t){return Fe(te[this._id],!1,e,t),this},s=function(e){e&&ie[e._id]&&(e.boundTargets.slice().forEach((function(t){Ge(t.props,e,!0)})),e.conf.remove&&e.conf.remove(e),delete ie[e._id])},Ue.prototype.remove=function(){var e=this,t=ie[e._id];t&&(t.boundTargets.slice().forEach((function(e){t.conf.removeOption(t,e)})),Oe((function(){var t=ie[e._id];t&&(console.error("LeaderLineAttachment was not removed by removeOption"),s(t))})))},a=Ue,window.LeaderLineAttachment=a,o=function(e,t){return e instanceof a&&(!(e.isRemoved||t&&ie[e._id].conf.type!==t)||null)},i={pointAnchor:{type:"anchor",argOptions:[{optionName:"element",type:pe}],init:function(e,t){return e.element=i.pointAnchor.checkElement(t.element),e.x=i.pointAnchor.parsePercent(t.x,!0)||[.5,!0],e.y=i.pointAnchor.parsePercent(t.y,!0)||[.5,!0],!0},removeOption:function(e,t){var n=t.props,o={},s=e.element;s===(e=n.options.anchorSE["start"===t.optionName?1:0])&&(s=e===document.body?new a(i.pointAnchor,[s]):document.body),o[t.optionName]=s,je(n,o)},getBBoxNest:function(e,t){var n=fe(e.element,t.baseWindow),i=n.width;return t=n.height,n.width=n.height=0,n.left=n.right=n.left+e.x[0]*(e.x[1]?i:1),n.top=n.bottom=n.top+e.y[0]*(e.y[1]?t:1),n},parsePercent:function(e,t){var n,i,a=!1;return q(e)?i=e:"string"==typeof e&&(n=F.exec(e))&&n[2]&&(a=0!=(i=parseFloat(n[1])/100)),null!=i&&(t||0<=i)?[i,a]:null},checkElement:function(e){if(null==e)e=document.body;else if(!pe(e))throw new Error("`element` must be Element");return e}},areaAnchor:{type:"anchor",argOptions:[{optionName:"element",type:pe},{optionName:"shape",type:"string"}],stats:{color:{},strokeWidth:{},elementWidth:{},elementHeight:{},elementLeft:{},elementTop:{},pathListRel:{},bBoxRel:{},pathData:{},viewBoxBBox:{hasProps:!0},dashLen:{},dashGap:{}},init:function(e,t){var n,a=[];return e.element=i.pointAnchor.checkElement(t.element),"string"==typeof t.color&&(e.color=t.color.trim()),"string"==typeof t.fillColor&&(e.fill=t.fillColor.trim()),q(t.size)&&0<=t.size&&(e.size=t.size),t.dash&&(e.dash=!0,q(t.dash.len)&&0<t.dash.len&&(e.dashLen=t.dash.len),q(t.dash.gap)&&0<t.dash.gap&&(e.dashGap=t.dash.gap)),"circle"===t.shape?e.shape=t.shape:"polygon"===t.shape&&Array.isArray(t.points)&&3<=t.points.length&&t.points.every((function(t){var n={};return!(!(n.x=i.pointAnchor.parsePercent(t[0],!0))||!(n.y=i.pointAnchor.parsePercent(t[1],!0))||(a.push(n),(n.x[1]||n.y[1])&&(e.hasRatio=!0),0))}))?(e.shape=t.shape,e.points=a):(e.shape="rect",e.radius=q(t.radius)&&0<=t.radius?t.radius:0),"rect"!==e.shape&&"circle"!==e.shape||(e.x=i.pointAnchor.parsePercent(t.x,!0)||[-.05,!0],e.y=i.pointAnchor.parsePercent(t.y,!0)||[-.05,!0],e.width=i.pointAnchor.parsePercent(t.width)||[1.1,!0],e.height=i.pointAnchor.parsePercent(t.height)||[1.1,!0],(e.x[1]||e.y[1]||e.width[1]||e.height[1])&&(e.hasRatio=!0)),n=e.element.ownerDocument,e.svg=t=n.createElementNS(D,"svg"),t.className.baseVal=w+"-areaAnchor",t.viewBox.baseVal||t.setAttribute("viewBox","0 0 0 0"),e.path=t.appendChild(n.createElementNS(D,"path")),e.path.style.fill=e.fill||"none",e.isShown=!1,t.style.visibility="hidden",n.body.appendChild(t),Ne(n=n.defaultView),e.bodyOffset=Pe(n),e.updateColor=function(){var t=e.curStats,n=e.aplStats,i=e.boundTargets.length?e.boundTargets[0].props.curStats:null;t.color=i=e.color||(i?i.line_color:Y.lineColor),Ve(e,n,"color",i)&&(e.path.style.stroke=i)},e.updateShow=function(){We(e,e.boundTargets.some((function(e){return!0===e.props.isShown})))},!0},bind:function(e,t){return t=t.props,e.color||ke(t,"cur_line_color",e.updateColor),ke(t,"svgShow",e.updateShow),Oe((function(){e.updateColor(),e.updateShow()})),!0},unbind:function(e,t){t=t.props,e.color||we(t,"cur_line_color",e.updateColor),we(t,"svgShow",e.updateShow),1<e.boundTargets.length&&Oe((function(){e.updateColor(),e.updateShow(),i.areaAnchor.update(e)&&e.boundTargets.forEach((function(e){Be(e.props,{position:!0})}))}))},removeOption:function(e,t){i.pointAnchor.removeOption(e,t)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach((function(t){i.areaAnchor.unbind(e,t)}))),e.svg.parentNode.removeChild(e.svg)},getStrokeWidth:function(e,t){return i.areaAnchor.update(e)&&1<e.boundTargets.length&&Oe((function(){e.boundTargets.forEach((function(e){e.props!==t&&Be(e.props,{position:!0})}))})),e.curStats.strokeWidth},getPathData:function(e,t){var n=fe(e.element,t.baseWindow);return be(e.curStats.pathListRel,(function(e){e.x+=n.left,e.y+=n.top}))},getBBoxNest:function(e,t){return t=fe(e.element,t.baseWindow),{left:(e=e.curStats.bBoxRel).left+t.left,top:e.top+t.top,right:e.right+t.left,bottom:e.bottom+t.top,width:e.width,height:e.height}},update:function(e){var t,n,i,a,o,s,l,r,u,h,p,c,d,f,m,y,g=e.curStats,S=e.aplStats,_=e.boundTargets.length?e.boundTargets[0].props.curStats:null,v={};if(v.strokeWidth=Ve(e,g,"strokeWidth",null!=e.size?e.size:_?_.line_strokeWidth:Y.lineSize),t=ce(e.element),v.elementWidth=Ve(e,g,"elementWidth",t.width),v.elementHeight=Ve(e,g,"elementHeight",t.height),v.elementLeft=Ve(e,g,"elementLeft",t.left),v.elementTop=Ve(e,g,"elementTop",t.top),v.strokeWidth||e.hasRatio&&(v.elementWidth||v.elementHeight)){switch(e.shape){case"rect":(c={left:e.x[0]*(e.x[1]?t.width:1),top:e.y[0]*(e.y[1]?t.height:1),width:e.width[0]*(e.width[1]?t.width:1),height:e.height[0]*(e.height[1]?t.height:1)}).right=c.left+c.width,c.bottom=c.top+c.height,p=g.strokeWidth/2,r=(l=Math.min(c.width,c.height))?l/2*Math.SQRT2+p:0,h=(l=e.radius?e.radius<=r?e.radius:r:0)?(r=(l-p)/Math.SQRT2,h=[{x:c.left-(u=l-r),y:c.top+r},{x:c.left+r,y:c.top-u},{x:c.right-r,y:c.top-u},{x:c.right+u,y:c.top+r},{x:c.right+u,y:c.bottom-r},{x:c.right-r,y:c.bottom+u},{x:c.left+r,y:c.bottom+u},{x:c.left-u,y:c.bottom-r}],g.pathListRel=[[h[0],{x:h[0].x,y:h[0].y-(p=l*B)},{x:h[1].x-p,y:h[1].y},h[1]]],h[1].x!==h[2].x&&g.pathListRel.push([h[1],h[2]]),g.pathListRel.push([h[2],{x:h[2].x+p,y:h[2].y},{x:h[3].x,y:h[3].y-p},h[3]]),h[3].y!==h[4].y&&g.pathListRel.push([h[3],h[4]]),g.pathListRel.push([h[4],{x:h[4].x,y:h[4].y+p},{x:h[5].x+p,y:h[5].y},h[5]]),h[5].x!==h[6].x&&g.pathListRel.push([h[5],h[6]]),g.pathListRel.push([h[6],{x:h[6].x-p,y:h[6].y},{x:h[7].x,y:h[7].y+p},h[7]]),h[7].y!==h[0].y&&g.pathListRel.push([h[7],h[0]]),g.pathListRel.push([]),u=l-r+g.strokeWidth/2,[{x:c.left-u,y:c.top-u},{x:c.right+u,y:c.bottom+u}]):(u=g.strokeWidth/2,h=[{x:c.left-u,y:c.top-u},{x:c.right+u,y:c.bottom+u}],g.pathListRel=[[h[0],{x:h[1].x,y:h[0].y}],[{x:h[1].x,y:h[0].y},h[1]],[h[1],{x:h[0].x,y:h[1].y}],[]],[{x:c.left-g.strokeWidth,y:c.top-g.strokeWidth},{x:c.right+g.strokeWidth,y:c.bottom+g.strokeWidth}]),g.bBoxRel={left:h[0].x,top:h[0].y,right:h[1].x,bottom:h[1].y,width:h[1].x-h[0].x,height:h[1].y-h[0].y};break;case"circle":(s={left:e.x[0]*(e.x[1]?t.width:1),top:e.y[0]*(e.y[1]?t.height:1),width:e.width[0]*(e.width[1]?t.width:1),height:e.height[0]*(e.height[1]?t.height:1)}).width||s.height||(s.width=s.height=10),s.width||(s.width=s.height),s.height||(s.height=s.width),s.right=s.left+s.width,s.bottom=s.top+s.height,p=s.left+s.width/2,l=s.top+s.height/2,o=g.strokeWidth/2,r=s.width/2,u=s.height/2,c=r*Math.SQRT2+o,h=u*Math.SQRT2+o,g.pathListRel=[[(o=[{x:p-c,y:l},{x:p,y:l-h},{x:p+c,y:l},{x:p,y:l+h}])[0],{x:o[0].x,y:o[0].y-(p=h*B)},{x:o[1].x-(l=c*B),y:o[1].y},o[1]],[o[1],{x:o[1].x+l,y:o[1].y},{x:o[2].x,y:o[2].y-p},o[2]],[o[2],{x:o[2].x,y:o[2].y+p},{x:o[3].x+l,y:o[3].y},o[3]],[o[3],{x:o[3].x-l,y:o[3].y},{x:o[0].x,y:o[0].y+p},o[0]],[]],r=c-r+g.strokeWidth/2,u=h-u+g.strokeWidth/2,o=[{x:s.left-r,y:s.top-u},{x:s.right+r,y:s.bottom+u}],g.bBoxRel={left:o[0].x,top:o[0].y,right:o[1].x,bottom:o[1].y,width:o[1].x-o[0].x,height:o[1].y-o[0].y};break;case"polygon":e.points.forEach((function(e){var n=e.x[0]*(e.x[1]?t.width:1);e=e.y[0]*(e.y[1]?t.height:1),i?(n<i.left&&(i.left=n),n>i.right&&(i.right=n),e<i.top&&(i.top=e),e>i.bottom&&(i.bottom=e)):i={left:n,right:n,top:e,bottom:e},a?g.pathListRel.push([a,{x:n,y:e}]):g.pathListRel=[],a={x:n,y:e}})),g.pathListRel.push([]),o=g.strokeWidth/2,o=[{x:i.left-o,y:i.top-o},{x:i.right+o,y:i.bottom+o}],g.bBoxRel={left:o[0].x,top:o[0].y,right:o[1].x,bottom:o[1].y,width:o[1].x-o[0].x,height:o[1].y-o[0].y}}v.pathListRel=v.bBoxRel=!0}return(v.pathListRel||v.elementLeft||v.elementTop)&&(g.pathData=be(g.pathListRel,(function(e){e.x+=t.left,e.y+=t.top}))),Ve(e,S,"strokeWidth",n=g.strokeWidth)&&(e.path.style.strokeWidth=n+"px"),Ee(n=g.pathData,S.pathData)&&(e.path.setPathData(n),S.pathData=n,v.pathData=!0),e.dash&&(!v.pathData&&(!v.strokeWidth||e.dashLen&&e.dashGap)||(g.dashLen=e.dashLen||2*g.strokeWidth,g.dashGap=e.dashGap||g.strokeWidth),v.dash=Ve(e,S,"dashLen",g.dashLen)||v.dash,v.dash=Ve(e,S,"dashGap",g.dashGap)||v.dash,v.dash&&(e.path.style.strokeDasharray=S.dashLen+","+S.dashGap)),d=g.viewBoxBBox,f=S.viewBoxBBox,m=e.svg.viewBox.baseVal,y=e.svg.style,d.x=g.bBoxRel.left+t.left,d.y=g.bBoxRel.top+t.top,d.width=g.bBoxRel.width,d.height=g.bBoxRel.height,["x","y","width","height"].forEach((function(t){(n=d[t])!==f[t]&&(m[t]=f[t]=n,y[T[t]]=n+("x"===t||"y"===t?e.bodyOffset[t]:0)+"px")})),v.strokeWidth||v.pathListRel||v.bBoxRel}},mouseHoverAnchor:{type:"anchor",argOptions:[{optionName:"element",type:pe},{optionName:"showEffectName",type:"string"}],style:{backgroundImage:"url('data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cG9seWdvbiBwb2ludHM9IjI0LDAgMCw4IDgsMTEgMCwxOSA1LDI0IDEzLDE2IDE2LDI0IiBmaWxsPSJjb3JhbCIvPjwvc3ZnPg==')",backgroundSize:"",backgroundRepeat:"no-repeat",backgroundColor:"#f8f881",cursor:"default"},hoverStyle:{backgroundImage:"none",backgroundColor:"#fadf8f"},padding:{top:1,right:15,bottom:1,left:2},minHeight:15,backgroundPosition:{right:2,top:2},backgroundSize:{width:12,height:12},dirKeys:[["top","Top"],["right","Right"],["bottom","Bottom"],["left","Left"]],init:function(e,t){var a,o,s,l,r,u,h,p,c,d=i.mouseHoverAnchor,f={};if(e.element=i.pointAnchor.checkElement(t.element),!((p=(h=e.element).ownerDocument)&&(c=p.defaultView)&&c.HTMLElement&&h instanceof c.HTMLElement))throw new Error("`element` must be HTML element");return d.style.backgroundSize=d.backgroundSize.width+"px "+d.backgroundSize.height+"px",["style","hoverStyle"].forEach((function(t){var n=d[t];e[t]=Object.keys(n).reduce((function(e,t){return e[t]=n[t],e}),{})})),"inline"===(a=e.element.ownerDocument.defaultView.getComputedStyle(e.element,"")).display?e.style.display="inline-block":"none"===a.display&&(e.style.display="block"),i.mouseHoverAnchor.dirKeys.forEach((function(t){var n=t[0];t="padding"+t[1],parseFloat(a[t])<d.padding[n]&&(e.style[t]=d.padding[n]+"px")})),e.style.display&&(s=e.element.style.display,e.element.style.display=e.style.display),i.mouseHoverAnchor.dirKeys.forEach((function(t){t="padding"+t[1],e.style[t]&&(f[t]=e.element.style[t],e.element.style[t]=e.style[t])})),(h=e.element.getBoundingClientRect()).height<d.minHeight&&(G?(c=d.minHeight,"content-box"===a.boxSizing?c-=parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth)+parseFloat(a.paddingTop)+parseFloat(a.paddingBottom):"padding-box"===a.boxSizing&&(c-=parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth)),e.style.height=c+"px"):e.style.height=parseFloat(a.height)+(d.minHeight-h.height)+"px"),e.style.backgroundPosition=H?h.width-d.backgroundSize.width-d.backgroundPosition.right+"px "+d.backgroundPosition.top+"px":"right "+d.backgroundPosition.right+"px top "+d.backgroundPosition.top+"px",e.style.display&&(e.element.style.display=s),i.mouseHoverAnchor.dirKeys.forEach((function(t){t="padding"+t[1],e.style[t]&&(e.element.style[t]=f[t])})),["style","hoverStyle"].forEach((function(n){var i=e[n],a=t[n];Z(a)&&Object.keys(a).forEach((function(e){"string"==typeof a[e]||q(a[e])?i[e]=a[e]:null==a[e]&&delete i[e]}))})),"function"==typeof t.onSwitch&&(u=t.onSwitch),t.showEffectName&&n[t.showEffectName]&&(e.showEffectName=l=t.showEffectName),r=t.animOptions,e.elmStyle=o=e.element.style,e.mouseenter=function(t){e.hoverStyleSave=d.getStyles(o,Object.keys(e.hoverStyle)),d.setStyles(o,e.hoverStyle),e.boundTargets.forEach((function(e){Fe(e.props,!0,l,r)})),u&&u(t)},e.mouseleave=function(t){d.setStyles(o,e.hoverStyleSave),e.boundTargets.forEach((function(e){Fe(e.props,!1,l,r)})),u&&u(t)},!0},bind:function(e,t){var n,a,o,s,l;return t.props.svg?i.mouseHoverAnchor.llShow(t.props,!1,e.showEffectName):Oe((function(){i.mouseHoverAnchor.llShow(t.props,!1,e.showEffectName)})),e.enabled||(e.styleSave=i.mouseHoverAnchor.getStyles(e.elmStyle,Object.keys(e.style)),i.mouseHoverAnchor.setStyles(e.elmStyle,e.style),e.removeEventListener=(n=e.element,a=e.mouseenter,o=e.mouseleave,"onmouseenter"in n&&"onmouseleave"in n?(n.addEventListener("mouseenter",a,!1),n.addEventListener("mouseleave",o,!1),function(){n.removeEventListener("mouseenter",a,!1),n.removeEventListener("mouseleave",o,!1)}):(console.warn("mouseenter and mouseleave events polyfill is enabled."),n.addEventListener("mouseover",s=function(e){e.relatedTarget&&(e.relatedTarget===this||this.compareDocumentPosition(e.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||a.apply(this,arguments)}),n.addEventListener("mouseout",l=function(e){e.relatedTarget&&(e.relatedTarget===this||this.compareDocumentPosition(e.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||o.apply(this,arguments)}),function(){n.removeEventListener("mouseover",s,!1),n.removeEventListener("mouseout",l,!1)})),e.enabled=!0),!0},unbind:function(e,t){e.enabled&&e.boundTargets.length<=1&&(e.removeEventListener(),i.mouseHoverAnchor.setStyles(e.elmStyle,e.styleSave),e.enabled=!1),i.mouseHoverAnchor.llShow(t.props,!0,e.showEffectName)},removeOption:function(e,t){i.pointAnchor.removeOption(e,t)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach((function(t){i.mouseHoverAnchor.unbind(e,t)})))},getBBoxNest:function(e,t){return fe(e.element,t.baseWindow)},llShow:function(e,t,i){n[i||e.curStats.show_effect].stop(e,!0,t),e.aplStats.show_on=t},getStyles:function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},setStyles:function(e,t){Object.keys(t).forEach((function(n){e[n]=t[n]}))}},captionLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},x:{},y:{}},textStyleProps:["fontFamily","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","kerning","letterSpacing","wordSpacing","textDecoration"],init:function(e,t){return"string"==typeof t.text&&(e.text=t.text.trim()),!!e.text&&("string"==typeof t.color&&(e.color=t.color.trim()),e.outlineColor="string"==typeof t.outlineColor?t.outlineColor.trim():"#fff",Array.isArray(t.offset)&&q(t.offset[0])&&q(t.offset[1])&&(e.offset={x:t.offset[0],y:t.offset[1]}),q(t.lineOffset)&&(e.lineOffset=t.lineOffset),i.captionLabel.textStyleProps.forEach((function(n){null!=t[n]&&(e[n]=t[n])})),e.updateColor=function(t){i.captionLabel.updateColor(e,t)},e.updateSocketXY=function(t){var n,i=e.curStats,a=e.aplStats,o=t.curStats,s=o.position_socketXYSE[e.socketIndex];null!=s.x&&(e.offset?(i.x=s.x+e.offset.x,i.y=s.y+e.offset.y):(n=e.height/2,t=Math.max(o.attach_plugSideLenSE[e.socketIndex]||0,o.line_strokeWidth/2),o=o.position_socketXYSE[e.socketIndex?0:1],4===s.socketId||2===s.socketId?(i.x=4===s.socketId?s.x-n-e.width:s.x+n,i.y=o.y<s.y?s.y+t+n:s.y-t-n-e.height):(i.x=o.x<s.x?s.x+t+n:s.x-t-n-e.width,i.y=1===s.socketId?s.y-n-e.height:s.y+n)),Ve(e,a,"x",n=i.x)&&(e.elmPosition.x.baseVal.getItem(0).value=n),Ve(e,a,"y",n=i.y)&&(e.elmPosition.y.baseVal.getItem(0).value=n+e.height))},e.updatePath=function(t){var n=e.curStats,a=e.aplStats;(t=t.pathList.animVal||t.pathList.baseVal)&&(t=i.captionLabel.getMidPoint(t,e.lineOffset),n.x=t.x-e.width/2,n.y=t.y-e.height/2,Ve(e,a,"x",t=n.x)&&(e.elmPosition.x.baseVal.getItem(0).value=t),Ve(e,a,"y",t=n.y)&&(e.elmPosition.y.baseVal.getItem(0).value=t+e.height))},e.updateShow=function(t){i.captionLabel.updateShow(e,t)},H&&(e.adjustEdge=function(t,n){var a=e.curStats;null!=a.x&&i.captionLabel.adjustEdge(n,{x:a.x,y:a.y,width:e.width,height:e.height},e.strokeWidth/2)}),!0)},updateColor:function(e,t){var n=e.curStats,i=e.aplStats;t=t.curStats,n.color=t=e.color||t.line_color,Ve(e,i,"color",t)&&(e.styleFill.fill=t)},updateShow:function(e,t){(t=!0===t.isShown)!==e.isShown&&(e.styleShow.visibility=t?"":"hidden",e.isShown=t)},adjustEdge:function(e,t,n){(n={x1:t.x-n,y1:t.y-n,x2:t.x+t.width+n,y2:t.y+t.height+n}).x1<e.x1&&(e.x1=n.x1),n.y1<e.y1&&(e.y1=n.y1),n.x2>e.x2&&(e.x2=n.x2),n.y2>e.y2&&(e.y2=n.y2)},newText:function(e,t,n,i,a){var o,s,l=t.createElementNS(D,"text");return l.textContent=e,[l.x,l.y].forEach((function(e){var t=n.createSVGLength();t.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),e.baseVal.initialize(t)})),"boolean"!=typeof u&&(u="paintOrder"in l.style),a&&!u?(o=t.createElementNS(D,"defs"),l.id=i,o.appendChild(l),(s=(e=t.createElementNS(D,"g")).appendChild(t.createElementNS(D,"use"))).href.baseVal="#"+i,(t=e.appendChild(t.createElementNS(D,"use"))).href.baseVal="#"+i,(s=s.style).strokeLinejoin="round",{elmPosition:l,styleText:l.style,styleFill:t.style,styleStroke:s,styleShow:e.style,elmsAppend:[o,e]}):(s=l.style,a&&(s.strokeLinejoin="round",s.paintOrder="stroke"),{elmPosition:l,styleText:s,styleFill:s,styleStroke:a?s:null,styleShow:s,elmsAppend:[l]})},getMidPoint:function(e,t){var n,i,a,o=(a=xe(e)).segsLen,s=-1,l=(a=a.lenAll)/2+(t||0);if(l<=0)return 2===(n=e[0]).length?ye(n[0],n[1],0):Se(n[0],n[1],n[2],n[3],0);if(a<=l)return 2===(n=e[e.length-1]).length?ye(n[0],n[1],1):Se(n[0],n[1],n[2],n[3],1);for(i=[];l>o[++s];)i.push(e[s]),l-=o[s];return 2===(n=e[s]).length?ye(n[0],n[1],l/o[s]):Se(n[0],n[1],n[2],n[3],ve(n[0],n[1],n[2],n[3],l))},initSvg:function(e,t){var n,a,o=i.captionLabel.newText(e.text,t.baseWindow.document,t.svg,w+"-captionLabel-"+e._id,e.outlineColor);["elmPosition","styleFill","styleShow","elmsAppend"].forEach((function(t){e[t]=o[t]})),e.isShown=!1,e.styleShow.visibility="hidden",i.captionLabel.textStyleProps.forEach((function(t){null!=e[t]&&(o.styleText[t]=e[t])})),o.elmsAppend.forEach((function(e){t.svg.appendChild(e)})),n=o.elmPosition.getBBox(),e.width=n.width,e.height=n.height,e.outlineColor&&(a=n.height/9,o.styleStroke.strokeWidth=(a=10<a?10:a<2?2:a)+"px",o.styleStroke.stroke=e.outlineColor),e.strokeWidth=a||0,Ae(e.aplStats,i.captionLabel.stats),e.updateColor(t),e.refSocketXY?e.updateSocketXY(t):e.updatePath(t),H&&Be(t,{}),e.updateShow(t)},bind:function(e,t){var n=t.props;return e.color||ke(n,"cur_line_color",e.updateColor),(e.refSocketXY="startLabel"===t.optionName||"endLabel"===t.optionName)?(e.socketIndex="startLabel"===t.optionName?0:1,ke(n,"apl_position",e.updateSocketXY),e.offset||(ke(n,"cur_attach_plugSideLenSE",e.updateSocketXY),ke(n,"cur_line_strokeWidth",e.updateSocketXY))):ke(n,"apl_path",e.updatePath),ke(n,"svgShow",e.updateShow),H&&ke(n,"new_edge4viewBox",e.adjustEdge),i.captionLabel.initSvg(e,n),!0},unbind:function(e,t){var n=t.props;e.elmsAppend&&(e.elmsAppend.forEach((function(e){n.svg.removeChild(e)})),e.elmPosition=e.styleFill=e.styleShow=e.elmsAppend=null),Ae(e.curStats,i.captionLabel.stats),Ae(e.aplStats,i.captionLabel.stats),e.color||we(n,"cur_line_color",e.updateColor),e.refSocketXY?(we(n,"apl_position",e.updateSocketXY),e.offset||(we(n,"cur_attach_plugSideLenSE",e.updateSocketXY),we(n,"cur_line_strokeWidth",e.updateSocketXY))):we(n,"apl_path",e.updatePath),we(n,"svgShow",e.updateShow),H&&(we(n,"new_edge4viewBox",e.adjustEdge),Be(n,{}))},removeOption:function(e,t){var n=t.props,i={};i[t.optionName]="",je(n,i)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach((function(t){i.captionLabel.unbind(e,t)})))}},pathLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},startOffset:{},pathData:{}},init:function(e,t){return"string"==typeof t.text&&(e.text=t.text.trim()),!!e.text&&("string"==typeof t.color&&(e.color=t.color.trim()),e.outlineColor="string"==typeof t.outlineColor?t.outlineColor.trim():"#fff",q(t.lineOffset)&&(e.lineOffset=t.lineOffset),i.captionLabel.textStyleProps.forEach((function(n){null!=t[n]&&(e[n]=t[n])})),e.updateColor=function(t){i.captionLabel.updateColor(e,t)},e.updatePath=function(t){var n=e.curStats,a=e.aplStats,o=t.curStats,s=t.pathList.animVal||t.pathList.baseVal;s&&(n.pathData=o=i.pathLabel.getOffsetPathData(s,o.line_strokeWidth/2+e.strokeWidth/2+e.height/4,1.25*e.height),Ee(o,a.pathData)&&(e.elmPath.setPathData(o),a.pathData=o,e.bBox=e.elmPosition.getBBox(),e.updateStartOffset(t)))},e.updateStartOffset=function(t){var n,i,a=e.curStats,o=e.aplStats,s=t.curStats;a.pathData&&(2===e.semIndex&&!e.lineOffset||(i=a.pathData.reduce((function(e,t){var i,a=t.values;switch(t.type){case"M":n={x:a[0],y:a[1]};break;case"L":i={x:a[0],y:a[1]},n&&(e+=me(n,i)),n=i;break;case"C":i={x:a[4],y:a[5]},n&&(e+=_e(n,{x:a[0],y:a[1]},{x:a[2],y:a[3]},i)),n=i}return e}),0),t=0===e.semIndex?0:1===e.semIndex?i:i/2,2!==e.semIndex&&(s=Math.max(s.attach_plugBackLenSE[e.semIndex]||0,s.line_strokeWidth/2)+e.strokeWidth/2+e.height/4,t=(t+=0===e.semIndex?s:-s)<0?0:i<t?i:t),e.lineOffset&&(t=(t+=e.lineOffset)<0?0:i<t?i:t),a.startOffset=t,Ve(e,o,"startOffset",t)&&(e.elmOffset.startOffset.baseVal.value=t)))},e.updateShow=function(t){i.captionLabel.updateShow(e,t)},H&&(e.adjustEdge=function(t,n){e.bBox&&i.captionLabel.adjustEdge(n,e.bBox,e.strokeWidth/2)}),!0)},getOffsetPathData:function(e,t,n){var i,a,o=[];function s(e,t){return Math.abs(e.x-t.x)<3&&Math.abs(e.y-t.y)<3}return e.forEach((function(e){var n,a,l,r,u,h,p,c,d,f,m;2===e.length?(c=e[0],d=e[1],f=t,m=Math.atan2(c.y-d.y,d.x-c.x)+.5*Math.PI,n=[{x:c.x+Math.cos(m)*f,y:c.y+Math.sin(m)*f*-1},{x:d.x+Math.cos(m)*f,y:d.y+Math.sin(m)*f*-1}],i?(l=i.points,0<=(p=Math.atan2(l[1].y-l[0].y,l[0].x-l[1].x)-Math.atan2(e[0].y-e[1].y,e[1].x-e[0].x))&&p<=Math.PI?a={type:"line",points:n,inside:!0}:(u=ge(l[0],l[1],t),r=ge(n[1],n[0],t),h=l[0],c=n[1],m=(d=u).x-h.x,f=d.y-h.y,p=c.x-r.x,d=c.y-r.y,c=(-f*(h.x-r.x)+m*(h.y-r.y))/(-p*f+m*d),d=(p*(h.y-r.y)-d*(h.x-r.x))/(-p*f+m*d),a=(f=0<=c&&c<=1&&0<=d&&d<=1?{x:h.x+d*m,y:h.y+d*f}:null)?{type:"line",points:[l[1]=f,n[1]]}:(l[1]=s(r,u)?r:u,{type:"line",points:[r,n[1]]}),i.len=me(l[0],l[1]))):a={type:"line",points:n},a.len=me(a.points[0],a.points[1]),o.push(i=a)):(o.push({type:"cubic",points:function(e,t,n,i,a){for(var o,s,l=_e(e,t,n,i)/16,r=1/(16<a?a/16*l:l),u=[],h=0;s=(90-(o=Se(e,t,n,i,h)).angle)*(Math.PI/180),u.push({x:o.x+Math.cos(s)*a,y:o.y+Math.sin(s)*a*-1}),!(1<=h);)1<(h+=r)&&(h=1);return u}(e[0],e[1],e[2],e[3],t)}),i=null)})),i=null,o.forEach((function(e){var a;i="line"===e.type?(e.inside&&(i.len>t?((a=i.points)[1]=ge(a[0],a[1],-t),i.len=me(a[0],a[1])):(i.points=null,i.len=0),e.len>t+n?((a=e.points)[0]=ge(a[1],a[0],-(t+n)),e.len=me(a[0],a[1])):(e.points=null,e.len=0)),e):null})),o.reduce((function(e,t){var n=t.points;return n&&(a&&s(n[0],a)||e.push({type:"M",values:[n[0].x,n[0].y]}),"line"===t.type?e.push({type:"L",values:[n[1].x,n[1].y]}):(n.shift(),n.forEach((function(t){e.push({type:"L",values:[t.x,t.y]})}))),a=n[n.length-1]),e}),[])},newText:function(e,t,n,i){var a,o,s,l,r=t.createElementNS(D,"defs"),h=r.appendChild(t.createElementNS(D,"path"));return h.id=a=n+"-path",(s=(o=t.createElementNS(D,"text")).appendChild(t.createElementNS(D,"textPath"))).href.baseVal="#"+a,s.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),s.textContent=e,"boolean"!=typeof u&&(u="paintOrder"in o.style),i&&!u?(o.id=e=n+"-text",r.appendChild(o),(l=(n=t.createElementNS(D,"g")).appendChild(t.createElementNS(D,"use"))).href.baseVal="#"+e,(t=n.appendChild(t.createElementNS(D,"use"))).href.baseVal="#"+e,(l=l.style).strokeLinejoin="round",{elmPosition:o,elmPath:h,elmOffset:s,styleText:o.style,styleFill:t.style,styleStroke:l,styleShow:n.style,elmsAppend:[r,n]}):(l=o.style,i&&(l.strokeLinejoin="round",l.paintOrder="stroke"),{elmPosition:o,elmPath:h,elmOffset:s,styleText:l,styleFill:l,styleStroke:i?l:null,styleShow:l,elmsAppend:[r,o]})},initSvg:function(e,t){var n,a,o,s=i.pathLabel.newText(e.text,t.baseWindow.document,w+"-pathLabel-"+e._id,e.outlineColor);["elmPosition","elmPath","elmOffset","styleFill","styleShow","elmsAppend"].forEach((function(t){e[t]=s[t]})),e.isShown=!1,e.styleShow.visibility="hidden",i.captionLabel.textStyleProps.forEach((function(t){null!=e[t]&&(s.styleText[t]=e[t])})),s.elmsAppend.forEach((function(e){t.svg.appendChild(e)})),s.elmPath.setPathData([{type:"M",values:[0,100]},{type:"h",values:[100]}]),z&&(o=s.elmOffset.href.baseVal,s.elmOffset.href.baseVal=""),n=s.elmPosition.getBBox(),z&&(s.elmOffset.href.baseVal=o),s.styleText.textAnchor=["start","end","middle"][e.semIndex],2!==e.semIndex||e.lineOffset||s.elmOffset.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,50),e.height=n.height,e.outlineColor&&(a=n.height/9,s.styleStroke.strokeWidth=(a=10<a?10:a<2?2:a)+"px",s.styleStroke.stroke=e.outlineColor),e.strokeWidth=a||0,Ae(e.aplStats,i.pathLabel.stats),e.updateColor(t),e.updatePath(t),e.updateStartOffset(t),H&&Be(t,{}),e.updateShow(t)},bind:function(e,t){var n=t.props;return e.color||ke(n,"cur_line_color",e.updateColor),ke(n,"cur_line_strokeWidth",e.updatePath),ke(n,"apl_path",e.updatePath),e.semIndex="startLabel"===t.optionName?0:"endLabel"===t.optionName?1:2,2===e.semIndex&&!e.lineOffset||ke(n,"cur_attach_plugBackLenSE",e.updateStartOffset),ke(n,"svgShow",e.updateShow),H&&ke(n,"new_edge4viewBox",e.adjustEdge),i.pathLabel.initSvg(e,n),!0},unbind:function(e,t){var n=t.props;e.elmsAppend&&(e.elmsAppend.forEach((function(e){n.svg.removeChild(e)})),e.elmPosition=e.elmPath=e.elmOffset=e.styleFill=e.styleShow=e.elmsAppend=null),Ae(e.curStats,i.pathLabel.stats),Ae(e.aplStats,i.pathLabel.stats),e.color||we(n,"cur_line_color",e.updateColor),we(n,"cur_line_strokeWidth",e.updatePath),we(n,"apl_path",e.updatePath),2===e.semIndex&&!e.lineOffset||we(n,"cur_attach_plugBackLenSE",e.updateStartOffset),we(n,"svgShow",e.updateShow),H&&(we(n,"new_edge4viewBox",e.adjustEdge),Be(n,{}))},removeOption:function(e,t){var n=t.props,i={};i[t.optionName]="",je(n,i)},remove:function(e){e.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),e.boundTargets.forEach((function(t){i.pathLabel.unbind(e,t)})))}}},Object.keys(i).forEach((function(e){ze[e]=function(){return new a(i[e],Array.prototype.slice.call(arguments))}})),ze.S=$,ze.Se=te,ze.$e=Be,ze}({});class i{#e;#t=!1;#n=!1;#i;#a;#o=null;#s=null;#l=null;constructor(e,t){const{linkingDuration:n=500,lineOptions:i,onLinkChange:o}=t||{};this.#e=e,this.#l=i,this.#s="function"==typeof o&&o,this.#i=Number(n);const s=this.#t=Boolean(t.linked);this.#n=s;let r=-1;const u=e.length-2;for(this.#a=s?u:0;r<u;){r++;const t=e[r],n=e[r+1],a=new l({...i,start:t,end:n,hidden:!this.#t});Object.defineProperty(t,"outLine",{get:()=>a}),Object.defineProperty(n,"inLine",{get:()=>a})}a.chains.push(this)}link(){if(!this.linked){const e=this.#e,t=()=>{const n=e.length-2;if(this.#a<=n){const n=e[this.#a].outLine;clearTimeout(this.#o),n.show("draw",{duration:this.#i}),this.#n=!0,this.#o=setTimeout((()=>{const e=this.#s;this.#a++,t(),e&&e({startNode:n.start,endNode:n.end,line:n,nodesLinked:!0,hopIndex:this.#a-(this.#t?0:1)})}),this.#i)}else this.#a--,this.#t=!0};t()}}unlink(){if(this.partiallyLinked){const e=this.#e,t=()=>{if(this.#a>-1){const n=e[this.#a].outLine;clearTimeout(this.#o),this.#t=!1,n.hide("draw",{duration:this.#i}),this.#o=setTimeout((()=>{const e=this.#s;this.#a--;const i=this.#a<0;t(),e&&e({startNode:n.start,endNode:n.end,line:n,nodesLinked:!1,hopIndex:this.#a+(i?0:1)})}),this.#i)}else this.#a++,this.#n=!1};t()}}get nodes(){return[...this.#e]}get linked(){return this.#t}get partiallyLinked(){return this.#n}get lines(){const e=[],t=this.#e,{length:n}=t;for(let i=1;i<n;i++)e.push(t[i].inLine);return e}unshiftNode(e){if(!(e instanceof HTMLElement))throw new Error("LinkerLine chain node must be an HTML element");{const t=this.#e;if(t.every((t=>t!==e))){const n=t.at(0);t.unshift(e);const i=new l({...this.#l,start:e,end:n,hidden:!0});if(Object.defineProperty(e,"outLine",{get:()=>i}),Object.defineProperty(n,"inLine",{get:()=>i}),this.#n){this.#a++;const e=this.#s;i.show("draw",{duration:this.#i}),e&&e({startNode:i.start,endNode:i.end,line:i,nodesLinked:!0,hopIndex:0})}}}}pushNode(e){if(!(e instanceof HTMLElement))throw new Error("LinkerLine chain node must be an HTML element");{const t=this.#e;if(t.every((t=>t!==e))){const n=t.at(-1);t.push(e);const i=new l({...this.#l,start:n,end:e,hidden:!0});Object.defineProperty(n,"outLine",{get:()=>i}),Object.defineProperty(e,"inLine",{get:()=>i}),this.#t&&(this.#t=!1,this.#a++,this.link())}}}static getLineChain(e){if(e instanceof l){const{chains:t}=a,n=t.length;let i=0;for(;i<n;){const n=t[i];let a=1;const{nodes:o}=n,s=o.length;for(;a<s;){if(e===o[a].inLine)return n;a++}i++}return null}return null}}const a={chains:[]},o={shapes:["rect","ellipse"]},s=e=>{const{name:t,width:i,height:a,margin:o,rotatable:s=!0}=e,l=Math.max(i,a)/2,r={elmId:`linker-line-${t}`,bBox:{width:i,height:a,top:-a/2,left:-i/2,right:i/2,bottom:a/2},widthR:i/4,heightR:a/4,bCircle:l,sideLen:l,backLen:l,overhead:"number"==typeof o&&o,outlineBase:2,outlineMax:1.5,noRotate:!s,withsvg:e.withsvg};return n.plugs[t]=r,n.names[t]=t,r};class l extends n{#r;#u=!1;constructor(e){e.ee=Math.max(Number(e.minGridLength),1)||40,e.hide=Boolean(e.hidden),super(e),this.#u=e.hide;const{id:t}=this;r.linemap[t]=this,this.#r=n.Se[t].svg,this.#r.style.willChange="left,top";const{parent:i=this.end.parentNode}=e;i instanceof HTMLElement&&("static"===getComputedStyle(i).position&&(i.style.position="relative"),i.appendChild(this.element),this.position(),(e=>{const{element:t}=e,{plugs:i}=n;[e.startPlug,e.endPlug].forEach(((n,a)=>{const o=i[n];if(o?.withsvg){const n=t.querySelector(`[id$=plug-marker-${a}] use[href]`);n&&(n.style.stroke=n.style.fill||e[(a?"end":"start")+"PlugColor"]||e.color||"black",n.style.strokeWidth=(e.size||4)/2)}}))})(this))}set dash(e){u(e),super.dash=e}position(){if(!this.#u&&!this.removed){super.position();const{element:e}=this,t=e.parentNode,{left:n,top:i}=t.getBoundingClientRect(),a=t.scrollLeft-n-window.scrollX,o=t.scrollTop-i-window.scrollY;e.style.transform=`translate(${a}px,${o}px)`}}show(e,t){this.#u=!1,h(t),super.show(e,t),this.position()}hide(e,t){this.#u=!0,h(t),super.hide(e,t)}remove(){this.removed||(delete r.linemap[this.id],document.body.appendChild(this.element),super.remove())}setOptions(e){u(e.dash),super.setOptions(e),this.position()}get standalone(){return!i.getLineChain(this)}get element(){return this.#r}get id(){return this._id}get hidden(){return this.#u}get removed(){return!r.linemap[this.id]}get start(){return super.start}get end(){return super.end}get color(){return super.color}get size(){return super.size}static definePlug(e){!function(e){const{name:t}=e;if(!t)throw new Error("Plug name is required");if(n.names[t])throw new Error(`Plug "${t}" already defined`);{let t=document.body.querySelector(":scope>#linker-line-defs");if(!t){const e=document.body.appendChild(document.createElement("div")),i=document.body.appendChild(document.createElement("div"));new n({start:e,end:i}).remove(),e.remove(),i.remove(),t=document.body.querySelector(":scope>#linker-line-defs")}const i=t.querySelector(":scope>defs");if("shape"in e)((e,t)=>{const{shape:n}=t;if(!o.shapes.includes(n))throw new Error(`shape should be one of: ${o.shapes.toString()}`);{const{width:i=0,height:a=0}=t;t.width=i,t.height=a;const{elmId:o}=s(t),l=document.createElementNS("http://www.w3.org/2000/svg",n);l.id=o,e.appendChild(l),"rect"===n?(l.setAttribute("x",-i/2),l.setAttribute("y",-a/2),l.setAttribute("width",i),l.setAttribute("height",a)):"ellipse"===n&&(l.setAttribute("cx",0),l.setAttribute("cy",0),l.setAttribute("rx",i/2),l.setAttribute("ry",a/2))}})(i,e);else if("svg"in e)((e,t)=>{let{svg:n}=t;if("function"==typeof n&&(n=n("inherit","inherit")),"string"!=typeof n)throw new Error('Property "svg" should be of type string or a function that returns a string');{const i=document.createElementNS("http://www.w3.org/2000/svg","g");i.innerHTML=n,e.appendChild(i);const a=i.querySelector(":scope>svg"),o=t.width||a.width.baseVal.value,l=t.height||a.height.baseVal.value;a.setAttribute("width",o),a.setAttribute("height",l),i.setAttribute("transform",`translate(-${o/2},-${l/2})`);const{elmId:r}=s({...t,width:o,height:l,withsvg:!0});i.id=r}})(i,e);else{if(!("src"in e))throw new Error("invalid custom plug definition object");((e,t)=>{const{src:n}=t;if("string"!=typeof n)throw new Error('Property "src" should be of type string');{const i=document.createElementNS("http://www.w3.org/2000/svg","g"),a=document.createElementNS("http://www.w3.org/2000/svg","image"),{width:o=24,height:l=24}=t;a.setAttribute("width",o),a.setAttribute("height",l),a.setAttribute("href",n),i.appendChild(a),e.appendChild(i),i.setAttribute("transform",`translate(-${o/2},-${l/2})`);const{elmId:r}=s({...t,width:o,height:l,withsvg:!0});i.id=r}})(i,e)}}}(e)}static positionAll(){const{linemap:e}=r;for(const t in e){const n=e[t];n.start.isConnected&&n.end.isConnected&&n.position()}}static removeAll(){const{linemap:e}=r;for(const t in e){const n=e[t];n.standalone&&n.remove()}}static PointAnchor(e,t){return n.pointAnchor(e,t)}static AreaAnchor(e,t){return n.areaAnchor(e,t)}static MouseHoverAnchor(e,t){if(t){const{onToggle:e}=t;e&&(t.onSwitch=e),t.animOptions=h(t.animation)}return n.mouseHoverAnchor(e,t)}static Label(e,t){const{on:i="path"}=t||{};if(t){const{offset:e}=t;"number"==typeof e&&(t.offset=[e,e]),t.outlineColor||(t.outlineColor="transparent")}return(0,n["path"===i?"pathLabel":"captionLabel"])(e,t)}static get plugs(){return Object.keys(n.plugs)}static get names(){return Object.keys(n.names)}static Chain=i;static getLineChain=i.getLineChain}const r={linemap:{}};window.addEventListener("resize",(()=>{requestAnimationFrame(l.positionAll)}),!1);const u=e=>{e&&"object"==typeof e&&(h(e.animation),e.len=e.length,delete e.length)},h=e=>{e&&"object"==typeof e&&(e.timing=e.easing,delete e.easing)};return t.default})()));