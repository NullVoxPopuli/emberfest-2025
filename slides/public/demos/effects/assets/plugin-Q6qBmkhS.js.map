{"version":3,"file":"plugin-Q6qBmkhS.js","sources":["../../node_modules/.pnpm/babel-import-util@3.0.1/node_modules/babel-import-util/src/sanitize.js","../../node_modules/.pnpm/babel-import-util@3.0.1/node_modules/babel-import-util/src/index.js","../../node_modules/.pnpm/babel-plugin-ember-template-compilation@2.4.1/node_modules/babel-plugin-ember-template-compilation/src/hbs-utils.js","../../node_modules/.pnpm/babel-plugin-ember-template-compilation@2.4.1/node_modules/babel-plugin-ember-template-compilation/src/read-only-array.js","../../node_modules/.pnpm/babel-plugin-ember-template-compilation@2.4.1/node_modules/babel-plugin-ember-template-compilation/src/scope-locals.js","../../node_modules/.pnpm/babel-plugin-ember-template-compilation@2.4.1/node_modules/babel-plugin-ember-template-compilation/src/expression-parser.js","../../node_modules/.pnpm/babel-plugin-ember-template-compilation@2.4.1/node_modules/babel-plugin-ember-template-compilation/src/js-utils.js","../../node_modules/.pnpm/babel-plugin-ember-template-compilation@2.4.1/node_modules/babel-plugin-ember-template-compilation/src/plugin.js"],"sourcesContent":["\"use strict\";\n// make a name into a valid javascript identifier, as pleasantly as possible.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sanitize = void 0;\nfunction sanitize(identifier) {\n    // first we opportunistically do camelization when an illegal character is not\n    // the first character and is followed by a lowercase letter, in an effort to\n    // aid readability of the output.\n    let cleaned = identifier.replace(new RegExp(`(?<!^)(?:${illegalChar.source})([a-z])`, 'g'), (_m, letter) => letter.toUpperCase());\n    // then we unliterally strip all remaining illegal characters.\n    cleaned = cleaned.replace(new RegExp(illegalChar.source, 'g'), '');\n    return cleaned;\n}\nexports.sanitize = sanitize;\nconst illegalChar = /^[^a-zA-Z_$]|(?<=.)[^a-zA-Z_$0-9]/;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2FuaXRpemUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzYW5pdGl6ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsNkVBQTZFOzs7QUFFN0UsU0FBZ0IsUUFBUSxDQUFDLFVBQWtCO0lBQ3pDLDhFQUE4RTtJQUM5RSw2RUFBNkU7SUFDN0UsaUNBQWlDO0lBQ2pDLElBQUksT0FBTyxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQzlCLElBQUksTUFBTSxDQUFDLFlBQVksV0FBVyxDQUFDLE1BQU0sVUFBVSxFQUFFLEdBQUcsQ0FBQyxFQUN6RCxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FDckMsQ0FBQztJQUNGLDhEQUE4RDtJQUM5RCxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ25FLE9BQU8sT0FBTyxDQUFDO0FBQ2pCLENBQUM7QUFYRCw0QkFXQztBQUVELE1BQU0sV0FBVyxHQUFHLG1DQUFtQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbWFrZSBhIG5hbWUgaW50byBhIHZhbGlkIGphdmFzY3JpcHQgaWRlbnRpZmllciwgYXMgcGxlYXNhbnRseSBhcyBwb3NzaWJsZS5cblxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplKGlkZW50aWZpZXI6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIGZpcnN0IHdlIG9wcG9ydHVuaXN0aWNhbGx5IGRvIGNhbWVsaXphdGlvbiB3aGVuIGFuIGlsbGVnYWwgY2hhcmFjdGVyIGlzIG5vdFxuICAvLyB0aGUgZmlyc3QgY2hhcmFjdGVyIGFuZCBpcyBmb2xsb3dlZCBieSBhIGxvd2VyY2FzZSBsZXR0ZXIsIGluIGFuIGVmZm9ydCB0b1xuICAvLyBhaWQgcmVhZGFiaWxpdHkgb2YgdGhlIG91dHB1dC5cbiAgbGV0IGNsZWFuZWQgPSBpZGVudGlmaWVyLnJlcGxhY2UoXG4gICAgbmV3IFJlZ0V4cChgKD88IV4pKD86JHtpbGxlZ2FsQ2hhci5zb3VyY2V9KShbYS16XSlgLCAnZycpLFxuICAgIChfbSwgbGV0dGVyKSA9PiBsZXR0ZXIudG9VcHBlckNhc2UoKVxuICApO1xuICAvLyB0aGVuIHdlIHVubGl0ZXJhbGx5IHN0cmlwIGFsbCByZW1haW5pbmcgaWxsZWdhbCBjaGFyYWN0ZXJzLlxuICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKG5ldyBSZWdFeHAoaWxsZWdhbENoYXIuc291cmNlLCAnZycpLCAnJyk7XG4gIHJldHVybiBjbGVhbmVkO1xufVxuXG5jb25zdCBpbGxlZ2FsQ2hhciA9IC9eW15hLXpBLVpfJF18KD88PS4pW15hLXpBLVpfJDAtOV0vO1xuIl19","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImportUtil = void 0;\nconst sanitize_1 = require(\"./sanitize\");\nclass ImportUtil {\n    constructor(babel, program) {\n        this.babel = babel;\n        this.program = program;\n        this.t = babel.types;\n    }\n    // remove one imported binding. If this is the last thing imported from the\n    // given moduleSpecifier, the whole statement will also be removed.\n    removeImport(moduleSpecifier, exportedName) {\n        for (let topLevelPath of this.program.get('body')) {\n            if (!matchModule(topLevelPath, moduleSpecifier)) {\n                continue;\n            }\n            let importSpecifierPath = topLevelPath\n                .get('specifiers')\n                .find((specifierPath) => matchSpecifier(specifierPath, exportedName));\n            if (importSpecifierPath) {\n                if (topLevelPath.node.specifiers.length === 1) {\n                    topLevelPath.remove();\n                }\n                else {\n                    importSpecifierPath.remove();\n                }\n            }\n        }\n    }\n    // remove all imports from the given moduleSpecifier\n    removeAllImports(moduleSpecifier) {\n        for (let topLevelPath of this.program.get('body')) {\n            if (matchModule(topLevelPath, moduleSpecifier)) {\n                topLevelPath.remove();\n            }\n        }\n    }\n    // Import the given value (if needed) and return an Identifier representing\n    // it.\n    //\n    // This method is trickier to use safely than our higher-level methods\n    // (`insertAfter`, `insertBefore`, `replaceWith`, `mutate`) because after you\n    // insert the identifier into the AST, it's up to you to ensure that babel's\n    // scope system is aware of the new reference. The other methods do that for\n    // you automatically.\n    import(\n    // the spot at which you will insert the Identifier we return to you\n    target, \n    // the path to the module you're importing from\n    moduleSpecifier, \n    // the name you're importing from that module. Use \"default\" for the default\n    // export. Use \"*\" for the namespace.\n    exportedName, \n    // Optional hint for helping us pick a name for the imported binding\n    nameHint) {\n        return this.unreferencedImport(target, moduleSpecifier, exportedName, desiredName(nameHint, exportedName, defaultNameHint(target)));\n    }\n    // Import the given value (if needed) and return an Identifier representing\n    // it.\n    unreferencedImport(\n    // the spot at which you will insert the Identifier we return to you\n    target, \n    // the path to the module you're importing from\n    moduleSpecifier, \n    // the name you're importing from that module. Use \"default\" for the default\n    // export. Use \"*\" for the namespace.\n    exportedName, \n    // the preferred name you want, if we neeed to create a new binding. You\n    // might get something similar instead, to avoid collisions.\n    preferredName) {\n        var _a;\n        let isNamespaceImport = exportedName === '*';\n        let isDefaultImport = exportedName === 'default';\n        let isNamedImport = !isDefaultImport && !isNamespaceImport;\n        let declaration = this.findImportFrom(moduleSpecifier);\n        let hasNamespaceSpecifier = declaration === null || declaration === void 0 ? void 0 : declaration.node.specifiers.find((s) => s.type === 'ImportNamespaceSpecifier');\n        let hasNamedSpecifiers = declaration === null || declaration === void 0 ? void 0 : declaration.node.specifiers.find((s) => s.type === 'ImportSpecifier');\n        /**\n         * the file has a preexisting non-namespace import and a transform tries to add a namespace import, so they don't get combined\n         * the file has a preexisting namespace import and a transform tries to add a non-namespace import, so they don't get combined\n         * the file has a preexisting namespace import and a transform tries to add a namespace import, so they don't get combined\n         */\n        let cannotUseExistingDeclaration = (hasNamedSpecifiers && isNamespaceImport) ||\n            (hasNamespaceSpecifier && isNamedImport) ||\n            (hasNamespaceSpecifier && isNamespaceImport);\n        if (!cannotUseExistingDeclaration && declaration) {\n            let specifier = declaration\n                .get('specifiers')\n                .find((spec) => matchSpecifier(spec, exportedName));\n            if (specifier && ((_a = target.scope.getBinding(specifier.node.local.name)) === null || _a === void 0 ? void 0 : _a.kind) === 'module') {\n                return this.t.identifier(specifier.node.local.name);\n            }\n            else {\n                return this.addSpecifier(target, declaration, exportedName, preferredName);\n            }\n        }\n        else {\n            let declaration = this.insertAfterExistingImports(this.t.importDeclaration([], this.t.stringLiteral(moduleSpecifier)));\n            return this.addSpecifier(target, declaration, exportedName, preferredName);\n        }\n    }\n    importForSideEffect(moduleSpecifier) {\n        let declaration = this.findImportFrom(moduleSpecifier);\n        if (!declaration) {\n            this.insertAfterExistingImports(this.t.importDeclaration([], this.t.stringLiteral(moduleSpecifier)));\n        }\n    }\n    replaceWith(target, fn) {\n        return this.mutate((i) => {\n            target.replaceWith(fn(i));\n            // the return value of replaceWith is not a reliable way to get the\n            // updated path, at least in the case where the user replaced an\n            // expression with a statement. Instead we will rely on the fact that path\n            // replacement also mutates its argument, so `target` now points at the\n            // newly replaced path.\n            return target;\n        }, defaultNameHint(target));\n    }\n    insertAfter(target, fn) {\n        return this.mutate((i) => target.insertAfter(fn(i))[0], defaultNameHint(target));\n    }\n    insertBefore(target, fn) {\n        return this.mutate((i) => target.insertBefore(fn(i))[0], defaultNameHint(target));\n    }\n    // Low-level method for when you don't want to use our higher-level methods\n    // (replaceWith, insertBefore, insertAfter)\n    mutate(fn, defaultNameHint) {\n        let symbols = new Map();\n        const importer = {\n            import: (moduleSpecifier, exportedName, nameHint) => {\n                let identifier = this.t.identifier('__babel_import_util_placeholder__');\n                symbols.set(identifier, { moduleSpecifier, exportedName, nameHint });\n                return identifier;\n            },\n        };\n        const updateReference = (path) => {\n            if (!path.isIdentifier()) {\n                return;\n            }\n            let hit = symbols.get(path.node);\n            if (hit) {\n                let newIdentifier = this.unreferencedImport(path, hit.moduleSpecifier, hit.exportedName, desiredName(hit.nameHint, hit.exportedName, defaultNameHint));\n                path.replaceWith(newIdentifier);\n                let binding = path.scope.getBinding(newIdentifier.name);\n                if (!binding) {\n                    // we create the binding at the point where we add the import, so this\n                    // would indicate broken behavior\n                    throw new Error(`bug: this is supposed to never happen`);\n                }\n                binding.reference(path);\n            }\n        };\n        let result = fn(importer);\n        updateReference(result);\n        this.babel.traverse(result.node, {\n            ReferencedIdentifier: (path) => {\n                updateReference(path);\n            },\n        }, result.scope, {}, result);\n        return result;\n    }\n    addSpecifier(target, declaration, exportedName, preferredName) {\n        let local = this.t.identifier(unusedNameLike(target, preferredName));\n        let specifier = this.buildSpecifier(exportedName, local);\n        let added;\n        if (specifier.type === 'ImportDefaultSpecifier') {\n            declaration.node.specifiers.unshift(specifier);\n            added = declaration.get(`specifiers.0`);\n        }\n        else {\n            declaration.node.specifiers.push(specifier);\n            added = declaration.get(`specifiers.${declaration.node.specifiers.length - 1}`);\n        }\n        declaration.scope.registerBinding('module', added);\n        return local;\n    }\n    buildSpecifier(exportedName, localName) {\n        switch (exportedName) {\n            case 'default':\n                return this.t.importDefaultSpecifier(localName);\n            case '*':\n                return this.t.importNamespaceSpecifier(localName);\n            default:\n                return this.t.importSpecifier(localName, this.t.identifier(exportedName));\n        }\n    }\n    findImportFrom(moduleSpecifier) {\n        for (let path of this.program.get('body')) {\n            if (path.isImportDeclaration() &&\n                path.node.source.value === moduleSpecifier &&\n                path.node.importKind !== 'type') {\n                return path;\n            }\n        }\n        return undefined;\n    }\n    insertAfterExistingImports(statement) {\n        let lastIndex;\n        for (let [index, node] of this.program.node.body.entries()) {\n            if (node.type === 'ImportDeclaration') {\n                lastIndex = index;\n            }\n        }\n        if (lastIndex == null) {\n            // we are intentionally not using babel's container-aware methods, because\n            // while in theory it's nice that they schedule other plugins to run on\n            // our nodes, in practice those nodes might get mutated or removed by some\n            // other plugin in the intervening time causing failures.\n            this.program.node.body.unshift(statement);\n            return this.program.get('body.0');\n        }\n        else {\n            this.program.node.body.splice(lastIndex + 1, 0, statement);\n            return this.program.get(`body.${lastIndex + 1}`);\n        }\n    }\n}\nexports.ImportUtil = ImportUtil;\nfunction unusedNameLike(path, name) {\n    let candidate = name;\n    let counter = 0;\n    while (path.scope.hasBinding(candidate)) {\n        candidate = `${name}${counter++}`;\n    }\n    return candidate;\n}\nfunction name(node) {\n    if (node.type === 'StringLiteral') {\n        return node.value;\n    }\n    else {\n        return node.name;\n    }\n}\nfunction desiredName(nameHint, exportedName, defaultNameHint) {\n    if (nameHint) {\n        return (0, sanitize_1.sanitize)(nameHint);\n    }\n    if (exportedName === 'default' || exportedName === '*') {\n        return defaultNameHint !== null && defaultNameHint !== void 0 ? defaultNameHint : 'a';\n    }\n    else {\n        return exportedName;\n    }\n}\nfunction defaultNameHint(target) {\n    if (target === null || target === void 0 ? void 0 : target.isIdentifier()) {\n        return target.node.name;\n    }\n    else if (target) {\n        return target.scope.generateUidIdentifierBasedOnNode(target.node).name;\n    }\n    else {\n        return undefined;\n    }\n}\nfunction matchSpecifier(spec, exportedName) {\n    switch (exportedName) {\n        case 'default':\n            return spec.isImportDefaultSpecifier();\n        case '*':\n            return spec.isImportNamespaceSpecifier();\n        default:\n            return spec.isImportSpecifier() && name(spec.node.imported) === exportedName;\n    }\n}\nfunction matchModule(path, moduleSpecifier) {\n    return path.isImportDeclaration() && path.get('source').node.value === moduleSpecifier;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSx5Q0FBc0M7QUFFdEMsTUFBYSxVQUFVO0lBR3JCLFlBQW9CLEtBQW1CLEVBQVUsT0FBNEI7UUFBekQsVUFBSyxHQUFMLEtBQUssQ0FBYztRQUFVLFlBQU8sR0FBUCxPQUFPLENBQXFCO1FBQzNFLElBQUksQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztJQUN2QixDQUFDO0lBRUQsMkVBQTJFO0lBQzNFLG1FQUFtRTtJQUNuRSxZQUFZLENBQUMsZUFBdUIsRUFBRSxZQUFvQjtRQUN4RCxLQUFLLElBQUksWUFBWSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ2pELElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxFQUFFLGVBQWUsQ0FBQyxFQUFFO2dCQUMvQyxTQUFTO2FBQ1Y7WUFFRCxJQUFJLG1CQUFtQixHQUFHLFlBQVk7aUJBQ25DLEdBQUcsQ0FBQyxZQUFZLENBQUM7aUJBQ2pCLElBQUksQ0FBQyxDQUFDLGFBQWEsRUFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLGFBQWEsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ3hFLElBQUksbUJBQW1CLEVBQUU7Z0JBQ3ZCLElBQUksWUFBWSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtvQkFDN0MsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDO2lCQUN2QjtxQkFBTTtvQkFDTCxtQkFBbUIsQ0FBQyxNQUFNLEVBQUUsQ0FBQztpQkFDOUI7YUFDRjtTQUNGO0lBQ0gsQ0FBQztJQUVELG9EQUFvRDtJQUNwRCxnQkFBZ0IsQ0FBQyxlQUF1QjtRQUN0QyxLQUFLLElBQUksWUFBWSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ2pELElB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SUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUM7UUFDM0M7WUFDRSxPQUFPLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLFlBQVksQ0FBQztLQUNoRjtBQUNILENBQUM7QUFFRCxTQUFTLFdBQVcsQ0FDbEIsSUFBbUIsRUFDbkIsZUFBdUI7SUFFdkIsT0FBTyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssZUFBZSxDQUFDO0FBQ3pGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSAqIGFzIEJhYmVsIGZyb20gJ0BiYWJlbC9jb3JlJztcbmltcG9ydCB0eXBlIHsgdHlwZXMgYXMgdCwgTm9kZVBhdGggfSBmcm9tICdAYmFiZWwvY29yZSc7XG5pbXBvcnQgeyBzYW5pdGl6ZSB9IGZyb20gJy4vc2FuaXRpemUnO1xuXG5leHBvcnQgY2xhc3MgSW1wb3J0VXRpbCB7XG4gIHByaXZhdGUgdDogdHlwZW9mIEJhYmVsLnR5cGVzO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYmFiZWw6IHR5cGVvZiBCYWJlbCwgcHJpdmF0ZSBwcm9ncmFtOiBOb2RlUGF0aDx0LlByb2dyYW0+KSB7XG4gICAgdGhpcy50ID0gYmFiZWwudHlwZXM7XG4gIH1cblxuICAvLyByZW1vdmUgb25lIGltcG9ydGVkIGJpbmRpbmcuIElmIHRoaXMgaXMgdGhlIGxhc3QgdGhpbmcgaW1wb3J0ZWQgZnJvbSB0aGVcbiAgLy8gZ2l2ZW4gbW9kdWxlU3BlY2lmaWVyLCB0aGUgd2hvbGUgc3RhdGVtZW50IHdpbGwgYWxzbyBiZSByZW1vdmVkLlxuICByZW1vdmVJbXBvcnQobW9kdWxlU3BlY2lmaWVyOiBzdHJpbmcsIGV4cG9ydGVkTmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgZm9yIChsZXQgdG9wTGV2ZWxQYXRoIG9mIHRoaXMucHJvZ3JhbS5nZXQoJ2JvZHknKSkge1xuICAgICAgaWYgKCFtYXRjaE1vZHVsZSh0b3BMZXZlbFBhdGgsIG1vZHVsZVNwZWNpZmllcikpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGxldCBpbXBvcnRTcGVjaWZpZXJQYXRoID0gdG9wTGV2ZWxQYXRoXG4gICAgICAgIC5nZXQoJ3NwZWNpZmllcnMnKVxuICAgICAgICAuZmluZCgoc3BlY2lmaWVyUGF0aCkgPT4gbWF0Y2hTcGVjaWZpZXIoc3BlY2lmaWVyUGF0aCwgZXhwb3J0ZWROYW1lKSk7XG4gICAgICBpZiAoaW1wb3J0U3BlY2lmaWVyUGF0aCkge1xuICAgICAgICBpZiAodG9wTGV2ZWxQYXRoLm5vZGUuc3BlY2lmaWVycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICB0b3BMZXZlbFBhdGgucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW1wb3J0U3BlY2lmaWVyUGF0aC5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIHJlbW92ZSBhbGwgaW1wb3J0cyBmcm9tIHRoZSBnaXZlbiBtb2R1bGVTcGVjaWZpZXJcbiAgcmVtb3ZlQWxsSW1wb3J0cyhtb2R1bGVTcGVjaWZpZXI6IHN0cmluZyk6IHZvaWQge1xuICAgIGZvciAobGV0IHRvcExldmVsUGF0aCBvZiB0aGlzLnByb2dyYW0uZ2V0KCdib2R5JykpIHtcbiAgICAgIGlmIChtYXRjaE1vZHVsZSh0b3BMZXZlbFBhdGgsIG1vZHVsZVNwZWNpZmllcikpIHtcbiAgICAgICAgdG9wTGV2ZWxQYXRoLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEltcG9ydCB0aGUgZ2l2ZW4gdmFsdWUgKGlmIG5lZWRlZCkgYW5kIHJldHVybiBhbiBJZGVudGlmaWVyIHJlcHJlc2VudGluZ1xuICAvLyBpdC5cbiAgLy9cbiAgLy8gVGhpcyBtZXRob2QgaXMgdHJpY2tpZXIgdG8gdXNlIHNhZmVseSB0aGFuIG91ciBoaWdoZXItbGV2ZWwgbWV0aG9kc1xuICAvLyAoYGluc2VydEFmdGVyYCwgYGluc2VydEJlZm9yZWAsIGByZXBsYWNlV2l0aGAsIGBtdXRhdGVgKSBiZWNhdXNlIGFmdGVyIHlvdVxuICAvLyBpbnNlcnQgdGhlIGlkZW50aWZpZXIgaW50byB0aGUgQVNULCBpdCdzIHVwIHRvIHlvdSB0byBlbnN1cmUgdGhhdCBiYWJlbCdzXG4gIC8vIHNjb3BlIHN5c3RlbSBpcyBhd2FyZSBvZiB0aGUgbmV3IHJlZmVyZW5jZS4gVGhlIG90aGVyIG1ldGhvZHMgZG8gdGhhdCBmb3JcbiAgLy8geW91IGF1dG9tYXRpY2FsbHkuXG4gIGltcG9ydChcbiAgICAvLyB0aGUgc3BvdCBhdCB3aGljaCB5b3Ugd2lsbCBpbnNlcnQgdGhlIElkZW50aWZpZXIgd2UgcmV0dXJuIHRvIHlvdVxuICAgIHRhcmdldDogTm9kZVBhdGg8dC5Ob2RlPixcblxuICAgIC8vIHRoZSBwYXRoIHRvIHRoZSBtb2R1bGUgeW91J3JlIGltcG9ydGluZyBmcm9tXG4gICAgbW9kdWxlU3BlY2lmaWVyOiBzdHJpbmcsXG5cbiAgICAvLyB0aGUgbmFtZSB5b3UncmUgaW1wb3J0aW5nIGZyb20gdGhhdCBtb2R1bGUuIFVzZSBcImRlZmF1bHRcIiBmb3IgdGhlIGRlZmF1bHRcbiAgICAvLyBleHBvcnQuIFVzZSBcIipcIiBmb3IgdGhlIG5hbWVzcGFjZS5cbiAgICBleHBvcnRlZE5hbWU6IHN0cmluZyxcblxuICAgIC8vIE9wdGlvbmFsIGhpbnQgZm9yIGhlbHBpbmcgdXMgcGljayBhIG5hbWUgZm9yIHRoZSBpbXBvcnRlZCBiaW5kaW5nXG4gICAgbmFtZUhpbnQ/OiBzdHJpbmdcbiAgKTogdC5JZGVudGlmaWVyIHtcbiAgICByZXR1cm4gdGhpcy51bnJlZmVyZW5jZWRJbXBvcnQoXG4gICAgICB0YXJnZXQsXG4gICAgICBtb2R1bGVTcGVjaWZpZXIsXG4gICAgICBleHBvcnRlZE5hbWUsXG4gICAgICBkZXNpcmVkTmFtZShuYW1lSGludCwgZXhwb3J0ZWROYW1lLCBkZWZhdWx0TmFtZUhpbnQodGFyZ2V0KSlcbiAgICApO1xuICB9XG5cbiAgLy8gSW1wb3J0IHRoZSBnaXZlbiB2YWx1ZSAoaWYgbmVlZGVkKSBhbmQgcmV0dXJuIGFuIElkZW50aWZpZXIgcmVwcmVzZW50aW5nXG4gIC8vIGl0LlxuICBwcml2YXRlIHVucmVmZXJlbmNlZEltcG9ydChcbiAgICAvLyB0aGUgc3BvdCBhdCB3aGljaCB5b3Ugd2lsbCBpbnNlcnQgdGhlIElkZW50aWZpZXIgd2UgcmV0dXJuIHRvIHlvdVxuICAgIHRhcmdldDogTm9kZVBhdGg8dC5Ob2RlPixcblxuICAgIC8vIHRoZSBwYXRoIHRvIHRoZSBtb2R1bGUgeW91J3JlIGltcG9ydGluZyBmcm9tXG4gICAgbW9kdWxlU3BlY2lmaWVyOiBzdHJpbmcsXG5cbiAgICAvLyB0aGUgbmFtZSB5b3UncmUgaW1wb3J0aW5nIGZyb20gdGhhdCBtb2R1bGUuIFVzZSBcImRlZmF1bHRcIiBmb3IgdGhlIGRlZmF1bHRcbiAgICAvLyBleHBvcnQuIFVzZSBcIipcIiBmb3IgdGhlIG5hbWVzcGFjZS5cbiAgICBleHBvcnRlZE5hbWU6IHN0cmluZyxcblxuICAgIC8vIHRoZSBwcmVmZXJyZWQgbmFtZSB5b3Ugd2FudCwgaWYgd2UgbmVlZWQgdG8gY3JlYXRlIGEgbmV3IGJpbmRpbmcuIFlvdVxuICAgIC8vIG1pZ2h0IGdldCBzb21ldGhpbmcgc2ltaWxhciBpbnN0ZWFkLCB0byBhdm9pZCBjb2xsaXNpb25zLlxuICAgIHByZWZlcnJlZE5hbWU6IHN0cmluZ1xuICApOiB0LklkZW50aWZpZXIge1xuICAgIGxldCBpc05hbWVzcGFjZUltcG9ydCA9IGV4cG9ydGVkTmFtZSA9PT0gJyonO1xuICAgIGxldCBpc0RlZmF1bHRJbXBvcnQgPSBleHBvcnRlZE5hbWUgPT09ICdkZWZhdWx0JztcbiAgICBsZXQgaXNOYW1lZEltcG9ydCA9ICFpc0RlZmF1bHRJbXBvcnQgJiYgIWlzTmFtZXNwYWNlSW1wb3J0O1xuICAgIGxldCBkZWNsYXJhdGlvbiA9IHRoaXMuZmluZEltcG9ydEZyb20obW9kdWxlU3BlY2lmaWVyKTtcbiAgICBsZXQgaGFzTmFtZXNwYWNlU3BlY2lmaWVyID0gZGVjbGFyYXRpb24/Lm5vZGUuc3BlY2lmaWVycy5maW5kKFxuICAgICAgKHMpID0+IHMudHlwZSA9PT0gJ0ltcG9ydE5hbWVzcGFjZVNwZWNpZmllcidcbiAgICApO1xuICAgIGxldCBoYXNOYW1lZFNwZWNpZmllcnMgPSBkZWNsYXJhdGlvbj8ubm9kZS5zcGVjaWZpZXJzLmZpbmQoKHMpID0+IHMudHlwZSA9PT0gJ0ltcG9ydFNwZWNpZmllcicpO1xuXG4gICAgLyoqXG4gICAgICogdGhlIGZpbGUgaGFzIGEgcHJlZXhpc3Rpbmcgbm9uLW5hbWVzcGFjZSBpbXBvcnQgYW5kIGEgdHJhbnNmb3JtIHRyaWVzIHRvIGFkZCBhIG5hbWVzcGFjZSBpbXBvcnQsIHNvIHRoZXkgZG9uJ3QgZ2V0IGNvbWJpbmVkXG4gICAgICogdGhlIGZpbGUgaGFzIGEgcHJlZXhpc3RpbmcgbmFtZXNwYWNlIGltcG9ydCBhbmQgYSB0cmFuc2Zvcm0gdHJpZXMgdG8gYWRkIGEgbm9uLW5hbWVzcGFjZSBpbXBvcnQsIHNvIHRoZXkgZG9uJ3QgZ2V0IGNvbWJpbmVkXG4gICAgICogdGhlIGZpbGUgaGFzIGEgcHJlZXhpc3RpbmcgbmFtZXNwYWNlIGltcG9ydCBhbmQgYSB0cmFuc2Zvcm0gdHJpZXMgdG8gYWRkIGEgbmFtZXNwYWNlIGltcG9ydCwgc28gdGhleSBkb24ndCBnZXQgY29tYmluZWRcbiAgICAgKi9cbiAgICBsZXQgY2Fubm90VXNlRXhpc3RpbmdEZWNsYXJhdGlvbiA9XG4gICAgICAoaGFzTmFtZWRTcGVjaWZpZXJzICYmIGlzTmFtZXNwYWNlSW1wb3J0KSB8fFxuICAgICAgKGhhc05hbWVzcGFjZVNwZWNpZmllciAmJiBpc05hbWVkSW1wb3J0KSB8fFxuICAgICAgKGhhc05hbWVzcGFjZVNwZWNpZmllciAmJiBpc05hbWVzcGFjZUltcG9ydCk7XG5cbiAgICBpZiAoIWNhbm5vdFVzZUV4aXN0aW5nRGVjbGFyYXRpb24gJiYgZGVjbGFyYXRpb24pIHtcbiAgICAgIGxldCBzcGVjaWZpZXIgPSBkZWNsYXJhdGlvblxuICAgICAgICAuZ2V0KCdzcGVjaWZpZXJzJylcbiAgICAgICAgLmZpbmQoKHNwZWMpID0+IG1hdGNoU3BlY2lmaWVyKHNwZWMsIGV4cG9ydGVkTmFtZSkpO1xuICAgICAgaWYgKHNwZWNpZmllciAmJiB0YXJnZXQuc2NvcGUuZ2V0QmluZGluZyhzcGVjaWZpZXIubm9kZS5sb2NhbC5uYW1lKT8ua2luZCA9PT0gJ21vZHVsZScpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudC5pZGVudGlmaWVyKHNwZWNpZmllci5ub2RlLmxvY2FsLm5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkU3BlY2lmaWVyKHRhcmdldCwgZGVjbGFyYXRpb24sIGV4cG9ydGVkTmFtZSwgcHJlZmVycmVkTmFtZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBkZWNsYXJhdGlvbiA9IHRoaXMuaW5zZXJ0QWZ0ZXJFeGlzdGluZ0ltcG9ydHMoXG4gICAgICAgIHRoaXMudC5pbXBvcnREZWNsYXJhdGlvbihbXSwgdGhpcy50LnN0cmluZ0xpdGVyYWwobW9kdWxlU3BlY2lmaWVyKSlcbiAgICAgICk7XG4gICAgICByZXR1cm4gdGhpcy5hZGRTcGVjaWZpZXIodGFyZ2V0LCBkZWNsYXJhdGlvbiwgZXhwb3J0ZWROYW1lLCBwcmVmZXJyZWROYW1lKTtcbiAgICB9XG4gIH1cblxuICBpbXBvcnRGb3JTaWRlRWZmZWN0KG1vZHVsZVNwZWNpZmllcjogc3RyaW5nKTogdm9pZCB7XG4gICAgbGV0IGRlY2xhcmF0aW9uID0gdGhpcy5maW5kSW1wb3J0RnJvbShtb2R1bGVTcGVjaWZpZXIpO1xuICAgIGlmICghZGVjbGFyYXRpb24pIHtcbiAgICAgIHRoaXMuaW5zZXJ0QWZ0ZXJFeGlzdGluZ0ltcG9ydHMoXG4gICAgICAgIHRoaXMudC5pbXBvcnREZWNsYXJhdGlvbihbXSwgdGhpcy50LnN0cmluZ0xpdGVyYWwobW9kdWxlU3BlY2lmaWVyKSlcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmVwbGFjZVdpdGg8VCBleHRlbmRzIHQuTm9kZSwgUiBleHRlbmRzIHQuTm9kZT4oXG4gICAgdGFyZ2V0OiBOb2RlUGF0aDxUPixcbiAgICBmbjogKGk6IEltcG9ydGVyKSA9PiBSXG4gICk6IE5vZGVQYXRoPFI+IHtcbiAgICByZXR1cm4gdGhpcy5tdXRhdGUoKGkpID0+IHtcbiAgICAgIHRhcmdldC5yZXBsYWNlV2l0aChmbihpKSk7XG4gICAgICAvLyB0aGUgcmV0dXJuIHZhbHVlIG9mIHJlcGxhY2VXaXRoIGlzIG5vdCBhIHJlbGlhYmxlIHdheSB0byBnZXQgdGhlXG4gICAgICAvLyB1cGRhdGVkIHBhdGgsIGF0IGxlYXN0IGluIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIHJlcGxhY2VkIGFuXG4gICAgICAvLyBleHByZXNzaW9uIHdpdGggYSBzdGF0ZW1lbnQuIEluc3RlYWQgd2Ugd2lsbCByZWx5IG9uIHRoZSBmYWN0IHRoYXQgcGF0aFxuICAgICAgLy8gcmVwbGFjZW1lbnQgYWxzbyBtdXRhdGVzIGl0cyBhcmd1bWVudCwgc28gYHRhcmdldGAgbm93IHBvaW50cyBhdCB0aGVcbiAgICAgIC8vIG5ld2x5IHJlcGxhY2VkIHBhdGguXG4gICAgICByZXR1cm4gdGFyZ2V0IGFzIHVua25vd24gYXMgTm9kZVBhdGg8Uj47XG4gICAgfSwgZGVmYXVsdE5hbWVIaW50KHRhcmdldCkpO1xuICB9XG5cbiAgaW5zZXJ0QWZ0ZXI8VCBleHRlbmRzIHQuTm9kZSwgUiBleHRlbmRzIHQuTm9kZT4oXG4gICAgdGFyZ2V0OiBOb2RlUGF0aDxUPixcbiAgICBmbjogKGk6IEltcG9ydGVyKSA9PiBSXG4gICk6IE5vZGVQYXRoPFI+IHtcbiAgICByZXR1cm4gdGhpcy5tdXRhdGUoKGkpID0+IHRhcmdldC5pbnNlcnRBZnRlcihmbihpKSlbMF0gYXMgTm9kZVBhdGg8Uj4sIGRlZmF1bHROYW1lSGludCh0YXJnZXQpKTtcbiAgfVxuXG4gIGluc2VydEJlZm9yZTxUIGV4dGVuZHMgdC5Ob2RlLCBSIGV4dGVuZHMgdC5Ob2RlPihcbiAgICB0YXJnZXQ6IE5vZGVQYXRoPFQ+LFxuICAgIGZuOiAoaTogSW1wb3J0ZXIpID0+IFJcbiAgKTogTm9kZVBhdGg8Uj4ge1xuICAgIHJldHVybiB0aGlzLm11dGF0ZShcbiAgICAgIChpKSA9PiB0YXJnZXQuaW5zZXJ0QmVmb3JlKGZuKGkpKVswXSBhcyBOb2RlUGF0aDxSPixcbiAgICAgIGRlZmF1bHROYW1lSGludCh0YXJnZXQpXG4gICAgKTtcbiAgfVxuXG4gIC8vIExvdy1sZXZlbCBtZXRob2QgZm9yIHdoZW4geW91IGRvbid0IHdhbnQgdG8gdXNlIG91ciBoaWdoZXItbGV2ZWwgbWV0aG9kc1xuICAvLyAocmVwbGFjZVdpdGgsIGluc2VydEJlZm9yZSwgaW5zZXJ0QWZ0ZXIpXG4gIG11dGF0ZTxSZXBsYWNlbWVudCBleHRlbmRzIHQuTm9kZT4oXG4gICAgZm46IChpbXBvcnRlcjogSW1wb3J0ZXIpID0+IE5vZGVQYXRoPFJlcGxhY2VtZW50PixcbiAgICBkZWZhdWx0TmFtZUhpbnQ/OiBzdHJpbmdcbiAgKTogTm9kZVBhdGg8UmVwbGFjZW1lbnQ+IHtcbiAgICBsZXQgc3ltYm9sczogTWFwPFxuICAgICAgdC5JZGVudGlmaWVyLFxuICAgICAgeyBtb2R1bGVTcGVjaWZpZXI6IHN0cmluZzsgZXhwb3J0ZWROYW1lOiBzdHJpbmc7IG5hbWVIaW50OiBzdHJpbmcgfCB1bmRlZmluZWQgfVxuICAgID4gPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgaW1wb3J0ZXI6IEltcG9ydGVyID0ge1xuICAgICAgaW1wb3J0OiAobW9kdWxlU3BlY2lmaWVyOiBzdHJpbmcsIGV4cG9ydGVkTmFtZTogc3RyaW5nLCBuYW1lSGludD86IHN0cmluZykgPT4ge1xuICAgICAgICBsZXQgaWRlbnRpZmllciA9IHRoaXMudC5pZGVudGlmaWVyKCdfX2JhYmVsX2ltcG9ydF91dGlsX3BsYWNlaG9sZGVyX18nKTtcbiAgICAgICAgc3ltYm9scy5zZXQoaWRlbnRpZmllciwgeyBtb2R1bGVTcGVjaWZpZXIsIGV4cG9ydGVkTmFtZSwgbmFtZUhpbnQgfSk7XG4gICAgICAgIHJldHVybiBpZGVudGlmaWVyO1xuICAgICAgfSxcbiAgICB9O1xuXG4gICAgY29uc3QgdXBkYXRlUmVmZXJlbmNlID0gKHBhdGg6IE5vZGVQYXRoKSA9PiB7XG4gICAgICBpZiAoIXBhdGguaXNJZGVudGlmaWVyKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbGV0IGhpdCA9IHN5bWJvbHMuZ2V0KHBhdGgubm9kZSk7XG4gICAgICBpZiAoaGl0KSB7XG4gICAgICAgIGxldCBuZXdJZGVudGlmaWVyID0gdGhpcy51bnJlZmVyZW5jZWRJbXBvcnQoXG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgICBoaXQubW9kdWxlU3BlY2lmaWVyLFxuICAgICAgICAgIGhpdC5leHBvcnRlZE5hbWUsXG4gICAgICAgICAgZGVzaXJlZE5hbWUoaGl0Lm5hbWVIaW50LCBoaXQuZXhwb3J0ZWROYW1lLCBkZWZhdWx0TmFtZUhpbnQpXG4gICAgICAgICk7XG4gICAgICAgIHBhdGgucmVwbGFjZVdpdGgobmV3SWRlbnRpZmllcik7XG4gICAgICAgIGxldCBiaW5kaW5nID0gcGF0aC5zY29wZS5nZXRCaW5kaW5nKG5ld0lkZW50aWZpZXIubmFtZSk7XG4gICAgICAgIGlmICghYmluZGluZykge1xuICAgICAgICAgIC8vIHdlIGNyZWF0ZSB0aGUgYmluZGluZyBhdCB0aGUgcG9pbnQgd2hlcmUgd2UgYWRkIHRoZSBpbXBvcnQsIHNvIHRoaXNcbiAgICAgICAgICAvLyB3b3VsZCBpbmRpY2F0ZSBicm9rZW4gYmVoYXZpb3JcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGJ1ZzogdGhpcyBpcyBzdXBwb3NlZCB0byBuZXZlciBoYXBwZW5gKTtcbiAgICAgICAgfVxuICAgICAgICBiaW5kaW5nLnJlZmVyZW5jZShwYXRoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0IHJlc3VsdCA9IGZuKGltcG9ydGVyKTtcbiAgICB1cGRhdGVSZWZlcmVuY2UocmVzdWx0KTtcbiAgICB0aGlzLmJhYmVsLnRyYXZlcnNlKFxuICAgICAgcmVzdWx0Lm5vZGUsXG4gICAgICB7XG4gICAgICAgIFJlZmVyZW5jZWRJZGVudGlmaWVyOiAocGF0aCkgPT4ge1xuICAgICAgICAgIHVwZGF0ZVJlZmVyZW5jZShwYXRoKTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICByZXN1bHQuc2NvcGUsXG4gICAgICB7fSxcbiAgICAgIHJlc3VsdFxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgYWRkU3BlY2lmaWVyKFxuICAgIHRhcmdldDogTm9kZVBhdGg8dC5Ob2RlPixcbiAgICBkZWNsYXJhdGlvbjogTm9kZVBhdGg8dC5JbXBvcnREZWNsYXJhdGlvbj4sXG4gICAgZXhwb3J0ZWROYW1lOiBzdHJpbmcsXG4gICAgcHJlZmVycmVkTmFtZTogc3RyaW5nXG4gICk6IHQuSWRlbnRpZmllciB7XG4gICAgbGV0IGxvY2FsID0gdGhpcy50LmlkZW50aWZpZXIodW51c2VkTmFtZUxpa2UodGFyZ2V0LCBwcmVmZXJyZWROYW1lKSk7XG4gICAgbGV0IHNwZWNpZmllciA9IHRoaXMuYnVpbGRTcGVjaWZpZXIoZXhwb3J0ZWROYW1lLCBsb2NhbCk7XG4gICAgbGV0IGFkZGVkOiBOb2RlUGF0aDtcbiAgICBpZiAoc3BlY2lmaWVyLnR5cGUgPT09ICdJbXBvcnREZWZhdWx0U3BlY2lmaWVyJykge1xuICAgICAgZGVjbGFyYXRpb24ubm9kZS5zcGVjaWZpZXJzLnVuc2hpZnQoc3BlY2lmaWVyKTtcbiAgICAgIGFkZGVkID0gZGVjbGFyYXRpb24uZ2V0KGBzcGVjaWZpZXJzLjBgKSBhcyBOb2RlUGF0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVjbGFyYXRpb24ubm9kZS5zcGVjaWZpZXJzLnB1c2goc3BlY2lmaWVyKTtcbiAgICAgIGFkZGVkID0gZGVjbGFyYXRpb24uZ2V0KGBzcGVjaWZpZXJzLiR7ZGVjbGFyYXRpb24ubm9kZS5zcGVjaWZpZXJzLmxlbmd0aCAtIDF9YCkgYXMgTm9kZVBhdGg7XG4gICAgfVxuICAgIGRlY2xhcmF0aW9uLnNjb3BlLnJlZ2lzdGVyQmluZGluZygnbW9kdWxlJywgYWRkZWQpO1xuICAgIHJldHVybiBsb2NhbDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTcGVjaWZpZXIoZXhwb3J0ZWROYW1lOiBzdHJpbmcsIGxvY2FsTmFtZTogdC5JZGVudGlmaWVyKSB7XG4gICAgc3dpdGNoIChleHBvcnRlZE5hbWUpIHtcbiAgICAgIGNhc2UgJ2RlZmF1bHQnOlxuICAgICAgICByZXR1cm4gdGhpcy50LmltcG9ydERlZmF1bHRTcGVjaWZpZXIobG9jYWxOYW1lKTtcbiAgICAgIGNhc2UgJyonOlxuICAgICAgICByZXR1cm4gdGhpcy50LmltcG9ydE5hbWVzcGFjZVNwZWNpZmllcihsb2NhbE5hbWUpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoaXMudC5pbXBvcnRTcGVjaWZpZXIobG9jYWxOYW1lLCB0aGlzLnQuaWRlbnRpZmllcihleHBvcnRlZE5hbWUpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZpbmRJbXBvcnRGcm9tKG1vZHVsZVNwZWNpZmllcjogc3RyaW5nKTogTm9kZVBhdGg8dC5JbXBvcnREZWNsYXJhdGlvbj4gfCB1bmRlZmluZWQge1xuICAgIGZvciAobGV0IHBhdGggb2YgdGhpcy5wcm9ncmFtLmdldCgnYm9keScpKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHBhdGguaXNJbXBvcnREZWNsYXJhdGlvbigpICYmXG4gICAgICAgIHBhdGgubm9kZS5zb3VyY2UudmFsdWUgPT09IG1vZHVsZVNwZWNpZmllciAmJlxuICAgICAgICBwYXRoLm5vZGUuaW1wb3J0S2luZCAhPT0gJ3R5cGUnXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBwcml2YXRlIGluc2VydEFmdGVyRXhpc3RpbmdJbXBvcnRzPFMgZXh0ZW5kcyB0LlN0YXRlbWVudD4oc3RhdGVtZW50OiBTKTogTm9kZVBhdGg8Uz4ge1xuICAgIGxldCBsYXN0SW5kZXg6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICBmb3IgKGxldCBbaW5kZXgsIG5vZGVdIG9mIHRoaXMucHJvZ3JhbS5ub2RlLmJvZHkuZW50cmllcygpKSB7XG4gICAgICBpZiAobm9kZS50eXBlID09PSAnSW1wb3J0RGVjbGFyYXRpb24nKSB7XG4gICAgICAgIGxhc3RJbmRleCA9IGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobGFzdEluZGV4ID09IG51bGwpIHtcbiAgICAgIC8vIHdlIGFyZSBpbnRlbnRpb25hbGx5IG5vdCB1c2luZyBiYWJlbCdzIGNvbnRhaW5lci1hd2FyZSBtZXRob2RzLCBiZWNhdXNlXG4gICAgICAvLyB3aGlsZSBpbiB0aGVvcnkgaXQncyBuaWNlIHRoYXQgdGhleSBzY2hlZHVsZSBvdGhlciBwbHVnaW5zIHRvIHJ1biBvblxuICAgICAgLy8gb3VyIG5vZGVzLCBpbiBwcmFjdGljZSB0aG9zZSBub2RlcyBtaWdodCBnZXQgbXV0YXRlZCBvciByZW1vdmVkIGJ5IHNvbWVcbiAgICAgIC8vIG90aGVyIHBsdWdpbiBpbiB0aGUgaW50ZXJ2ZW5pbmcgdGltZSBjYXVzaW5nIGZhaWx1cmVzLlxuICAgICAgdGhpcy5wcm9ncmFtLm5vZGUuYm9keS51bnNoaWZ0KHN0YXRlbWVudCk7XG4gICAgICByZXR1cm4gdGhpcy5wcm9ncmFtLmdldCgnYm9keS4wJykgYXMgTm9kZVBhdGg8Uz47XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHJvZ3JhbS5ub2RlLmJvZHkuc3BsaWNlKGxhc3RJbmRleCArIDEsIDAsIHN0YXRlbWVudCk7XG4gICAgICByZXR1cm4gdGhpcy5wcm9ncmFtLmdldChgYm9keS4ke2xhc3RJbmRleCArIDF9YCkgYXMgTm9kZVBhdGg8Uz47XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHVudXNlZE5hbWVMaWtlKHBhdGg6IE5vZGVQYXRoPHQuTm9kZT4sIG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBjYW5kaWRhdGUgPSBuYW1lO1xuICBsZXQgY291bnRlciA9IDA7XG4gIHdoaWxlIChwYXRoLnNjb3BlLmhhc0JpbmRpbmcoY2FuZGlkYXRlKSkge1xuICAgIGNhbmRpZGF0ZSA9IGAke25hbWV9JHtjb3VudGVyKyt9YDtcbiAgfVxuICByZXR1cm4gY2FuZGlkYXRlO1xufVxuXG5mdW5jdGlvbiBuYW1lKG5vZGU6IHQuU3RyaW5nTGl0ZXJhbCB8IHQuSWRlbnRpZmllcik6IHN0cmluZyB7XG4gIGlmIChub2RlLnR5cGUgPT09ICdTdHJpbmdMaXRlcmFsJykge1xuICAgIHJldHVybiBub2RlLnZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBub2RlLm5hbWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVzaXJlZE5hbWUoXG4gIG5hbWVIaW50OiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gIGV4cG9ydGVkTmFtZTogc3RyaW5nLFxuICBkZWZhdWx0TmFtZUhpbnQ6IHN0cmluZyB8IHVuZGVmaW5lZFxuKSB7XG4gIGlmIChuYW1lSGludCkge1xuICAgIHJldHVybiBzYW5pdGl6ZShuYW1lSGludCk7XG4gIH1cbiAgaWYgKGV4cG9ydGVkTmFtZSA9PT0gJ2RlZmF1bHQnIHx8IGV4cG9ydGVkTmFtZSA9PT0gJyonKSB7XG4gICAgcmV0dXJuIGRlZmF1bHROYW1lSGludCA/PyAnYSc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGV4cG9ydGVkTmFtZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkZWZhdWx0TmFtZUhpbnQodGFyZ2V0OiBOb2RlUGF0aCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGlmICh0YXJnZXQ/LmlzSWRlbnRpZmllcigpKSB7XG4gICAgcmV0dXJuIHRhcmdldC5ub2RlLm5hbWU7XG4gIH0gZWxzZSBpZiAodGFyZ2V0KSB7XG4gICAgcmV0dXJuIHRhcmdldC5zY29wZS5nZW5lcmF0ZVVpZElkZW50aWZpZXJCYXNlZE9uTm9kZSh0YXJnZXQubm9kZSkubmFtZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1hdGNoU3BlY2lmaWVyKHNwZWM6IE5vZGVQYXRoPGFueT4sIGV4cG9ydGVkTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHN3aXRjaCAoZXhwb3J0ZWROYW1lKSB7XG4gICAgY2FzZSAnZGVmYXVsdCc6XG4gICAgICByZXR1cm4gc3BlYy5pc0ltcG9ydERlZmF1bHRTcGVjaWZpZXIoKTtcbiAgICBjYXNlICcqJzpcbiAgICAgIHJldHVybiBzcGVjLmlzSW1wb3J0TmFtZXNwYWNlU3BlY2lmaWVyKCk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzcGVjLmlzSW1wb3J0U3BlY2lmaWVyKCkgJiYgbmFtZShzcGVjLm5vZGUuaW1wb3J0ZWQpID09PSBleHBvcnRlZE5hbWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWF0Y2hNb2R1bGUoXG4gIHBhdGg6IE5vZGVQYXRoPGFueT4sXG4gIG1vZHVsZVNwZWNpZmllcjogc3RyaW5nXG4pOiBwYXRoIGlzIE5vZGVQYXRoPHQuSW1wb3J0RGVjbGFyYXRpb24+IHtcbiAgcmV0dXJuIHBhdGguaXNJbXBvcnREZWNsYXJhdGlvbigpICYmIHBhdGguZ2V0KCdzb3VyY2UnKS5ub2RlLnZhbHVlID09PSBtb2R1bGVTcGVjaWZpZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1wb3J0ZXIge1xuICAvLyBJbXBvcnQgdGhlIGdpdmVuIHZhbHVlIChpZiBuZWVkZWQpIGFuZCByZXR1cm4gYW4gSWRlbnRpZmllciByZXByZXNlbnRpbmdcbiAgLy8gaXQuXG4gIGltcG9ydChcbiAgICAvLyB0aGUgcGF0aCB0byB0aGUgbW9kdWxlIHlvdSdyZSBpbXBvcnRpbmcgZnJvbVxuICAgIG1vZHVsZVNwZWNpZmllcjogc3RyaW5nLFxuXG4gICAgLy8gdGhlIG5hbWUgeW91J3JlIGltcG9ydGluZyBmcm9tIHRoYXQgbW9kdWxlLiBVc2UgXCJkZWZhdWx0XCIgZm9yIHRoZSBkZWZhdWx0XG4gICAgLy8gZXhwb3J0LiBVc2UgXCIqXCIgZm9yIHRoZSBuYW1lc3BhY2UuXG4gICAgZXhwb3J0ZWROYW1lOiBzdHJpbmcsXG5cbiAgICAvLyBPcHRpb25hbCBoaW50IGZvciBoZWxwaW5nIHVzIHBpY2sgYSBuYW1lIGZvciB0aGUgaW1wb3J0ZWQgYmluZGluZ1xuICAgIG5hbWVIaW50Pzogc3RyaW5nXG4gICk6IHQuSWRlbnRpZmllcjtcbn1cbiJdfQ==","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.astNodeHasBinding = astNodeHasBinding;\nfunction astNodeHasBinding(target, name) {\n    var _a;\n    let cursor = target;\n    while (cursor) {\n        let parentNode = (_a = cursor.parent) === null || _a === void 0 ? void 0 : _a.node;\n        if ((parentNode === null || parentNode === void 0 ? void 0 : parentNode.type) === 'ElementNode' &&\n            parentNode.blockParams.includes(name) &&\n            // an ElementNode's block params are valid only within its children\n            parentNode.children.includes(cursor.node)) {\n            return true;\n        }\n        if ((parentNode === null || parentNode === void 0 ? void 0 : parentNode.type) === 'Block' &&\n            parentNode.blockParams.includes(name) &&\n            // a Block's blockParams are valid only within its body\n            parentNode.body.includes(cursor.node)) {\n            return true;\n        }\n        cursor = cursor.parent;\n    }\n    return false;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGJzLXV0aWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaGJzLXV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEsOENBeUJDO0FBekJELFNBQWdCLGlCQUFpQixDQUFDLE1BQThCLEVBQUUsSUFBWTs7SUFDNUUsSUFBSSxNQUFNLEdBQWtDLE1BQU0sQ0FBQztJQUNuRCxPQUFPLE1BQU0sRUFBRSxDQUFDO1FBQ2QsSUFBSSxVQUFVLEdBQUcsTUFBQSxNQUFNLENBQUMsTUFBTSwwQ0FBRSxJQUFJLENBQUM7UUFDckMsSUFDRSxDQUFBLFVBQVUsYUFBVixVQUFVLHVCQUFWLFVBQVUsQ0FBRSxJQUFJLE1BQUssYUFBYTtZQUNsQyxVQUFVLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7WUFDckMsbUVBQW1FO1lBQ25FLFVBQVUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUF1QixDQUFDLEVBQzVELENBQUM7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxJQUNFLENBQUEsVUFBVSxhQUFWLFVBQVUsdUJBQVYsVUFBVSxDQUFFLElBQUksTUFBSyxPQUFPO1lBQzVCLFVBQVUsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztZQUNyQyx1REFBdUQ7WUFDdkQsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQXVCLENBQUMsRUFDeEQsQ0FBQztZQUNELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVELE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ3pCLENBQUM7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFTVHYxLCBXYWxrZXJQYXRoIH0gZnJvbSAnQGdsaW1tZXIvc3ludGF4JztcblxuZXhwb3J0IGZ1bmN0aW9uIGFzdE5vZGVIYXNCaW5kaW5nKHRhcmdldDogV2Fsa2VyUGF0aDxBU1R2MS5Ob2RlPiwgbmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGxldCBjdXJzb3I6IFdhbGtlclBhdGg8QVNUdjEuTm9kZT4gfCBudWxsID0gdGFyZ2V0O1xuICB3aGlsZSAoY3Vyc29yKSB7XG4gICAgbGV0IHBhcmVudE5vZGUgPSBjdXJzb3IucGFyZW50Py5ub2RlO1xuICAgIGlmIChcbiAgICAgIHBhcmVudE5vZGU/LnR5cGUgPT09ICdFbGVtZW50Tm9kZScgJiZcbiAgICAgIHBhcmVudE5vZGUuYmxvY2tQYXJhbXMuaW5jbHVkZXMobmFtZSkgJiZcbiAgICAgIC8vIGFuIEVsZW1lbnROb2RlJ3MgYmxvY2sgcGFyYW1zIGFyZSB2YWxpZCBvbmx5IHdpdGhpbiBpdHMgY2hpbGRyZW5cbiAgICAgIHBhcmVudE5vZGUuY2hpbGRyZW4uaW5jbHVkZXMoY3Vyc29yLm5vZGUgYXMgQVNUdjEuU3RhdGVtZW50KVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgcGFyZW50Tm9kZT8udHlwZSA9PT0gJ0Jsb2NrJyAmJlxuICAgICAgcGFyZW50Tm9kZS5ibG9ja1BhcmFtcy5pbmNsdWRlcyhuYW1lKSAmJlxuICAgICAgLy8gYSBCbG9jaydzIGJsb2NrUGFyYW1zIGFyZSB2YWxpZCBvbmx5IHdpdGhpbiBpdHMgYm9keVxuICAgICAgcGFyZW50Tm9kZS5ib2R5LmluY2x1ZGVzKGN1cnNvci5ub2RlIGFzIEFTVHYxLlN0YXRlbWVudClcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGN1cnNvciA9IGN1cnNvci5wYXJlbnQ7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuIl19","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.readOnlyArray = readOnlyArray;\nconst mutationMethods = [\n    'copyWithin',\n    'fill',\n    'pop',\n    'push',\n    'reverse',\n    'shift',\n    'sort',\n    'splice',\n    'unshift',\n];\nfunction readOnlyArray(array, message = 'Forbidden array mutation') {\n    return new Proxy(array, {\n        get(target, prop) {\n            if (typeof prop === 'string' && mutationMethods.includes(prop)) {\n                return () => {\n                    throw new Error(message);\n                };\n            }\n            return Reflect.get(target, prop);\n        },\n        set(_target, _prop) {\n            throw new Error(message);\n        },\n        deleteProperty() {\n            throw new Error(message);\n        },\n    });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhZC1vbmx5LWFycmF5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmVhZC1vbmx5LWFycmF5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBWUEsc0NBaUJDO0FBN0JELE1BQU0sZUFBZSxHQUFHO0lBQ3RCLFlBQVk7SUFDWixNQUFNO0lBQ04sS0FBSztJQUNMLE1BQU07SUFDTixTQUFTO0lBQ1QsT0FBTztJQUNQLE1BQU07SUFDTixRQUFRO0lBQ1IsU0FBUztDQUNWLENBQUM7QUFFRixTQUFnQixhQUFhLENBQUksS0FBVSxFQUFFLE9BQU8sR0FBRywwQkFBMEI7SUFDL0UsT0FBTyxJQUFJLEtBQUssQ0FBQyxLQUFLLEVBQUU7UUFDdEIsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJO1lBQ2QsSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLElBQUksZUFBZSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUMvRCxPQUFPLEdBQUcsRUFBRTtvQkFDVixNQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUMzQixDQUFDLENBQUM7WUFDSixDQUFDO1lBQ0QsT0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNuQyxDQUFDO1FBQ0QsR0FBRyxDQUFDLE9BQU8sRUFBRSxLQUFLO1lBQ2hCLE1BQU0sSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0IsQ0FBQztRQUNELGNBQWM7WUFDWixNQUFNLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzNCLENBQUM7S0FDRixDQUFDLENBQUM7QUFDTCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbXV0YXRpb25NZXRob2RzID0gW1xuICAnY29weVdpdGhpbicsXG4gICdmaWxsJyxcbiAgJ3BvcCcsXG4gICdwdXNoJyxcbiAgJ3JldmVyc2UnLFxuICAnc2hpZnQnLFxuICAnc29ydCcsXG4gICdzcGxpY2UnLFxuICAndW5zaGlmdCcsXG5dO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVhZE9ubHlBcnJheTxUPihhcnJheTogVFtdLCBtZXNzYWdlID0gJ0ZvcmJpZGRlbiBhcnJheSBtdXRhdGlvbicpIHtcbiAgcmV0dXJuIG5ldyBQcm94eShhcnJheSwge1xuICAgIGdldCh0YXJnZXQsIHByb3ApIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycgJiYgbXV0YXRpb25NZXRob2RzLmluY2x1ZGVzKHByb3ApKSB7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcCk7XG4gICAgfSxcbiAgICBzZXQoX3RhcmdldCwgX3Byb3ApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9LFxuICAgIGRlbGV0ZVByb3BlcnR5KCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH0sXG4gIH0pO1xufVxuIl19","\"use strict\";\n/*\n  This class exists because:\n   - before template compilation starts, we need to pass a `locals` array to\n     ember-template-compiler\n   - the JSUtils API can mutate the scope during template compilation\n   - those scope mutations need to update both the original `locals` array and\n     our own name mapping, keeping them in sync.\n*/\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _ScopeLocals_instances, _ScopeLocals_mapping, _ScopeLocals_locals, _ScopeLocals_params, _ScopeLocals_isInJsScope;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScopeLocals = exports.ALLOWED_GLOBALS = void 0;\nconst hbs_utils_1 = require(\"./hbs-utils\");\nconst read_only_array_1 = require(\"./read-only-array\");\n/**\n * RFC: https://github.com/emberjs/rfcs/pull/1070\n *\n * Criteria for inclusion in this list:\n *\n *   Any of:\n *     - begins with an uppercase letter\n *     - guaranteed to never be added to glimmer as a keyword (e.g.: globalThis)\n *\n *   And:\n *     - must not need new to invoke\n *     - must not require lifetime management (e.g.: setTimeout)\n *     - must not be a single-word lower-case API, because of potential collision with future new HTML elements\n *     - if the API is a function, the return value should not be a promise\n *     - must be one one of these lists:\n *        - https://tc39.es/ecma262/#sec-global-object\n *        - https://tc39.es/ecma262/#sec-function-properties-of-the-global-object\n *        - https://html.spec.whatwg.org/multipage/nav-history-apis.html#window\n *        - https://html.spec.whatwg.org/multipage/indices.html#all-interfaces\n *        - https://html.spec.whatwg.org/multipage/webappapis.html\n */\nexports.ALLOWED_GLOBALS = new Set([\n    // ////////////////\n    // namespaces\n    // ////////////////\n    //   TC39\n    'globalThis',\n    'Atomics',\n    'JSON',\n    'Math',\n    'Reflect',\n    //   WHATWG\n    'localStorage',\n    'sessionStorage',\n    // ////////////////\n    // functions / utilities\n    // ////////////////\n    //   TC39\n    'isNaN',\n    'isFinite',\n    'parseInt',\n    'parseFloat',\n    'decodeURI',\n    'decodeURIComponent',\n    'encodeURI',\n    'encodeURIComponent',\n    //   WHATWG\n    'postMessage',\n    'structuredClone',\n    // ////////////////\n    // new-less Constructors (still functions)\n    // ////////////////\n    //   TC39\n    'Array', // different behavior from (array)\n    'BigInt',\n    'Boolean',\n    'Date',\n    'Number',\n    'Object', // different behavior from (hash)\n    'String',\n    // ////////////////\n    // Values\n    // ////////////////\n    //   TC39\n    'Infinity',\n    'NaN',\n    //   WHATWG\n    'isSecureContext',\n]);\nclass ScopeLocals {\n    constructor(params) {\n        _ScopeLocals_instances.add(this);\n        _ScopeLocals_mapping.set(this, {});\n        _ScopeLocals_locals.set(this, []);\n        _ScopeLocals_params.set(this, void 0);\n        __classPrivateFieldSet(this, _ScopeLocals_params, params, \"f\");\n    }\n    get locals() {\n        return (0, read_only_array_1.readOnlyArray)(__classPrivateFieldGet(this, _ScopeLocals_locals, \"f\"), 'The only supported way to manipulate locals is via the jsutils API\\nhttps://github.com/emberjs/babel-plugin-ember-template-compilation#jsutils-manipulating-javascript-from-within-ast-transforms');\n    }\n    has(key) {\n        return key in __classPrivateFieldGet(this, _ScopeLocals_mapping, \"f\");\n    }\n    get(key) {\n        return __classPrivateFieldGet(this, _ScopeLocals_mapping, \"f\")[key];\n    }\n    isEmpty() {\n        return __classPrivateFieldGet(this, _ScopeLocals_locals, \"f\").length === 0;\n    }\n    entries() {\n        return Object.entries(__classPrivateFieldGet(this, _ScopeLocals_mapping, \"f\"));\n    }\n    add(hbsName, jsName) {\n        __classPrivateFieldGet(this, _ScopeLocals_mapping, \"f\")[hbsName] = jsName !== null && jsName !== void 0 ? jsName : hbsName;\n        if (!__classPrivateFieldGet(this, _ScopeLocals_locals, \"f\").includes(hbsName)) {\n            __classPrivateFieldGet(this, _ScopeLocals_locals, \"f\").push(hbsName);\n        }\n    }\n    // this AST transform discovers all possible upvars in HBS that refer to valid\n    // bindings in JS, and then depending on the mode adjusts our actual scope bag\n    // contents.\n    crawl() {\n        return (_env) => {\n            let seen;\n            return {\n                name: 'scope-locals-crawl',\n                visitor: {\n                    Template: {\n                        enter: () => {\n                            seen = new Set();\n                        },\n                        exit: (_node, _path) => {\n                            if (__classPrivateFieldGet(this, _ScopeLocals_params, \"f\").mode === 'implicit') {\n                                // all hbs upvars that have matching JS bindings go into the\n                                // scope\n                                for (let name of seen) {\n                                    if (name === 'this') {\n                                        if (__classPrivateFieldGet(this, _ScopeLocals_params, \"f\").mayUseLexicalThis) {\n                                            this.add(name);\n                                        }\n                                    }\n                                    else if (__classPrivateFieldGet(this, _ScopeLocals_instances, \"m\", _ScopeLocals_isInJsScope).call(this, name, __classPrivateFieldGet(this, _ScopeLocals_params, \"f\").jsPath)) {\n                                        this.add(name);\n                                    }\n                                }\n                            }\n                            else {\n                                // in explicit form, we might prune back the preexising scope in\n                                // the case where another AST transform has eliminated the use\n                                // of the original binding. But we don't add anything new. The\n                                // only way for new bindings to be introduced into scope is for\n                                // another AST transform to explicitly call the jsutils, which\n                                // calls our `add`.\n                                for (let name of Object.keys(__classPrivateFieldGet(this, _ScopeLocals_mapping, \"f\"))) {\n                                    if (!seen.has(name)) {\n                                        __classPrivateFieldGet(this, _ScopeLocals_locals, \"f\").splice(__classPrivateFieldGet(this, _ScopeLocals_locals, \"f\").indexOf(name), 1);\n                                        delete __classPrivateFieldGet(this, _ScopeLocals_mapping, \"f\")[name];\n                                    }\n                                }\n                            }\n                        },\n                    },\n                    PathExpression: (node, path) => {\n                        switch (node.head.type) {\n                            case 'ThisHead':\n                                if (!(0, hbs_utils_1.astNodeHasBinding)(path, 'this')) {\n                                    seen.add('this');\n                                }\n                                break;\n                            case 'VarHead': {\n                                const name = node.head.name;\n                                if (!(0, hbs_utils_1.astNodeHasBinding)(path, name)) {\n                                    seen.add(name);\n                                }\n                            }\n                        }\n                    },\n                    ElementNode: (node, path) => {\n                        const name = node.tag.split('.')[0];\n                        if (!(0, hbs_utils_1.astNodeHasBinding)(path, name)) {\n                            seen.add(name);\n                        }\n                    },\n                },\n            };\n        };\n    }\n}\nexports.ScopeLocals = ScopeLocals;\n_ScopeLocals_mapping = new WeakMap(), _ScopeLocals_locals = new WeakMap(), _ScopeLocals_params = new WeakMap(), _ScopeLocals_instances = new WeakSet(), _ScopeLocals_isInJsScope = function _ScopeLocals_isInJsScope(hbsName, jsPath) {\n    var _a;\n    let jsName = (_a = __classPrivateFieldGet(this, _ScopeLocals_mapping, \"f\")[hbsName]) !== null && _a !== void 0 ? _a : hbsName;\n    return exports.ALLOWED_GLOBALS.has(jsName) || jsPath.scope.getBinding(jsName);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGUtbG9jYWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2NvcGUtbG9jYWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7OztFQU9FOzs7Ozs7Ozs7Ozs7Ozs7QUFJRiwyQ0FBZ0Q7QUFDaEQsdURBQWtEO0FBRWxEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQW9CRztBQUNVLFFBQUEsZUFBZSxHQUFHLElBQUksR0FBRyxDQUFDO0lBQ3JDLG1CQUFtQjtJQUNuQixhQUFhO0lBQ2IsbUJBQW1CO0lBQ25CLFNBQVM7SUFDVCxZQUFZO0lBQ1osU0FBUztJQUNULE1BQU07SUFDTixNQUFNO0lBQ04sU0FBUztJQUNULFdBQVc7SUFDWCxjQUFjO0lBQ2QsZ0JBQWdCO0lBQ2hCLG1CQUFtQjtJQUNuQix3QkFBd0I7SUFDeEIsbUJBQW1CO0lBQ25CLFNBQVM7SUFDVCxPQUFPO0lBQ1AsVUFBVTtJQUNWLFVBQVU7SUFDVixZQUFZO0lBQ1osV0FBVztJQUNYLG9CQUFvQjtJQUNwQixXQUFXO0lBQ1gsb0JBQW9CO0lBQ3BCLFdBQVc7SUFDWCxhQUFhO0lBQ2IsaUJBQWlCO0lBQ2pCLG1CQUFtQjtJQUNuQiwwQ0FBMEM7SUFDMUMsbUJBQW1CO0lBQ25CLFNBQVM7SUFDVCxPQUFPLEVBQUUsa0NBQWtDO0lBQzNDLFFBQVE7SUFDUixTQUFTO0lBQ1QsTUFBTTtJQUNOLFFBQVE7SUFDUixRQUFRLEVBQUUsaUNBQWlDO0lBQzNDLFFBQVE7SUFDUixtQkFBbUI7SUFDbkIsU0FBUztJQUNULG1CQUFtQjtJQUNuQixTQUFTO0lBQ1QsVUFBVTtJQUNWLEtBQUs7SUFDTCxXQUFXO0lBQ1gsaUJBQWlCO0NBQ2xCLENBQUMsQ0FBQztBQXNCSCxNQUFhLFdBQVc7SUFDdEIsWUFBWSxNQUFjOztRQUkxQiwrQkFBbUMsRUFBRSxFQUFDO1FBQ3RDLDhCQUFvQixFQUFFLEVBQUM7UUFDdkIsc0NBQWdCO1FBTGQsdUJBQUEsSUFBSSx1QkFBVyxNQUFNLE1BQUEs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QUMsbUNBQUksT0FBTyxDQUFDO0lBQy9DLE9BQU8sdUJBQWUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDeEUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gIFRoaXMgY2xhc3MgZXhpc3RzIGJlY2F1c2U6XG4gICAtIGJlZm9yZSB0ZW1wbGF0ZSBjb21waWxhdGlvbiBzdGFydHMsIHdlIG5lZWQgdG8gcGFzcyBhIGBsb2NhbHNgIGFycmF5IHRvXG4gICAgIGVtYmVyLXRlbXBsYXRlLWNvbXBpbGVyXG4gICAtIHRoZSBKU1V0aWxzIEFQSSBjYW4gbXV0YXRlIHRoZSBzY29wZSBkdXJpbmcgdGVtcGxhdGUgY29tcGlsYXRpb25cbiAgIC0gdGhvc2Ugc2NvcGUgbXV0YXRpb25zIG5lZWQgdG8gdXBkYXRlIGJvdGggdGhlIG9yaWdpbmFsIGBsb2NhbHNgIGFycmF5IGFuZFxuICAgICBvdXIgb3duIG5hbWUgbWFwcGluZywga2VlcGluZyB0aGVtIGluIHN5bmMuXG4qL1xuXG5pbXBvcnQgdHlwZSB7IE5vZGVQYXRoIH0gZnJvbSAnQGJhYmVsL3RyYXZlcnNlJztcbmltcG9ydCB0eXBlIHsgQVNUUGx1Z2luRW52aXJvbm1lbnQsIE5vZGVWaXNpdG9yIH0gZnJvbSAnQGdsaW1tZXIvc3ludGF4JztcbmltcG9ydCB7IGFzdE5vZGVIYXNCaW5kaW5nIH0gZnJvbSAnLi9oYnMtdXRpbHMnO1xuaW1wb3J0IHsgcmVhZE9ubHlBcnJheSB9IGZyb20gJy4vcmVhZC1vbmx5LWFycmF5JztcblxuLyoqXG4gKiBSRkM6IGh0dHBzOi8vZ2l0aHViLmNvbS9lbWJlcmpzL3JmY3MvcHVsbC8xMDcwXG4gKlxuICogQ3JpdGVyaWEgZm9yIGluY2x1c2lvbiBpbiB0aGlzIGxpc3Q6XG4gKlxuICogICBBbnkgb2Y6XG4gKiAgICAgLSBiZWdpbnMgd2l0aCBhbiB1cHBlcmNhc2UgbGV0dGVyXG4gKiAgICAgLSBndWFyYW50ZWVkIHRvIG5ldmVyIGJlIGFkZGVkIHRvIGdsaW1tZXIgYXMgYSBrZXl3b3JkIChlLmcuOiBnbG9iYWxUaGlzKVxuICpcbiAqICAgQW5kOlxuICogICAgIC0gbXVzdCBub3QgbmVlZCBuZXcgdG8gaW52b2tlXG4gKiAgICAgLSBtdXN0IG5vdCByZXF1aXJlIGxpZmV0aW1lIG1hbmFnZW1lbnQgKGUuZy46IHNldFRpbWVvdXQpXG4gKiAgICAgLSBtdXN0IG5vdCBiZSBhIHNpbmdsZS13b3JkIGxvd2VyLWNhc2UgQVBJLCBiZWNhdXNlIG9mIHBvdGVudGlhbCBjb2xsaXNpb24gd2l0aCBmdXR1cmUgbmV3IEhUTUwgZWxlbWVudHNcbiAqICAgICAtIGlmIHRoZSBBUEkgaXMgYSBmdW5jdGlvbiwgdGhlIHJldHVybiB2YWx1ZSBzaG91bGQgbm90IGJlIGEgcHJvbWlzZVxuICogICAgIC0gbXVzdCBiZSBvbmUgb25lIG9mIHRoZXNlIGxpc3RzOlxuICogICAgICAgIC0gaHR0cHM6Ly90YzM5LmVzL2VjbWEyNjIvI3NlYy1nbG9iYWwtb2JqZWN0XG4gKiAgICAgICAgLSBodHRwczovL3RjMzkuZXMvZWNtYTI2Mi8jc2VjLWZ1bmN0aW9uLXByb3BlcnRpZXMtb2YtdGhlLWdsb2JhbC1vYmplY3RcbiAqICAgICAgICAtIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL25hdi1oaXN0b3J5LWFwaXMuaHRtbCN3aW5kb3dcbiAqICAgICAgICAtIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2luZGljZXMuaHRtbCNhbGwtaW50ZXJmYWNlc1xuICogICAgICAgIC0gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvd2ViYXBwYXBpcy5odG1sXG4gKi9cbmV4cG9ydCBjb25zdCBBTExPV0VEX0dMT0JBTFMgPSBuZXcgU2V0KFtcbiAgLy8gLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBuYW1lc3BhY2VzXG4gIC8vIC8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gICBUQzM5XG4gICdnbG9iYWxUaGlzJyxcbiAgJ0F0b21pY3MnLFxuICAnSlNPTicsXG4gICdNYXRoJyxcbiAgJ1JlZmxlY3QnLFxuICAvLyAgIFdIQVRXR1xuICAnbG9jYWxTdG9yYWdlJyxcbiAgJ3Nlc3Npb25TdG9yYWdlJyxcbiAgLy8gLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBmdW5jdGlvbnMgLyB1dGlsaXRpZXNcbiAgLy8gLy8vLy8vLy8vLy8vLy8vL1xuICAvLyAgIFRDMzlcbiAgJ2lzTmFOJyxcbiAgJ2lzRmluaXRlJyxcbiAgJ3BhcnNlSW50JyxcbiAgJ3BhcnNlRmxvYXQnLFxuICAnZGVjb2RlVVJJJyxcbiAgJ2RlY29kZVVSSUNvbXBvbmVudCcsXG4gICdlbmNvZGVVUkknLFxuICAnZW5jb2RlVVJJQ29tcG9uZW50JyxcbiAgLy8gICBXSEFUV0dcbiAgJ3Bvc3RNZXNzYWdlJyxcbiAgJ3N0cnVjdHVyZWRDbG9uZScsXG4gIC8vIC8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gbmV3LWxlc3MgQ29uc3RydWN0b3JzIChzdGlsbCBmdW5jdGlvbnMpXG4gIC8vIC8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gICBUQzM5XG4gICdBcnJheScsIC8vIGRpZmZlcmVudCBiZWhhdmlvciBmcm9tIChhcnJheSlcbiAgJ0JpZ0ludCcsXG4gICdCb29sZWFuJyxcbiAgJ0RhdGUnLFxuICAnTnVtYmVyJyxcbiAgJ09iamVjdCcsIC8vIGRpZmZlcmVudCBiZWhhdmlvciBmcm9tIChoYXNoKVxuICAnU3RyaW5nJyxcbiAgLy8gLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBWYWx1ZXNcbiAgLy8gLy8vLy8vLy8vLy8vLy8vL1xuICAvLyAgIFRDMzlcbiAgJ0luZmluaXR5JyxcbiAgJ05hTicsXG4gIC8vICAgV0hBVFdHXG4gICdpc1NlY3VyZUNvbnRleHQnLFxuXSk7XG5cbi8qXG4gICAgYG1vZGVgIHJlZmVycyB0byB0aGUgaW1wbGljaXQgYW5kIGV4cGxpY2l0IGZvcm1hdHMgZGVmaW5lZCBoZXJlOlxuXG4gICAgICBodHRwczovL2dpdGh1Yi5jb20vZW1iZXJqcy9yZmNzL2Jsb2IvOWZkNmNlYWMyNTU5YmVlMWMzM2FjZjBkNzgzNGU2NzUxMjVhNGYxNi90ZXh0LzA5MzEtdGVtcGxhdGUtY29tcGlsZXItYXBpLm1kI2V4cGxpY2l0LWZvcm1cbiAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9lbWJlcmpzL3JmY3MvYmxvYi85ZmQ2Y2VhYzI1NTliZWUxYzMzYWNmMGQ3ODM0ZTY3NTEyNWE0ZjE2L3RleHQvMDkzMS10ZW1wbGF0ZS1jb21waWxlci1hcGkubWQjaW1wbGljaXQtZm9ybVxuXG4gICAgVGhpcyBjbGFzcyBuZWVkcyB0byBrbm93IHRoZSBkaWZmZXJlbmNlIGJlY2F1c2UgaW4gaW1wbGljaXQgZm9ybWF0LCB1cHZhcnNcbiAgICBpbiBoYnMgYXJlIGF1dG9tYWdpY2FsbHkgY29ubmVjdGVkIHdpdGggb3V0ZXIgSmF2YXNjcmlwdCBiaW5kaW5ncywgYW5kIGluXG4gICAgZXhwbGljaXQgZm9ybSB0aGV5IGFyZSBub3QuXG4qL1xudHlwZSBQYXJhbXMgPVxuICB8IHtcbiAgICAgIG1vZGU6ICdleHBsaWNpdCc7XG4gICAgfVxuICB8IHtcbiAgICAgIG1vZGU6ICdpbXBsaWNpdCc7XG4gICAgICBqc1BhdGg6IE5vZGVQYXRoO1xuICAgICAgbWF5VXNlTGV4aWNhbFRoaXM6IGJvb2xlYW47XG4gICAgfTtcblxuZXhwb3J0IGNsYXNzIFNjb3BlTG9jYWxzIHtcbiAgY29uc3RydWN0b3IocGFyYW1zOiBQYXJhbXMpIHtcbiAgICB0aGlzLiNwYXJhbXMgPSBwYXJhbXM7XG4gIH1cblxuICAjbWFwcGluZzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAjbG9jYWxzOiBzdHJpbmdbXSA9IFtdO1xuICAjcGFyYW1zOiBQYXJhbXM7XG5cbiAgZ2V0IGxvY2FscygpIHtcbiAgICByZXR1cm4gcmVhZE9ubHlBcnJheShcbiAgICAgIHRoaXMuI2xvY2FscyxcbiAgICAgICdUaGUgb25seSBzdXBwb3J0ZWQgd2F5IHRvIG1hbmlwdWxhdGUgbG9jYWxzIGlzIHZpYSB0aGUganN1dGlscyBBUElcXG5odHRwczovL2dpdGh1Yi5jb20vZW1iZXJqcy9iYWJlbC1wbHVnaW4tZW1iZXItdGVtcGxhdGUtY29tcGlsYXRpb24janN1dGlscy1tYW5pcHVsYXRpbmctamF2YXNjcmlwdC1mcm9tLXdpdGhpbi1hc3QtdHJhbnNmb3JtcydcbiAgICApO1xuICB9XG5cbiAgaGFzKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGtleSBpbiB0aGlzLiNtYXBwaW5nO1xuICB9XG5cbiAgZ2V0KGtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy4jbWFwcGluZ1trZXldO1xuICB9XG5cbiAgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jbG9jYWxzLmxlbmd0aCA9PT0gMDtcbiAgfVxuXG4gIGVudHJpZXMoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHRoaXMuI21hcHBpbmcpO1xuICB9XG5cbiAgYWRkKGhic05hbWU6IHN0cmluZywganNOYW1lPzogc3RyaW5nKSB7XG4gICAgdGhpcy4jbWFwcGluZ1toYnNOYW1lXSA9IGpzTmFtZSA/PyBoYnNOYW1lO1xuICAgIGlmICghdGhpcy4jbG9jYWxzLmluY2x1ZGVzKGhic05hbWUpKSB7XG4gICAgICB0aGlzLiNsb2NhbHMucHVzaChoYnNOYW1lKTtcbiAgICB9XG4gIH1cblxuICAjaXNJbkpzU2NvcGUoaGJzTmFtZTogc3RyaW5nLCBqc1BhdGg6IE5vZGVQYXRoKSB7XG4gICAgbGV0IGpzTmFtZSA9IHRoaXMuI21hcHBpbmdbaGJzTmFtZV0gPz8gaGJzTmFtZTtcbiAgICByZXR1cm4gQUxMT1dFRF9HTE9CQUxTLmhhcyhqc05hbWUpIHx8IGpzUGF0aC5zY29wZS5nZXRCaW5kaW5nKGpzTmFtZSk7XG4gIH1cblxuICAvLyB0aGlzIEFTVCB0cmFuc2Zvcm0gZGlzY292ZXJzIGFsbCBwb3NzaWJsZSB1cHZhcnMgaW4gSEJTIHRoYXQgcmVmZXIgdG8gdmFsaWRcbiAgLy8gYmluZGluZ3MgaW4gSlMsIGFuZCB0aGVuIGRlcGVuZGluZyBvbiB0aGUgbW9kZSBhZGp1c3RzIG91ciBhY3R1YWwgc2NvcGUgYmFnXG4gIC8vIGNvbnRlbnRzLlxuICBjcmF3bCgpIHtcbiAgICByZXR1cm4gKF9lbnY6IEFTVFBsdWdpbkVudmlyb25tZW50KTogeyBuYW1lOiBzdHJpbmc7IHZpc2l0b3I6IE5vZGVWaXNpdG9yIH0gPT4ge1xuICAgICAgbGV0IHNlZW46IFNldDxzdHJpbmc+O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogJ3Njb3BlLWxvY2Fscy1jcmF3bCcsXG4gICAgICAgIHZpc2l0b3I6IHtcbiAgICAgICAgICBUZW1wbGF0ZToge1xuICAgICAgICAgICAgZW50ZXI6ICgpID0+IHtcbiAgICAgICAgICAgICAgc2VlbiA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBleGl0OiAoX25vZGUsIF9wYXRoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLiNwYXJhbXMubW9kZSA9PT0gJ2ltcGxpY2l0Jykge1xuICAgICAgICAgICAgICAgIC8vIGFsbCBoYnMgdXB2YXJzIHRoYXQgaGF2ZSBtYXRjaGluZyBKUyBiaW5kaW5ncyBnbyBpbnRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIHNjb3BlXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBvZiBzZWVuKSB7XG4gICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ3RoaXMnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLiNwYXJhbXMubWF5VXNlTGV4aWNhbFRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLiNpc0luSnNTY29wZShuYW1lLCB0aGlzLiNwYXJhbXMuanNQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChuYW1lKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaW4gZXhwbGljaXQgZm9ybSwgd2UgbWlnaHQgcHJ1bmUgYmFjayB0aGUgcHJlZXhpc2luZyBzY29wZSBpblxuICAgICAgICAgICAgICAgIC8vIHRoZSBjYXNlIHdoZXJlIGFub3RoZXIgQVNUIHRyYW5zZm9ybSBoYXMgZWxpbWluYXRlZCB0aGUgdXNlXG4gICAgICAgICAgICAgICAgLy8gb2YgdGhlIG9yaWdpbmFsIGJpbmRpbmcuIEJ1dCB3ZSBkb24ndCBhZGQgYW55dGhpbmcgbmV3LiBUaGVcbiAgICAgICAgICAgICAgICAvLyBvbmx5IHdheSBmb3IgbmV3IGJpbmRpbmdzIHRvIGJlIGludHJvZHVjZWQgaW50byBzY29wZSBpcyBmb3JcbiAgICAgICAgICAgICAgICAvLyBhbm90aGVyIEFTVCB0cmFuc2Zvcm0gdG8gZXhwbGljaXRseSBjYWxsIHRoZSBqc3V0aWxzLCB3aGljaFxuICAgICAgICAgICAgICAgIC8vIGNhbGxzIG91ciBgYWRkYC5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuYW1lIG9mIE9iamVjdC5rZXlzKHRoaXMuI21hcHBpbmcpKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoIXNlZW4uaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI2xvY2Fscy5zcGxpY2UodGhpcy4jbG9jYWxzLmluZGV4T2YobmFtZSksIDEpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy4jbWFwcGluZ1tuYW1lXTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBQYXRoRXhwcmVzc2lvbjogKG5vZGUsIHBhdGgpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAobm9kZS5oZWFkLnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAnVGhpc0hlYWQnOlxuICAgICAgICAgICAgICAgIGlmICghYXN0Tm9kZUhhc0JpbmRpbmcocGF0aCwgJ3RoaXMnKSkge1xuICAgICAgICAgICAgICAgICAgc2Vlbi5hZGQoJ3RoaXMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ1ZhckhlYWQnOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IG5vZGUuaGVhZC5uYW1lO1xuICAgICAgICAgICAgICAgIGlmICghYXN0Tm9kZUhhc0JpbmRpbmcocGF0aCwgbmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgIHNlZW4uYWRkKG5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgRWxlbWVudE5vZGU6IChub2RlLCBwYXRoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gbm9kZS50YWcuc3BsaXQoJy4nKVswXTtcbiAgICAgICAgICAgIGlmICghYXN0Tm9kZUhhc0JpbmRpbmcocGF0aCwgbmFtZSkpIHtcbiAgICAgICAgICAgICAgc2Vlbi5hZGQobmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfTtcbiAgfVxufVxuIl19","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExpressionParser = void 0;\nconst scope_locals_1 = require(\"./scope-locals\");\nclass ExpressionParser {\n    constructor(babel) {\n        this.babel = babel;\n    }\n    parseExpression(invokedName, path) {\n        switch (path.node.type) {\n            case 'ObjectExpression':\n                return this.parseObjectExpression(invokedName, path);\n            case 'ArrayExpression': {\n                return this.parseArrayExpression(invokedName, path);\n            }\n            case 'StringLiteral':\n            case 'BooleanLiteral':\n            case 'NumericLiteral':\n                return path.node.value;\n            default:\n                throw path.buildCodeFrameError(`${invokedName} can only accept static options but you passed ${JSON.stringify(path.node)}`);\n        }\n    }\n    parseArrayExpression(invokedName, path) {\n        return path.get('elements').map((element) => {\n            if (element.isSpreadElement()) {\n                throw element.buildCodeFrameError(`spread element is not allowed here`);\n            }\n            else if (element.isExpression()) {\n                return this.parseExpression(invokedName, element);\n            }\n            return null;\n        });\n    }\n    parseScope(invokedName, path) {\n        let body = undefined;\n        if (path.node.type === 'ObjectMethod') {\n            body = path.node.body;\n        }\n        else {\n            let { value } = path.node;\n            if (this.t.isObjectExpression(value)) {\n                throw path.buildCodeFrameError(`Passing an object as the \\`scope\\` property to inline templates is no longer supported. Please pass a function that returns an object expression instead.`);\n            }\n            if (this.t.isFunctionExpression(value) || this.t.isArrowFunctionExpression(value)) {\n                body = value.body;\n            }\n        }\n        let objExpression = undefined;\n        if ((body === null || body === void 0 ? void 0 : body.type) === 'ObjectExpression') {\n            objExpression = body;\n        }\n        else if ((body === null || body === void 0 ? void 0 : body.type) === 'BlockStatement') {\n            // SAFETY: We know that the body is a ReturnStatement because we're checking inside\n            let returnStatements = body.body.filter((statement) => statement.type === 'ReturnStatement');\n            if (returnStatements.length !== 1) {\n                throw new Error('Scope functions must have a single return statement which returns an object expression containing references to in-scope values');\n            }\n            objExpression = returnStatements[0].argument;\n        }\n        if ((objExpression === null || objExpression === void 0 ? void 0 : objExpression.type) !== 'ObjectExpression') {\n            throw path.buildCodeFrameError(`Scope objects for \\`${invokedName}\\` must be an object expression containing only references to in-scope values, or a function that returns an object expression containing only references to in-scope values`);\n        }\n        return objExpression.properties.reduce((res, prop) => {\n            if (this.t.isSpreadElement(prop)) {\n                throw path.buildCodeFrameError(`Scope objects for \\`${invokedName}\\` may not contain spread elements`);\n            }\n            if (this.t.isObjectMethod(prop)) {\n                throw path.buildCodeFrameError(`Scope objects for \\`${invokedName}\\` may not contain methods`);\n            }\n            let { key, value } = prop;\n            if (!this.t.isStringLiteral(key) && !this.t.isIdentifier(key)) {\n                throw path.buildCodeFrameError(`Scope objects for \\`${invokedName}\\` may only contain static property names`);\n            }\n            let propName = name(key);\n            switch (value.type) {\n                case 'Identifier':\n                    res.add(propName, value.name);\n                    break;\n                case 'ThisExpression':\n                    res.add(propName, 'this');\n                    break;\n                default:\n                    throw path.buildCodeFrameError(`Scope objects for \\`${invokedName}\\` may only contain direct references to in-scope values, e.g. { ${propName} } or { ${propName}: ${propName} }. Found ${value.type}`);\n            }\n            return res;\n        }, new scope_locals_1.ScopeLocals({ mode: 'explicit' }));\n    }\n    parseEval(invokedName, path) {\n        let body;\n        if (path.isObjectMethod()) {\n            body = path.get('body');\n        }\n        else if (path.isObjectProperty()) {\n            let value = path.get('value');\n            if (value.isFunctionExpression()) {\n                body = value.get('body');\n            }\n            else {\n                throw path.buildCodeFrameError(`unsupported syntax for \\`eval\\` parameter to \\`${invokedName}\\`. It must be an object method or a function.`);\n            }\n        }\n        else {\n            throw path.buildCodeFrameError(`unsupported syntax for \\`eval\\` parameter to \\`${invokedName}\\`. It must be an object method or a function.`);\n        }\n        let returnStatements = body\n            .get('body')\n            .filter((statement) => statement.isReturnStatement());\n        if (returnStatements.length !== 1) {\n            throw body.buildCodeFrameError('eval function must have a single return statement');\n        }\n        let returnExpression = returnStatements[0].get('argument');\n        if (!returnExpression.isCallExpression()) {\n            throw returnStatements[0].buildCodeFrameError('eval function must return `eval(arguments[0])`. Found non-CallExpression.');\n        }\n        let callee = returnExpression.get('callee');\n        if (!callee.isIdentifier() || callee.node.name !== 'eval') {\n            throw returnExpression.buildCodeFrameError('eval function must return `eval(arguments[0])`. Found callee is not eval.');\n        }\n        let args = returnExpression.get('arguments');\n        if (args.length !== 1) {\n            throw returnExpression.buildCodeFrameError('eval function must return `eval(arguments[0])`. Found incorrect number of arguments.');\n        }\n        let arg = args[0];\n        if (!arg.isMemberExpression()) {\n            throw arg.buildCodeFrameError('eval function must return `eval(arguments[0])`. Found argument is non-MemberExpression.');\n        }\n        let obj = arg.get('object');\n        if (!obj.isIdentifier() || obj.node.name !== 'arguments') {\n            throw obj.buildCodeFrameError('eval function must return `eval(arguments[0])`. Found wrong argument to eval.');\n        }\n        let prop = arg.get('property');\n        if (!prop.isNumericLiteral() || prop.node.value !== 0) {\n            throw prop.buildCodeFrameError('eval function must return `eval(arguments[0])`. Found wrong property.');\n        }\n        return { isEval: true };\n    }\n    parseObjectExpression(invokedName, path, shouldParseScope = false, shouldSupportRFC931 = false) {\n        let result = {};\n        path.get('properties').forEach((property) => {\n            let { node } = property;\n            if (this.t.isSpreadElement(node)) {\n                throw property.buildCodeFrameError(`${invokedName} does not allow spread element`);\n            }\n            if (node.computed) {\n                throw property.buildCodeFrameError(`${invokedName} can only accept static property names`);\n            }\n            let { key } = node;\n            if (!this.t.isIdentifier(key) && !this.t.isStringLiteral(key)) {\n                throw property.buildCodeFrameError(`${invokedName} can only accept static property names`);\n            }\n            let propertyName = name(key);\n            if (shouldParseScope && propertyName === 'scope') {\n                result.scope = this.parseScope(invokedName, property);\n            }\n            else if (shouldSupportRFC931 && propertyName === 'eval') {\n                result.eval = this.parseEval(invokedName, property);\n            }\n            else if (shouldSupportRFC931 && propertyName === 'component') {\n                result.component = property.get('value');\n            }\n            else {\n                if (this.t.isObjectMethod(node)) {\n                    throw property.buildCodeFrameError(`${invokedName} does not accept a method for ${propertyName}`);\n                }\n                let valuePath = property.get('value');\n                if (!valuePath.isExpression()) {\n                    throw valuePath.buildCodeFrameError(`must be an expression`);\n                }\n                result[propertyName] = this.parseExpression(invokedName, valuePath);\n            }\n        });\n        return result;\n    }\n    get t() {\n        return this.babel.types;\n    }\n}\nexports.ExpressionParser = ExpressionParser;\nfunction name(node) {\n    if (node.type === 'StringLiteral') {\n        return node.value;\n    }\n    else {\n        return node.name;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwcmVzc2lvbi1wYXJzZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJleHByZXNzaW9uLXBhcnNlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFHQSxpREFBNkM7QUFFN0MsTUFBYSxnQkFBZ0I7SUFDM0IsWUFBb0IsS0FBbUI7UUFBbkIsVUFBSyxHQUFMLEtBQUssQ0FBYztJQUFHLENBQUM7SUFFM0MsZUFBZSxDQUFDLFdBQW1CLEVBQUUsSUFBNEI7UUFDL0QsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3ZCLEtBQUssa0JBQWtCO2dCQUNyQixPQUFPLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxXQUFXLEVBQUUsSUFBb0MsQ0FBQyxDQUFDO1lBQ3ZGLEtBQUssaUJBQWlCLENBQUMsQ0FBQyxDQUFDO2dCQUN2QixPQUFPLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxXQUFXLEVBQUUsSUFBbUMsQ0FBQyxDQUFDO1lBQ3JGLENBQUM7WUFDRCxLQUFLLGVBQWUsQ0FBQztZQUNyQixLQUFLLGdCQUFnQixDQUFDO1lBQ3RCLEtBQUssZ0JBQWdCO2dCQUNuQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ3pCO2dCQUNFLE1BQU0sSUFBSSxDQUFDLG1CQUFtQixDQUM1QixHQUFHLFdBQVcsa0RBQWtELElBQUksQ0FBQyxTQUFTLENBQzVFLElBQUksQ0FBQyxJQUFJLENBQ1YsRUFBRSxDQUNKLENBQUM7UUFDTixDQUFDO0lBQ0gsQ0FBQztJQUVELG9CQUFvQixDQUFDLFdBQW1CLEVBQUUsSUFBaUM7UUFDekUsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFO1lBQzFDLElBQUksT0FBTyxDQUFDLGVBQWUsRUFBRSxFQUFFLENBQUM7Z0JBQzlCLE1BQU0sT0FBTyxDQUFDLG1CQUFtQixDQUFDLG9DQUFvQyxDQUFDLENB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dmVyc2UnO1xuaW1wb3J0IHR5cGUgKiBhcyBCYWJlbCBmcm9tICdAYmFiZWwvY29yZSc7XG5pbXBvcnQgdHlwZSB7IHR5cGVzIGFzIHQgfSBmcm9tICdAYmFiZWwvY29yZSc7XG5pbXBvcnQgeyBTY29wZUxvY2FscyB9IGZyb20gJy4vc2NvcGUtbG9jYWxzJztcblxuZXhwb3J0IGNsYXNzIEV4cHJlc3Npb25QYXJzZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJhYmVsOiB0eXBlb2YgQmFiZWwpIHt9XG5cbiAgcGFyc2VFeHByZXNzaW9uKGludm9rZWROYW1lOiBzdHJpbmcsIHBhdGg6IE5vZGVQYXRoPHQuRXhwcmVzc2lvbj4pOiB1bmtub3duIHtcbiAgICBzd2l0Y2ggKHBhdGgubm9kZS50eXBlKSB7XG4gICAgICBjYXNlICdPYmplY3RFeHByZXNzaW9uJzpcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VPYmplY3RFeHByZXNzaW9uKGludm9rZWROYW1lLCBwYXRoIGFzIE5vZGVQYXRoPHQuT2JqZWN0RXhwcmVzc2lvbj4pO1xuICAgICAgY2FzZSAnQXJyYXlFeHByZXNzaW9uJzoge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUFycmF5RXhwcmVzc2lvbihpbnZva2VkTmFtZSwgcGF0aCBhcyBOb2RlUGF0aDx0LkFycmF5RXhwcmVzc2lvbj4pO1xuICAgICAgfVxuICAgICAgY2FzZSAnU3RyaW5nTGl0ZXJhbCc6XG4gICAgICBjYXNlICdCb29sZWFuTGl0ZXJhbCc6XG4gICAgICBjYXNlICdOdW1lcmljTGl0ZXJhbCc6XG4gICAgICAgIHJldHVybiBwYXRoLm5vZGUudmFsdWU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBwYXRoLmJ1aWxkQ29kZUZyYW1lRXJyb3IoXG4gICAgICAgICAgYCR7aW52b2tlZE5hbWV9IGNhbiBvbmx5IGFjY2VwdCBzdGF0aWMgb3B0aW9ucyBidXQgeW91IHBhc3NlZCAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAgcGF0aC5ub2RlXG4gICAgICAgICAgKX1gXG4gICAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcGFyc2VBcnJheUV4cHJlc3Npb24oaW52b2tlZE5hbWU6IHN0cmluZywgcGF0aDogTm9kZVBhdGg8dC5BcnJheUV4cHJlc3Npb24+KSB7XG4gICAgcmV0dXJuIHBhdGguZ2V0KCdlbGVtZW50cycpLm1hcCgoZWxlbWVudCkgPT4ge1xuICAgICAgaWYgKGVsZW1lbnQuaXNTcHJlYWRFbGVtZW50KCkpIHtcbiAgICAgICAgdGhyb3cgZWxlbWVudC5idWlsZENvZGVGcmFtZUVycm9yKGBzcHJlYWQgZWxlbWVudCBpcyBub3QgYWxsb3dlZCBoZXJlYCk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuaXNFeHByZXNzaW9uKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFeHByZXNzaW9uKGludm9rZWROYW1lLCBlbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0pO1xuICB9XG5cbiAgcGFyc2VTY29wZShpbnZva2VkTmFtZTogc3RyaW5nLCBwYXRoOiBOb2RlUGF0aDx0Lk9iamVjdFByb3BlcnR5IHwgdC5PYmplY3RNZXRob2Q+KTogU2NvcGVMb2NhbHMge1xuICAgIGxldCBib2R5OiB0LkJsb2NrU3RhdGVtZW50IHwgdC5FeHByZXNzaW9uIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKHBhdGgubm9kZS50eXBlID09PSAnT2JqZWN0TWV0aG9kJykge1xuICAgICAgYm9keSA9IHBhdGgubm9kZS5ib2R5O1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgeyB2YWx1ZSB9ID0gcGF0aC5ub2RlO1xuICAgICAgaWYgKHRoaXMudC5pc09iamVjdEV4cHJlc3Npb24odmFsdWUpKSB7XG4gICAgICAgIHRocm93IHBhdGguYnVpbGRDb2RlRnJhbWVFcnJvcihcbiAgICAgICAgICBgUGFzc2luZyBhbiBvYmplY3QgYXMgdGhlIFxcYHNjb3BlXFxgIHByb3BlcnR5IHRvIGlubGluZSB0ZW1wbGF0ZXMgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC4gUGxlYXNlIHBhc3MgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gb2JqZWN0IGV4cHJlc3Npb24gaW5zdGVhZC5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy50LmlzRnVuY3Rpb25FeHByZXNzaW9uKHZhbHVlKSB8fCB0aGlzLnQuaXNBcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbih2YWx1ZSkpIHtcbiAgICAgICAgYm9keSA9IHZhbHVlLmJvZHk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IG9iakV4cHJlc3Npb246IHQuRXhwcmVzc2lvbiB8IHVuZGVmaW5lZCB8IG51bGwgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAoYm9keT8udHlwZSA9PT0gJ09iamVjdEV4cHJlc3Npb24nKSB7XG4gICAgICBvYmpFeHByZXNzaW9uID0gYm9keTtcbiAgICB9IGVsc2UgaWYgKGJvZHk/LnR5cGUgPT09ICdCbG9ja1N0YXRlbWVudCcpIHtcbiAgICAgIC8vIFNBRkVUWTogV2Uga25vdyB0aGF0IHRoZSBib2R5IGlzIGEgUmV0dXJuU3RhdGVtZW50IGJlY2F1c2Ugd2UncmUgY2hlY2tpbmcgaW5zaWRlXG4gICAgICBsZXQgcmV0dXJuU3RhdGVtZW50cyA9IGJvZHkuYm9keS5maWx0ZXIoXG4gICAgICAgIChzdGF0ZW1lbnQpID0+IHN0YXRlbWVudC50eXBlID09PSAnUmV0dXJuU3RhdGVtZW50J1xuICAgICAgKSBhcyBCYWJlbC50eXBlcy5SZXR1cm5TdGF0ZW1lbnRbXTtcblxuICAgICAgaWYgKHJldHVyblN0YXRlbWVudHMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnU2NvcGUgZnVuY3Rpb25zIG11c3QgaGF2ZSBhIHNpbmdsZSByZXR1cm4gc3RhdGVtZW50IHdoaWNoIHJldHVybnMgYW4gb2JqZWN0IGV4cHJlc3Npb24gY29udGFpbmluZyByZWZlcmVuY2VzIHRvIGluLXNjb3BlIHZhbHVlcydcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgb2JqRXhwcmVzc2lvbiA9IHJldHVyblN0YXRlbWVudHNbMF0uYXJndW1lbnQ7XG4gICAgfVxuXG4gICAgaWYgKG9iakV4cHJlc3Npb24/LnR5cGUgIT09ICdPYmplY3RFeHByZXNzaW9uJykge1xuICAgICAgdGhyb3cgcGF0aC5idWlsZENvZGVGcmFtZUVycm9yKFxuICAgICAgICBgU2NvcGUgb2JqZWN0cyBmb3IgXFxgJHtpbnZva2VkTmFtZX1cXGAgbXVzdCBiZSBhbiBvYmplY3QgZXhwcmVzc2lvbiBjb250YWluaW5nIG9ubHkgcmVmZXJlbmNlcyB0byBpbi1zY29wZSB2YWx1ZXMsIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIG9iamVjdCBleHByZXNzaW9uIGNvbnRhaW5pbmcgb25seSByZWZlcmVuY2VzIHRvIGluLXNjb3BlIHZhbHVlc2BcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iakV4cHJlc3Npb24ucHJvcGVydGllcy5yZWR1Y2UoXG4gICAgICAocmVzLCBwcm9wKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnQuaXNTcHJlYWRFbGVtZW50KHByb3ApKSB7XG4gICAgICAgICAgdGhyb3cgcGF0aC5idWlsZENvZGVGcmFtZUVycm9yKFxuICAgICAgICAgICAgYFNjb3BlIG9iamVjdHMgZm9yIFxcYCR7aW52b2tlZE5hbWV9XFxgIG1heSBub3QgY29udGFpbiBzcHJlYWQgZWxlbWVudHNgXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50LmlzT2JqZWN0TWV0aG9kKHByb3ApKSB7XG4gICAgICAgICAgdGhyb3cgcGF0aC5idWlsZENvZGVGcmFtZUVycm9yKFxuICAgICAgICAgICAgYFNjb3BlIG9iamVjdHMgZm9yIFxcYCR7aW52b2tlZE5hbWV9XFxgIG1heSBub3QgY29udGFpbiBtZXRob2RzYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgeyBrZXksIHZhbHVlIH0gPSBwcm9wO1xuICAgICAgICBpZiAoIXRoaXMudC5pc1N0cmluZ0xpdGVyYWwoa2V5KSAmJiAhdGhpcy50LmlzSWRlbnRpZmllcihrZXkpKSB7XG4gICAgICAgICAgdGhyb3cgcGF0aC5idWlsZENvZGVGcmFtZUVycm9yKFxuICAgICAgICAgICAgYFNjb3BlIG9iamVjdHMgZm9yIFxcYCR7aW52b2tlZE5hbWV9XFxgIG1heSBvbmx5IGNvbnRhaW4gc3RhdGljIHByb3BlcnR5IG5hbWVzYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcHJvcE5hbWUgPSBuYW1lKGtleSk7XG5cbiAgICAgICAgc3dpdGNoICh2YWx1ZS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAnSWRlbnRpZmllcic6XG4gICAgICAgICAgICByZXMuYWRkKHByb3BOYW1lLCB2YWx1ZS5uYW1lKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ1RoaXNFeHByZXNzaW9uJzpcbiAgICAgICAgICAgIHJlcy5hZGQocHJvcE5hbWUsICd0aGlzJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgcGF0aC5idWlsZENvZGVGcmFtZUVycm9yKFxuICAgICAgICAgICAgICBgU2NvcGUgb2JqZWN0cyBmb3IgXFxgJHtpbnZva2VkTmFtZX1cXGAgbWF5IG9ubHkgY29udGFpbiBkaXJlY3QgcmVmZXJlbmNlcyB0byBpbi1zY29wZSB2YWx1ZXMsIGUuZy4geyAke3Byb3BOYW1lfSB9IG9yIHsgJHtwcm9wTmFtZX06ICR7cHJvcE5hbWV9IH0uIEZvdW5kICR7dmFsdWUudHlwZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9LFxuICAgICAgbmV3IFNjb3BlTG9jYWxzKHsgbW9kZTogJ2V4cGxpY2l0JyB9KVxuICAgICk7XG4gIH1cblxuICBwYXJzZUV2YWwoXG4gICAgaW52b2tlZE5hbWU6IHN0cmluZyxcbiAgICBwYXRoOiBOb2RlUGF0aDx0Lk9iamVjdFByb3BlcnR5IHwgdC5PYmplY3RNZXRob2Q+XG4gICk6IHsgaXNFdmFsOiB0cnVlIH0ge1xuICAgIGxldCBib2R5OiBOb2RlUGF0aDx0LkJsb2NrU3RhdGVtZW50PjtcblxuICAgIGlmIChwYXRoLmlzT2JqZWN0TWV0aG9kKCkpIHtcbiAgICAgIGJvZHkgPSBwYXRoLmdldCgnYm9keScpO1xuICAgIH0gZWxzZSBpZiAocGF0aC5pc09iamVjdFByb3BlcnR5KCkpIHtcbiAgICAgIGxldCB2YWx1ZSA9IHBhdGguZ2V0KCd2YWx1ZScpO1xuICAgICAgaWYgKHZhbHVlLmlzRnVuY3Rpb25FeHByZXNzaW9uKCkpIHtcbiAgICAgICAgYm9keSA9IHZhbHVlLmdldCgnYm9keScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgcGF0aC5idWlsZENvZGVGcmFtZUVycm9yKFxuICAgICAgICAgIGB1bnN1cHBvcnRlZCBzeW50YXggZm9yIFxcYGV2YWxcXGAgcGFyYW1ldGVyIHRvIFxcYCR7aW52b2tlZE5hbWV9XFxgLiBJdCBtdXN0IGJlIGFuIG9iamVjdCBtZXRob2Qgb3IgYSBmdW5jdGlvbi5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IHBhdGguYnVpbGRDb2RlRnJhbWVFcnJvcihcbiAgICAgICAgYHVuc3VwcG9ydGVkIHN5bnRheCBmb3IgXFxgZXZhbFxcYCBwYXJhbWV0ZXIgdG8gXFxgJHtpbnZva2VkTmFtZX1cXGAuIEl0IG11c3QgYmUgYW4gb2JqZWN0IG1ldGhvZCBvciBhIGZ1bmN0aW9uLmBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IHJldHVyblN0YXRlbWVudHMgPSBib2R5XG4gICAgICAuZ2V0KCdib2R5JylcbiAgICAgIC5maWx0ZXIoKHN0YXRlbWVudCkgPT4gc3RhdGVtZW50LmlzUmV0dXJuU3RhdGVtZW50KCkpIGFzIE5vZGVQYXRoPHQuUmV0dXJuU3RhdGVtZW50PltdO1xuXG4gICAgaWYgKHJldHVyblN0YXRlbWVudHMubGVuZ3RoICE9PSAxKSB7XG4gICAgICB0aHJvdyBib2R5LmJ1aWxkQ29kZUZyYW1lRXJyb3IoJ2V2YWwgZnVuY3Rpb24gbXVzdCBoYXZlIGEgc2luZ2xlIHJldHVybiBzdGF0ZW1lbnQnKTtcbiAgICB9XG5cbiAgICBsZXQgcmV0dXJuRXhwcmVzc2lvbiA9IHJldHVyblN0YXRlbWVudHNbMF0uZ2V0KCdhcmd1bWVudCcpO1xuXG4gICAgaWYgKCFyZXR1cm5FeHByZXNzaW9uLmlzQ2FsbEV4cHJlc3Npb24oKSkge1xuICAgICAgdGhyb3cgcmV0dXJuU3RhdGVtZW50c1swXS5idWlsZENvZGVGcmFtZUVycm9yKFxuICAgICAgICAnZXZhbCBmdW5jdGlvbiBtdXN0IHJldHVybiBgZXZhbChhcmd1bWVudHNbMF0pYC4gRm91bmQgbm9uLUNhbGxFeHByZXNzaW9uLidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IGNhbGxlZSA9IHJldHVybkV4cHJlc3Npb24uZ2V0KCdjYWxsZWUnKTtcbiAgICBpZiAoIWNhbGxlZS5pc0lkZW50aWZpZXIoKSB8fCBjYWxsZWUubm9kZS5uYW1lICE9PSAnZXZhbCcpIHtcbiAgICAgIHRocm93IHJldHVybkV4cHJlc3Npb24uYnVpbGRDb2RlRnJhbWVFcnJvcihcbiAgICAgICAgJ2V2YWwgZnVuY3Rpb24gbXVzdCByZXR1cm4gYGV2YWwoYXJndW1lbnRzWzBdKWAuIEZvdW5kIGNhbGxlZSBpcyBub3QgZXZhbC4nXG4gICAgICApO1xuICAgIH1cblxuICAgIGxldCBhcmdzID0gcmV0dXJuRXhwcmVzc2lvbi5nZXQoJ2FyZ3VtZW50cycpO1xuICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3cgcmV0dXJuRXhwcmVzc2lvbi5idWlsZENvZGVGcmFtZUVycm9yKFxuICAgICAgICAnZXZhbCBmdW5jdGlvbiBtdXN0IHJldHVybiBgZXZhbChhcmd1bWVudHNbMF0pYC4gRm91bmQgaW5jb3JyZWN0IG51bWJlciBvZiBhcmd1bWVudHMuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgbGV0IGFyZyA9IGFyZ3NbMF07XG4gICAgaWYgKCFhcmcuaXNNZW1iZXJFeHByZXNzaW9uKCkpIHtcbiAgICAgIHRocm93IGFyZy5idWlsZENvZGVGcmFtZUVycm9yKFxuICAgICAgICAnZXZhbCBmdW5jdGlvbiBtdXN0IHJldHVybiBgZXZhbChhcmd1bWVudHNbMF0pYC4gRm91bmQgYXJndW1lbnQgaXMgbm9uLU1lbWJlckV4cHJlc3Npb24uJ1xuICAgICAgKTtcbiAgICB9XG4gICAgbGV0IG9iaiA9IGFyZy5nZXQoJ29iamVjdCcpO1xuICAgIGlmICghb2JqLmlzSWRlbnRpZmllcigpIHx8IG9iai5ub2RlLm5hbWUgIT09ICdhcmd1bWVudHMnKSB7XG4gICAgICB0aHJvdyBvYmouYnVpbGRDb2RlRnJhbWVFcnJvcihcbiAgICAgICAgJ2V2YWwgZnVuY3Rpb24gbXVzdCByZXR1cm4gYGV2YWwoYXJndW1lbnRzWzBdKWAuIEZvdW5kIHdyb25nIGFyZ3VtZW50IHRvIGV2YWwuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgbGV0IHByb3AgPSBhcmcuZ2V0KCdwcm9wZXJ0eScpO1xuICAgIGlmICghcHJvcC5pc051bWVyaWNMaXRlcmFsKCkgfHwgcHJvcC5ub2RlLnZhbHVlICE9PSAwKSB7XG4gICAgICB0aHJvdyBwcm9wLmJ1aWxkQ29kZUZyYW1lRXJyb3IoXG4gICAgICAgICdldmFsIGZ1bmN0aW9uIG11c3QgcmV0dXJuIGBldmFsKGFyZ3VtZW50c1swXSlgLiBGb3VuZCB3cm9uZyBwcm9wZXJ0eS4nXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4geyBpc0V2YWw6IHRydWUgfTtcbiAgfVxuXG4gIHBhcnNlT2JqZWN0RXhwcmVzc2lvbihcbiAgICBpbnZva2VkTmFtZTogc3RyaW5nLFxuICAgIHBhdGg6IE5vZGVQYXRoPHQuT2JqZWN0RXhwcmVzc2lvbj4sXG4gICAgc2hvdWxkUGFyc2VTY29wZSA9IGZhbHNlLFxuICAgIHNob3VsZFN1cHBvcnRSRkM5MzEgPSBmYWxzZVxuICApIHtcbiAgICBsZXQgcmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHt9O1xuXG4gICAgcGF0aC5nZXQoJ3Byb3BlcnRpZXMnKS5mb3JFYWNoKChwcm9wZXJ0eSkgPT4ge1xuICAgICAgbGV0IHsgbm9kZSB9ID0gcHJvcGVydHk7XG4gICAgICBpZiAodGhpcy50LmlzU3ByZWFkRWxlbWVudChub2RlKSkge1xuICAgICAgICB0aHJvdyBwcm9wZXJ0eS5idWlsZENvZGVGcmFtZUVycm9yKGAke2ludm9rZWROYW1lfSBkb2VzIG5vdCBhbGxvdyBzcHJlYWQgZWxlbWVudGApO1xuICAgICAgfVxuXG4gICAgICBpZiAobm9kZS5jb21wdXRlZCkge1xuICAgICAgICB0aHJvdyBwcm9wZXJ0eS5idWlsZENvZGVGcmFtZUVycm9yKGAke2ludm9rZWROYW1lfSBjYW4gb25seSBhY2NlcHQgc3RhdGljIHByb3BlcnR5IG5hbWVzYCk7XG4gICAgICB9XG5cbiAgICAgIGxldCB7IGtleSB9ID0gbm9kZTtcbiAgICAgIGlmICghdGhpcy50LmlzSWRlbnRpZmllcihrZXkpICYmICF0aGlzLnQuaXNTdHJpbmdMaXRlcmFsKGtleSkpIHtcbiAgICAgICAgdGhyb3cgcHJvcGVydHkuYnVpbGRDb2RlRnJhbWVFcnJvcihgJHtpbnZva2VkTmFtZX0gY2FuIG9ubHkgYWNjZXB0IHN0YXRpYyBwcm9wZXJ0eSBuYW1lc2ApO1xuICAgICAgfVxuXG4gICAgICBsZXQgcHJvcGVydHlOYW1lID0gbmFtZShrZXkpO1xuXG4gICAgICBpZiAoc2hvdWxkUGFyc2VTY29wZSAmJiBwcm9wZXJ0eU5hbWUgPT09ICdzY29wZScpIHtcbiAgICAgICAgcmVzdWx0LnNjb3BlID0gdGhpcy5wYXJzZVNjb3BlKGludm9rZWROYW1lLCBwcm9wZXJ0eSBhcyBOb2RlUGF0aDx0eXBlb2Ygbm9kZT4pO1xuICAgICAgfSBlbHNlIGlmIChzaG91bGRTdXBwb3J0UkZDOTMxICYmIHByb3BlcnR5TmFtZSA9PT0gJ2V2YWwnKSB7XG4gICAgICAgIHJlc3VsdC5ldmFsID0gdGhpcy5wYXJzZUV2YWwoaW52b2tlZE5hbWUsIHByb3BlcnR5IGFzIE5vZGVQYXRoPHR5cGVvZiBub2RlPik7XG4gICAgICB9IGVsc2UgaWYgKHNob3VsZFN1cHBvcnRSRkM5MzEgJiYgcHJvcGVydHlOYW1lID09PSAnY29tcG9uZW50Jykge1xuICAgICAgICByZXN1bHQuY29tcG9uZW50ID0gKHByb3BlcnR5IGFzIE5vZGVQYXRoPHR5cGVvZiBub2RlPikuZ2V0KCd2YWx1ZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMudC5pc09iamVjdE1ldGhvZChub2RlKSkge1xuICAgICAgICAgIHRocm93IHByb3BlcnR5LmJ1aWxkQ29kZUZyYW1lRXJyb3IoXG4gICAgICAgICAgICBgJHtpbnZva2VkTmFtZX0gZG9lcyBub3QgYWNjZXB0IGEgbWV0aG9kIGZvciAke3Byb3BlcnR5TmFtZX1gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdmFsdWVQYXRoID0gKHByb3BlcnR5IGFzIE5vZGVQYXRoPHR5cGVvZiBub2RlPikuZ2V0KCd2YWx1ZScpO1xuICAgICAgICBpZiAoIXZhbHVlUGF0aC5pc0V4cHJlc3Npb24oKSkge1xuICAgICAgICAgIHRocm93IHZhbHVlUGF0aC5idWlsZENvZGVGcmFtZUVycm9yKGBtdXN0IGJlIGFuIGV4cHJlc3Npb25gKTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRbcHJvcGVydHlOYW1lXSA9IHRoaXMucGFyc2VFeHByZXNzaW9uKGludm9rZWROYW1lLCB2YWx1ZVBhdGgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmFiZWwudHlwZXM7XG4gIH1cbn1cblxuZnVuY3Rpb24gbmFtZShub2RlOiB0LlN0cmluZ0xpdGVyYWwgfCB0LklkZW50aWZpZXIpOiBzdHJpbmcge1xuICBpZiAobm9kZS50eXBlID09PSAnU3RyaW5nTGl0ZXJhbCcpIHtcbiAgICByZXR1cm4gbm9kZS52YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbm9kZS5uYW1lO1xuICB9XG59XG4iXX0=","\"use strict\";\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _JSUtils_instances, _JSUtils_babel, _JSUtils_state, _JSUtils_template, _JSUtils_addedBinding, _JSUtils_importer, _JSUtils_emitStatement, _JSUtils_parseExpression, _ExpressionContext_importer, _ExpressionContext_target;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JSUtils = void 0;\nconst hbs_utils_1 = require(\"./hbs-utils\");\n// This exists to give AST plugins a controlled interface for influencing the\n// surrounding Javascript scope\nclass JSUtils {\n    constructor(babel, state, template, addedBinding, importer) {\n        _JSUtils_instances.add(this);\n        _JSUtils_babel.set(this, void 0);\n        _JSUtils_state.set(this, void 0);\n        _JSUtils_template.set(this, void 0);\n        _JSUtils_addedBinding.set(this, void 0);\n        _JSUtils_importer.set(this, void 0);\n        __classPrivateFieldSet(this, _JSUtils_babel, babel, \"f\");\n        __classPrivateFieldSet(this, _JSUtils_state, state, \"f\");\n        __classPrivateFieldSet(this, _JSUtils_template, template, \"f\");\n        __classPrivateFieldSet(this, _JSUtils_addedBinding, addedBinding, \"f\");\n        __classPrivateFieldSet(this, _JSUtils_importer, importer, \"f\");\n        if (!__classPrivateFieldGet(this, _JSUtils_state, \"f\").lastInsertedPath) {\n            let target;\n            for (let statement of __classPrivateFieldGet(this, _JSUtils_state, \"f\").program.get('body')) {\n                if (!statement.isImportDeclaration()) {\n                    break;\n                }\n                target = statement;\n            }\n            if (target) {\n                __classPrivateFieldGet(this, _JSUtils_state, \"f\").lastInsertedPath = target;\n            }\n        }\n    }\n    /**\n     * Create a new binding that you can use in your template, initialized with\n     * the given Javascript expression.\n     *\n     * @param { Expression } expression A javascript expression whose value will\n     * initialize your new binding. See docs on the Expression type for details.\n     * @param target The location within your template where the binding will be\n     * used. This matters so we can avoid naming collisions.\n     * @param opts.nameHint Optionally, provide a descriptive name for your new\n     * binding. We will mangle this name as needed to avoid collisions, but\n     * picking a good name here can aid in debugging.\n     *\n     * @return The name you can use in your template to access the binding.\n     */\n    bindExpression(expression, target, opts) {\n        var _a;\n        let name = unusedNameLike((_a = opts === null || opts === void 0 ? void 0 : opts.nameHint) !== null && _a !== void 0 ? _a : 'a', (candidate) => __classPrivateFieldGet(this, _JSUtils_template, \"f\").scope.hasBinding(candidate) || (0, hbs_utils_1.astNodeHasBinding)(target, candidate));\n        let t = __classPrivateFieldGet(this, _JSUtils_babel, \"f\").types;\n        let declaration = __classPrivateFieldGet(this, _JSUtils_instances, \"m\", _JSUtils_emitStatement).call(this, t.variableDeclaration('let', [\n            t.variableDeclarator(t.identifier(name), __classPrivateFieldGet(this, _JSUtils_instances, \"m\", _JSUtils_parseExpression).call(this, __classPrivateFieldGet(this, _JSUtils_state, \"f\").program, expression)),\n        ]));\n        declaration.scope.registerBinding('let', declaration.get('declarations.0'));\n        __classPrivateFieldGet(this, _JSUtils_addedBinding, \"f\").call(this, name);\n        return name;\n    }\n    /**\n     * Gain access to an imported value within your template.\n     *\n     * @param moduleSpecifier The path to import from.\n     * @param exportedName The named export you wish to access, or \"default\" for\n     * the default export, or \"*\" for the namespace export.\n     * @param target The location within your template where the binding will be\n     * used. This matters so we can avoid naming collisions.\n     * @param opts.nameHint Optionally, provide a descriptive name for your new\n     * binding. We will mangle this name as needed to avoid collisions, but\n     * picking a good name here can aid in debugging.\n     *\n     * @return The name you can use in your template to access the imported value.\n     */\n    bindImport(moduleSpecifier, exportedName, target, opts) {\n        // This will discover or create the local name for accessing the given import.\n        let importedIdentifier = __classPrivateFieldGet(this, _JSUtils_importer, \"f\").import(__classPrivateFieldGet(this, _JSUtils_template, \"f\"), moduleSpecifier, exportedName, opts === null || opts === void 0 ? void 0 : opts.nameHint);\n        // Simple base case: the JS name that's available is also unused at our spot\n        // in HBS, so just use it.\n        if (!(0, hbs_utils_1.astNodeHasBinding)(target, importedIdentifier.name)) {\n            __classPrivateFieldGet(this, _JSUtils_addedBinding, \"f\").call(this, importedIdentifier.name);\n            return importedIdentifier.name;\n        }\n        // The importedIdentifier that we have in Javascript is not usable within\n        // our HBS because it's shadowed by a block param. So we will introduce a\n        // second name via a variable declaration.\n        //\n        // The reason we don't force the import itself to have this name is that\n        // we might be re-using an existing import, and we don't want to go\n        // rewriting all of its callsites that are unrelated to us.\n        let identifier = unusedNameLike(importedIdentifier.name, (candidate) => __classPrivateFieldGet(this, _JSUtils_template, \"f\").scope.hasBinding(candidate) || (0, hbs_utils_1.astNodeHasBinding)(target, candidate));\n        let t = __classPrivateFieldGet(this, _JSUtils_babel, \"f\").types;\n        let declaration = __classPrivateFieldGet(this, _JSUtils_instances, \"m\", _JSUtils_emitStatement).call(this, t.variableDeclaration('let', [\n            t.variableDeclarator(t.identifier(identifier), importedIdentifier),\n        ]));\n        declaration.scope.registerBinding('let', declaration.get('declarations.0'));\n        __classPrivateFieldGet(this, _JSUtils_addedBinding, \"f\").call(this, identifier);\n        return identifier;\n    }\n    /**\n     * Add an import statement purely for side effect.\n     *\n     * @param moduleSpecifier the module to import\n     */\n    importForSideEffect(moduleSpecifier) {\n        __classPrivateFieldGet(this, _JSUtils_importer, \"f\").importForSideEffect(moduleSpecifier);\n    }\n    /**\n     * Emit a javascript expresison for side-effect. This only accepts\n     * expressions, not statements, because you should not introduce new bindings.\n     * To introduce a binding see bindExpression or bindImport instead.\n     *\n     * @param { Expression } expression A javascript expression whose value will\n     * initialize your new binding. See docs on the Expression type below for\n     * details.\n     */\n    emitExpression(expression) {\n        let t = __classPrivateFieldGet(this, _JSUtils_babel, \"f\").types;\n        __classPrivateFieldGet(this, _JSUtils_instances, \"m\", _JSUtils_emitStatement).call(this, t.expressionStatement(__classPrivateFieldGet(this, _JSUtils_instances, \"m\", _JSUtils_parseExpression).call(this, __classPrivateFieldGet(this, _JSUtils_state, \"f\").program, expression)));\n    }\n}\nexports.JSUtils = JSUtils;\n_JSUtils_babel = new WeakMap(), _JSUtils_state = new WeakMap(), _JSUtils_template = new WeakMap(), _JSUtils_addedBinding = new WeakMap(), _JSUtils_importer = new WeakMap(), _JSUtils_instances = new WeakSet(), _JSUtils_emitStatement = function _JSUtils_emitStatement(statement) {\n    if (__classPrivateFieldGet(this, _JSUtils_state, \"f\").lastInsertedPath) {\n        __classPrivateFieldGet(this, _JSUtils_state, \"f\").lastInsertedPath = __classPrivateFieldGet(this, _JSUtils_state, \"f\").lastInsertedPath.insertAfter(statement)[0];\n    }\n    else {\n        __classPrivateFieldGet(this, _JSUtils_state, \"f\").lastInsertedPath = __classPrivateFieldGet(this, _JSUtils_state, \"f\").program.unshiftContainer('body', statement)[0];\n    }\n    return __classPrivateFieldGet(this, _JSUtils_state, \"f\").lastInsertedPath;\n}, _JSUtils_parseExpression = function _JSUtils_parseExpression(target, expression) {\n    let expressionString;\n    if (typeof expression === 'string') {\n        expressionString = expression;\n    }\n    else {\n        expressionString = expression(new ExpressionContext(__classPrivateFieldGet(this, _JSUtils_importer, \"f\"), target));\n    }\n    let parsed = __classPrivateFieldGet(this, _JSUtils_babel, \"f\").parse(expressionString);\n    if (!parsed) {\n        throw new Error(`JSUtils.bindExpression could not understand the expression: ${expressionString}`);\n    }\n    let statements = body(parsed);\n    if (statements.length !== 1) {\n        throw new Error(`JSUtils.bindExpression expected to find exactly one expression but found ${statements.length} in: ${expressionString}`);\n    }\n    let statement = statements[0];\n    if (statement.type !== 'ExpressionStatement') {\n        throw new Error(`JSUtils.bindExpression expected to find an expression but found ${statement.type} in: ${expressionString}`);\n    }\n    return statement.expression;\n};\nfunction unusedNameLike(desiredName, isUsed) {\n    let candidate = desiredName;\n    let counter = 0;\n    while (isUsed(candidate)) {\n        candidate = `${desiredName}${counter++}`;\n    }\n    return candidate;\n}\nfunction body(node) {\n    if (node.type === 'File') {\n        return node.program.body;\n    }\n    else {\n        return node.body;\n    }\n}\n/**\n * Allows you to construct an expression that relies on imported values.\n */\nclass ExpressionContext {\n    constructor(importer, target) {\n        _ExpressionContext_importer.set(this, void 0);\n        _ExpressionContext_target.set(this, void 0);\n        __classPrivateFieldSet(this, _ExpressionContext_importer, importer, \"f\");\n        __classPrivateFieldSet(this, _ExpressionContext_target, target, \"f\");\n    }\n    /**\n     * Find or create a local binding for the given import.\n     *\n     * @param moduleSpecifier The path to import from.\n     * @param exportedName The named export you wish to access, or \"default\" for\n     * the default export, or \"*\" for the namespace export.\n     * @param nameHint Optionally, provide a descriptive name for your new\n     * binding. We will mangle this name as needed to avoid collisions, but\n     * picking a good name here can aid in debugging.\n  \n     * @return the local identifier for the imported value\n     */\n    import(moduleSpecifier, exportedName, nameHint) {\n        // this method in babel-import-util is the lower-level one that doesn't try\n        // to create valid references for us. It's our responsibility to do so. But\n        // that's OK here, because we have the same responsibility for every\n        // scope-bag identifier, not just the imported ones, and it will be easier\n        // to handle them all at once.\n        return __classPrivateFieldGet(this, _ExpressionContext_importer, \"f\").import(__classPrivateFieldGet(this, _ExpressionContext_target, \"f\"), moduleSpecifier, exportedName, nameHint).name;\n    }\n}\n_ExpressionContext_importer = new WeakMap(), _ExpressionContext_target = new WeakMap();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMtdXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJqcy11dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFLQSwyQ0FBZ0Q7QUFPaEQsNkVBQTZFO0FBQzdFLCtCQUErQjtBQUMvQixNQUFhLE9BQU87SUFPbEIsWUFDRSxLQUFtQixFQUNuQixLQUFZLEVBQ1osUUFBZ0MsRUFDaEMsWUFBb0MsRUFDcEMsUUFBb0I7O1FBWHRCLGlDQUFxQjtRQUNyQixpQ0FBYztRQUNkLG9DQUFrQztRQUNsQyx3Q0FBc0M7UUFDdEMsb0NBQXNCO1FBU3BCLHVCQUFBLElBQUksa0JBQVUsS0FBSyxNQUFBLENBQUM7UUFDcEIsdUJBQUEsSUFBSSxrQkFBVSxLQUFLLE1BQUEsQ0FBQztRQUNwQix1QkFBQSxJQUFJLHFCQUFhLFFBQVEsTUFBQSxDQUFDO1FBQzFCLHVCQUFBLElBQUkseUJBQWlCLFlBQVksTUFBQSxDQUFDO1FBQ2xDLHVCQUFBLElBQUkscUJBQWEsUUFBUSxNQUFBLENBQUM7UUFFMUIsSUFBSSxDQUFDLHVCQUFBLElBQUksc0JBQU8sQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQ2xDLElBQUksTUFBeUMsQ0FBQztZQUM5QyxLQUFLLElBQUksU0FBUyxJQUFJLHVCQUFBLElBQUksc0JBQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7Z0JBQ3RELElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxDQUFDO29CQUNyQyxNQUFNO2dCQUNSLENBQUM7Z0JBQ0QsTUFBTSxHQUFHLFNBQVMsQ0FBQztZQUNyQixDQUFDO1lBQ0QsSUFBSSxNQUFNLEVBQUUsQ0FBQztnQkFDWCx1QkFBQSxJQUFJLHNCQUFPLENBQUMsZ0JBQWdCLEdBQUcsTUFBTSxDQUFDO1lBQ3hDLENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVEOzs7Ozs7Ozs7Ozs7O09BYUc7SUFDSCxjQUFjLENB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LEVBQUUsQ0FBQztJQUMzQyxDQUFDO0lBQ0QsT0FBTyxTQUFTLENBQUM7QUFDbkIsQ0FBQztBQVdELFNBQVMsSUFBSSxDQUFDLElBQXdCO0lBQ3BDLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLEVBQUUsQ0FBQztRQUN6QixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO0lBQzNCLENBQUM7U0FBTSxDQUFDO1FBQ04sT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ25CLENBQUM7QUFDSCxDQUFDO0FBRUQ7O0dBRUc7QUFDSCxNQUFNLGlCQUFpQjtJQUlyQixZQUFZLFFBQW9CLEVBQUUsTUFBd0I7UUFIMUQsOENBQXNCO1FBQ3RCLDRDQUEwQjtRQUd4Qix1QkFBQSxJQUFJLCtCQUFhLFFBQVEsTUFBQSxDQUFDO1FBQzFCLHVCQUFBLElBQUksNkJBQVcsTUFBTSxNQUFBLENBQUM7SUFDeEIsQ0FBQztJQUVEOzs7Ozs7Ozs7OztPQVdHO0lBQ0gsTUFBTSxDQUFDLGVBQXVCLEVBQUUsWUFBb0IsRUFBRSxRQUFpQjtRQUNyRSwyRUFBMkU7UUFDM0UsMkVBQTJFO1FBQzNFLG9FQUFvRTtRQUNwRSwwRUFBMEU7UUFDMUUsOEJBQThCO1FBQzlCLE9BQU8sdUJBQUEsSUFBSSxtQ0FBVSxDQUFDLE1BQU0sQ0FBQyx1QkFBQSxJQUFJLGlDQUFRLEVBQUUsZUFBZSxFQUFFLFlBQVksRUFBRSxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDM0YsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyB0eXBlcyBhcyB0IH0gZnJvbSAnQGJhYmVsL2NvcmUnO1xuaW1wb3J0IHR5cGUgKiBhcyBCYWJlbCBmcm9tICdAYmFiZWwvY29yZSc7XG5pbXBvcnQgdHlwZSB7IE5vZGVQYXRoIH0gZnJvbSAnQGJhYmVsL3RyYXZlcnNlJztcbmltcG9ydCB0eXBlIHsgQVNUUGx1Z2luQnVpbGRlciwgQVNUUGx1Z2luRW52aXJvbm1lbnQsIEFTVHYxLCBXYWxrZXJQYXRoIH0gZnJvbSAnQGdsaW1tZXIvc3ludGF4JztcbmltcG9ydCB0eXBlIHsgSW1wb3J0VXRpbCB9IGZyb20gJ2JhYmVsLWltcG9ydC11dGlsJztcbmltcG9ydCB7IGFzdE5vZGVIYXNCaW5kaW5nIH0gZnJvbSAnLi9oYnMtdXRpbHMnO1xuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBwcm9ncmFtOiBOb2RlUGF0aDxCYWJlbC50eXBlcy5Qcm9ncmFtPjtcbiAgbGFzdEluc2VydGVkUGF0aDogTm9kZVBhdGg8QmFiZWwudHlwZXMuU3RhdGVtZW50PiB8IHVuZGVmaW5lZDtcbn1cblxuLy8gVGhpcyBleGlzdHMgdG8gZ2l2ZSBBU1QgcGx1Z2lucyBhIGNvbnRyb2xsZWQgaW50ZXJmYWNlIGZvciBpbmZsdWVuY2luZyB0aGVcbi8vIHN1cnJvdW5kaW5nIEphdmFzY3JpcHQgc2NvcGVcbmV4cG9ydCBjbGFzcyBKU1V0aWxzIHtcbiAgI2JhYmVsOiB0eXBlb2YgQmFiZWw7XG4gICNzdGF0ZTogU3RhdGU7XG4gICN0ZW1wbGF0ZTogTm9kZVBhdGg8dC5FeHByZXNzaW9uPjtcbiAgI2FkZGVkQmluZGluZzogKG5hbWU6IHN0cmluZykgPT4gdm9pZDtcbiAgI2ltcG9ydGVyOiBJbXBvcnRVdGlsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGJhYmVsOiB0eXBlb2YgQmFiZWwsXG4gICAgc3RhdGU6IFN0YXRlLFxuICAgIHRlbXBsYXRlOiBOb2RlUGF0aDx0LkV4cHJlc3Npb24+LFxuICAgIGFkZGVkQmluZGluZzogKG5hbWU6IHN0cmluZykgPT4gdm9pZCxcbiAgICBpbXBvcnRlcjogSW1wb3J0VXRpbFxuICApIHtcbiAgICB0aGlzLiNiYWJlbCA9IGJhYmVsO1xuICAgIHRoaXMuI3N0YXRlID0gc3RhdGU7XG4gICAgdGhpcy4jdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICB0aGlzLiNhZGRlZEJpbmRpbmcgPSBhZGRlZEJpbmRpbmc7XG4gICAgdGhpcy4jaW1wb3J0ZXIgPSBpbXBvcnRlcjtcblxuICAgIGlmICghdGhpcy4jc3RhdGUubGFzdEluc2VydGVkUGF0aCkge1xuICAgICAgbGV0IHRhcmdldDogTm9kZVBhdGg8dC5TdGF0ZW1lbnQ+IHwgdW5kZWZpbmVkO1xuICAgICAgZm9yIChsZXQgc3RhdGVtZW50IG9mIHRoaXMuI3N0YXRlLnByb2dyYW0uZ2V0KCdib2R5JykpIHtcbiAgICAgICAgaWYgKCFzdGF0ZW1lbnQuaXNJbXBvcnREZWNsYXJhdGlvbigpKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0ID0gc3RhdGVtZW50O1xuICAgICAgfVxuICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICB0aGlzLiNzdGF0ZS5sYXN0SW5zZXJ0ZWRQYXRoID0gdGFyZ2V0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYmluZGluZyB0aGF0IHlvdSBjYW4gdXNlIGluIHlvdXIgdGVtcGxhdGUsIGluaXRpYWxpemVkIHdpdGhcbiAgICogdGhlIGdpdmVuIEphdmFzY3JpcHQgZXhwcmVzc2lvbi5cbiAgICpcbiAgICogQHBhcmFtIHsgRXhwcmVzc2lvbiB9IGV4cHJlc3Npb24gQSBqYXZhc2NyaXB0IGV4cHJlc3Npb24gd2hvc2UgdmFsdWUgd2lsbFxuICAgKiBpbml0aWFsaXplIHlvdXIgbmV3IGJpbmRpbmcuIFNlZSBkb2NzIG9uIHRoZSBFeHByZXNzaW9uIHR5cGUgZm9yIGRldGFpbHMuXG4gICAqIEBwYXJhbSB0YXJnZXQgVGhlIGxvY2F0aW9uIHdpdGhpbiB5b3VyIHRlbXBsYXRlIHdoZXJlIHRoZSBiaW5kaW5nIHdpbGwgYmVcbiAgICogdXNlZC4gVGhpcyBtYXR0ZXJzIHNvIHdlIGNhbiBhdm9pZCBuYW1pbmcgY29sbGlzaW9ucy5cbiAgICogQHBhcmFtIG9wdHMubmFtZUhpbnQgT3B0aW9uYWxseSwgcHJvdmlkZSBhIGRlc2NyaXB0aXZlIG5hbWUgZm9yIHlvdXIgbmV3XG4gICAqIGJpbmRpbmcuIFdlIHdpbGwgbWFuZ2xlIHRoaXMgbmFtZSBhcyBuZWVkZWQgdG8gYXZvaWQgY29sbGlzaW9ucywgYnV0XG4gICAqIHBpY2tpbmcgYSBnb29kIG5hbWUgaGVyZSBjYW4gYWlkIGluIGRlYnVnZ2luZy5cbiAgICpcbiAgICogQHJldHVybiBUaGUgbmFtZSB5b3UgY2FuIHVzZSBpbiB5b3VyIHRlbXBsYXRlIHRvIGFjY2VzcyB0aGUgYmluZGluZy5cbiAgICovXG4gIGJpbmRFeHByZXNzaW9uKFxuICAgIGV4cHJlc3Npb246IEV4cHJlc3Npb24sXG4gICAgdGFyZ2V0OiBXYWxrZXJQYXRoPEFTVHYxLk5vZGU+LFxuICAgIG9wdHM/OiB7IG5hbWVIaW50Pzogc3RyaW5nIH1cbiAgKTogc3RyaW5nIHtcbiAgICBsZXQgbmFtZSA9IHVudXNlZE5hbWVMaWtlKFxuICAgICAgb3B0cz8ubmFtZUhpbnQgPz8gJ2EnLFxuICAgICAgKGNhbmRpZGF0ZSkgPT5cbiAgICAgICAgdGhpcy4jdGVtcGxhdGUuc2NvcGUuaGFzQmluZGluZyhjYW5kaWRhdGUpIHx8IGFzdE5vZGVIYXNCaW5kaW5nKHRhcmdldCwgY2FuZGlkYXRlKVxuICAgICk7XG4gICAgbGV0IHQgPSB0aGlzLiNiYWJlbC50eXBlcztcbiAgICBsZXQgZGVjbGFyYXRpb246IE5vZGVQYXRoPHQuVmFyaWFibGVEZWNsYXJhdGlvbj4gPSB0aGlzLiNlbWl0U3RhdGVtZW50KFxuICAgICAgdC52YXJpYWJsZURlY2xhcmF0aW9uKCdsZXQnLCBbXG4gICAgICAgIHQudmFyaWFibGVEZWNsYXJhdG9yKFxuICAgICAgICAgIHQuaWRlbnRpZmllcihuYW1lKSxcbiAgICAgICAgICB0aGlzLiNwYXJzZUV4cHJlc3Npb24odGhpcy4jc3RhdGUucHJvZ3JhbSwgZXhwcmVzc2lvbilcbiAgICAgICAgKSxcbiAgICAgIF0pXG4gICAgKTtcbiAgICBkZWNsYXJhdGlvbi5zY29wZS5yZWdpc3RlckJpbmRpbmcoJ2xldCcsIGRlY2xhcmF0aW9uLmdldCgnZGVjbGFyYXRpb25zLjAnKSBhcyBOb2RlUGF0aCk7XG4gICAgdGhpcy4jYWRkZWRCaW5kaW5nKG5hbWUpO1xuICAgIHJldHVybiBuYW1lO1xuICB9XG5cbiAgI2VtaXRTdGF0ZW1lbnQ8VCBleHRlbmRzIHQuU3RhdGVtZW50PihzdGF0ZW1lbnQ6IFQpOiBOb2RlUGF0aDxUPiB7XG4gICAgaWYgKHRoaXMuI3N0YXRlLmxhc3RJbnNlcnRlZFBhdGgpIHtcbiAgICAgIHRoaXMuI3N0YXRlLmxhc3RJbnNlcnRlZFBhdGggPSB0aGlzLiNzdGF0ZS5sYXN0SW5zZXJ0ZWRQYXRoLmluc2VydEFmdGVyKHN0YXRlbWVudClbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuI3N0YXRlLmxhc3RJbnNlcnRlZFBhdGggPSB0aGlzLiNzdGF0ZS5wcm9ncmFtLnVuc2hpZnRDb250YWluZXIoJ2JvZHknLCBzdGF0ZW1lbnQpWzBdO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy4jc3RhdGUubGFzdEluc2VydGVkUGF0aCBhcyBOb2RlUGF0aDxUPjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHYWluIGFjY2VzcyB0byBhbiBpbXBvcnRlZCB2YWx1ZSB3aXRoaW4geW91ciB0ZW1wbGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIG1vZHVsZVNwZWNpZmllciBUaGUgcGF0aCB0byBpbXBvcnQgZnJvbS5cbiAgICogQHBhcmFtIGV4cG9ydGVkTmFtZSBUaGUgbmFtZWQgZXhwb3J0IHlvdSB3aXNoIHRvIGFjY2Vzcywgb3IgXCJkZWZhdWx0XCIgZm9yXG4gICAqIHRoZSBkZWZhdWx0IGV4cG9ydCwgb3IgXCIqXCIgZm9yIHRoZSBuYW1lc3BhY2UgZXhwb3J0LlxuICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSBsb2NhdGlvbiB3aXRoaW4geW91ciB0ZW1wbGF0ZSB3aGVyZSB0aGUgYmluZGluZyB3aWxsIGJlXG4gICAqIHVzZWQuIFRoaXMgbWF0dGVycyBzbyB3ZSBjYW4gYXZvaWQgbmFtaW5nIGNvbGxpc2lvbnMuXG4gICAqIEBwYXJhbSBvcHRzLm5hbWVIaW50IE9wdGlvbmFsbHksIHByb3ZpZGUgYSBkZXNjcmlwdGl2ZSBuYW1lIGZvciB5b3VyIG5ld1xuICAgKiBiaW5kaW5nLiBXZSB3aWxsIG1hbmdsZSB0aGlzIG5hbWUgYXMgbmVlZGVkIHRvIGF2b2lkIGNvbGxpc2lvbnMsIGJ1dFxuICAgKiBwaWNraW5nIGEgZ29vZCBuYW1lIGhlcmUgY2FuIGFpZCBpbiBkZWJ1Z2dpbmcuXG4gICAqXG4gICAqIEByZXR1cm4gVGhlIG5hbWUgeW91IGNhbiB1c2UgaW4geW91ciB0ZW1wbGF0ZSB0byBhY2Nlc3MgdGhlIGltcG9ydGVkIHZhbHVlLlxuICAgKi9cbiAgYmluZEltcG9ydChcbiAgICBtb2R1bGVTcGVjaWZpZXI6IHN0cmluZyxcbiAgICBleHBvcnRlZE5hbWU6IHN0cmluZyxcbiAgICB0YXJnZXQ6IFdhbGtlclBhdGg8QVNUdjEuTm9kZT4sXG4gICAgb3B0cz86IHsgbmFtZUhpbnQ/OiBzdHJpbmcgfVxuICApOiBzdHJpbmcge1xuICAgIC8vIFRoaXMgd2lsbCBkaXNjb3ZlciBvciBjcmVhdGUgdGhlIGxvY2FsIG5hbWUgZm9yIGFjY2Vzc2luZyB0aGUgZ2l2ZW4gaW1wb3J0LlxuICAgIGxldCBpbXBvcnRlZElkZW50aWZpZXIgPSB0aGlzLiNpbXBvcnRlci5pbXBvcnQoXG4gICAgICB0aGlzLiN0ZW1wbGF0ZSxcbiAgICAgIG1vZHVsZVNwZWNpZmllcixcbiAgICAgIGV4cG9ydGVkTmFtZSxcbiAgICAgIG9wdHM/Lm5hbWVIaW50XG4gICAgKTtcblxuICAgIC8vIFNpbXBsZSBiYXNlIGNhc2U6IHRoZSBKUyBuYW1lIHRoYXQncyBhdmFpbGFibGUgaXMgYWxzbyB1bnVzZWQgYXQgb3VyIHNwb3RcbiAgICAvLyBpbiBIQlMsIHNvIGp1c3QgdXNlIGl0LlxuICAgIGlmICghYXN0Tm9kZUhhc0JpbmRpbmcodGFyZ2V0LCBpbXBvcnRlZElkZW50aWZpZXIubmFtZSkpIHtcbiAgICAgIHRoaXMuI2FkZGVkQmluZGluZyhpbXBvcnRlZElkZW50aWZpZXIubmFtZSk7XG4gICAgICByZXR1cm4gaW1wb3J0ZWRJZGVudGlmaWVyLm5hbWU7XG4gICAgfVxuXG4gICAgLy8gVGhlIGltcG9ydGVkSWRlbnRpZmllciB0aGF0IHdlIGhhdmUgaW4gSmF2YXNjcmlwdCBpcyBub3QgdXNhYmxlIHdpdGhpblxuICAgIC8vIG91ciBIQlMgYmVjYXVzZSBpdCdzIHNoYWRvd2VkIGJ5IGEgYmxvY2sgcGFyYW0uIFNvIHdlIHdpbGwgaW50cm9kdWNlIGFcbiAgICAvLyBzZWNvbmQgbmFtZSB2aWEgYSB2YXJpYWJsZSBkZWNsYXJhdGlvbi5cbiAgICAvL1xuICAgIC8vIFRoZSByZWFzb24gd2UgZG9uJ3QgZm9yY2UgdGhlIGltcG9ydCBpdHNlbGYgdG8gaGF2ZSB0aGlzIG5hbWUgaXMgdGhhdFxuICAgIC8vIHdlIG1pZ2h0IGJlIHJlLXVzaW5nIGFuIGV4aXN0aW5nIGltcG9ydCwgYW5kIHdlIGRvbid0IHdhbnQgdG8gZ29cbiAgICAvLyByZXdyaXRpbmcgYWxsIG9mIGl0cyBjYWxsc2l0ZXMgdGhhdCBhcmUgdW5yZWxhdGVkIHRvIHVzLlxuICAgIGxldCBpZGVudGlmaWVyID0gdW51c2VkTmFtZUxpa2UoXG4gICAgICBpbXBvcnRlZElkZW50aWZpZXIubmFtZSxcbiAgICAgIChjYW5kaWRhdGUpID0+XG4gICAgICAgIHRoaXMuI3RlbXBsYXRlLnNjb3BlLmhhc0JpbmRpbmcoY2FuZGlkYXRlKSB8fCBhc3ROb2RlSGFzQmluZGluZyh0YXJnZXQsIGNhbmRpZGF0ZSlcbiAgICApO1xuICAgIGxldCB0ID0gdGhpcy4jYmFiZWwudHlwZXM7XG4gICAgbGV0IGRlY2xhcmF0aW9uID0gdGhpcy4jZW1pdFN0YXRlbWVudChcbiAgICAgIHQudmFyaWFibGVEZWNsYXJhdGlvbignbGV0JywgW1xuICAgICAgICB0LnZhcmlhYmxlRGVjbGFyYXRvcih0LmlkZW50aWZpZXIoaWRlbnRpZmllciksIGltcG9ydGVkSWRlbnRpZmllciksXG4gICAgICBdKVxuICAgICk7XG4gICAgZGVjbGFyYXRpb24uc2NvcGUucmVnaXN0ZXJCaW5kaW5nKCdsZXQnLCBkZWNsYXJhdGlvbi5nZXQoJ2RlY2xhcmF0aW9ucy4wJykgYXMgTm9kZVBhdGgpO1xuXG4gICAgdGhpcy4jYWRkZWRCaW5kaW5nKGlkZW50aWZpZXIpO1xuICAgIHJldHVybiBpZGVudGlmaWVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhbiBpbXBvcnQgc3RhdGVtZW50IHB1cmVseSBmb3Igc2lkZSBlZmZlY3QuXG4gICAqXG4gICAqIEBwYXJhbSBtb2R1bGVTcGVjaWZpZXIgdGhlIG1vZHVsZSB0byBpbXBvcnRcbiAgICovXG4gIGltcG9ydEZvclNpZGVFZmZlY3QobW9kdWxlU3BlY2lmaWVyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLiNpbXBvcnRlci5pbXBvcnRGb3JTaWRlRWZmZWN0KG1vZHVsZVNwZWNpZmllcik7XG4gIH1cblxuICAvKipcbiAgICogRW1pdCBhIGphdmFzY3JpcHQgZXhwcmVzaXNvbiBmb3Igc2lkZS1lZmZlY3QuIFRoaXMgb25seSBhY2NlcHRzXG4gICAqIGV4cHJlc3Npb25zLCBub3Qgc3RhdGVtZW50cywgYmVjYXVzZSB5b3Ugc2hvdWxkIG5vdCBpbnRyb2R1Y2UgbmV3IGJpbmRpbmdzLlxuICAgKiBUbyBpbnRyb2R1Y2UgYSBiaW5kaW5nIHNlZSBiaW5kRXhwcmVzc2lvbiBvciBiaW5kSW1wb3J0IGluc3RlYWQuXG4gICAqXG4gICAqIEBwYXJhbSB7IEV4cHJlc3Npb24gfSBleHByZXNzaW9uIEEgamF2YXNjcmlwdCBleHByZXNzaW9uIHdob3NlIHZhbHVlIHdpbGxcbiAgICogaW5pdGlhbGl6ZSB5b3VyIG5ldyBiaW5kaW5nLiBTZWUgZG9jcyBvbiB0aGUgRXhwcmVzc2lvbiB0eXBlIGJlbG93IGZvclxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgZW1pdEV4cHJlc3Npb24oZXhwcmVzc2lvbjogRXhwcmVzc2lvbik6IHZvaWQge1xuICAgIGxldCB0ID0gdGhpcy4jYmFiZWwudHlwZXM7XG4gICAgdGhpcy4jZW1pdFN0YXRlbWVudChcbiAgICAgIHQuZXhwcmVzc2lvblN0YXRlbWVudCh0aGlzLiNwYXJzZUV4cHJlc3Npb24odGhpcy4jc3RhdGUucHJvZ3JhbSwgZXhwcmVzc2lvbikpXG4gICAgKTtcbiAgfVxuXG4gICNwYXJzZUV4cHJlc3Npb24odGFyZ2V0OiBOb2RlUGF0aDx0Lk5vZGU+LCBleHByZXNzaW9uOiBFeHByZXNzaW9uKTogdC5FeHByZXNzaW9uIHtcbiAgICBsZXQgZXhwcmVzc2lvblN0cmluZzogc3RyaW5nO1xuICAgIGlmICh0eXBlb2YgZXhwcmVzc2lvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGV4cHJlc3Npb25TdHJpbmcgPSBleHByZXNzaW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICBleHByZXNzaW9uU3RyaW5nID0gZXhwcmVzc2lvbihuZXcgRXhwcmVzc2lvbkNvbnRleHQodGhpcy4jaW1wb3J0ZXIsIHRhcmdldCkpO1xuICAgIH1cblxuICAgIGxldCBwYXJzZWQgPSB0aGlzLiNiYWJlbC5wYXJzZShleHByZXNzaW9uU3RyaW5nKTtcbiAgICBpZiAoIXBhcnNlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSlNVdGlscy5iaW5kRXhwcmVzc2lvbiBjb3VsZCBub3QgdW5kZXJzdGFuZCB0aGUgZXhwcmVzc2lvbjogJHtleHByZXNzaW9uU3RyaW5nfWBcbiAgICAgICk7XG4gICAgfVxuICAgIGxldCBzdGF0ZW1lbnRzID0gYm9keShwYXJzZWQpO1xuICAgIGlmIChzdGF0ZW1lbnRzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgSlNVdGlscy5iaW5kRXhwcmVzc2lvbiBleHBlY3RlZCB0byBmaW5kIGV4YWN0bHkgb25lIGV4cHJlc3Npb24gYnV0IGZvdW5kICR7c3RhdGVtZW50cy5sZW5ndGh9IGluOiAke2V4cHJlc3Npb25TdHJpbmd9YFxuICAgICAgKTtcbiAgICB9XG4gICAgbGV0IHN0YXRlbWVudCA9IHN0YXRlbWVudHNbMF07XG4gICAgaWYgKHN0YXRlbWVudC50eXBlICE9PSAnRXhwcmVzc2lvblN0YXRlbWVudCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEpTVXRpbHMuYmluZEV4cHJlc3Npb24gZXhwZWN0ZWQgdG8gZmluZCBhbiBleHByZXNzaW9uIGJ1dCBmb3VuZCAke3N0YXRlbWVudC50eXBlfSBpbjogJHtleHByZXNzaW9uU3RyaW5nfWBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBzdGF0ZW1lbnQuZXhwcmVzc2lvbjtcbiAgfVxufVxuXG5mdW5jdGlvbiB1bnVzZWROYW1lTGlrZShkZXNpcmVkTmFtZTogc3RyaW5nLCBpc1VzZWQ6IChuYW1lOiBzdHJpbmcpID0+IGJvb2xlYW4pOiBzdHJpbmcge1xuICBsZXQgY2FuZGlkYXRlID0gZGVzaXJlZE5hbWU7XG4gIGxldCBjb3VudGVyID0gMDtcbiAgd2hpbGUgKGlzVXNlZChjYW5kaWRhdGUpKSB7XG4gICAgY2FuZGlkYXRlID0gYCR7ZGVzaXJlZE5hbWV9JHtjb3VudGVyKyt9YDtcbiAgfVxuICByZXR1cm4gY2FuZGlkYXRlO1xufVxuXG4vKipcbiAqIFRoaXMgZXh0ZW5kcyBHbGltbWVyJ3MgQVNUUGx1Z2luRW52aXJvbm1lbnQgdHlwZSB0byBwdXQgb3VyIGpzdXRpbHMgaW50byBtZXRhXG4gKi9cbmV4cG9ydCB0eXBlIFdpdGhKU1V0aWxzPFQgZXh0ZW5kcyB7IG1ldGE/OiBvYmplY3QgfT4gPSB7XG4gIG1ldGE6IFRbJ21ldGEnXSAmIHsganN1dGlsczogSlNVdGlscyB9O1xufSAmIFQ7XG5cbmV4cG9ydCB0eXBlIEV4dGVuZGVkUGx1Z2luQnVpbGRlciA9IEFTVFBsdWdpbkJ1aWxkZXI8V2l0aEpTVXRpbHM8QVNUUGx1Z2luRW52aXJvbm1lbnQ+PjtcblxuZnVuY3Rpb24gYm9keShub2RlOiB0LlByb2dyYW0gfCB0LkZpbGUpIHtcbiAgaWYgKG5vZGUudHlwZSA9PT0gJ0ZpbGUnKSB7XG4gICAgcmV0dXJuIG5vZGUucHJvZ3JhbS5ib2R5O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBub2RlLmJvZHk7XG4gIH1cbn1cblxuLyoqXG4gKiBBbGxvd3MgeW91IHRvIGNvbnN0cnVjdCBhbiBleHByZXNzaW9uIHRoYXQgcmVsaWVzIG9uIGltcG9ydGVkIHZhbHVlcy5cbiAqL1xuY2xhc3MgRXhwcmVzc2lvbkNvbnRleHQge1xuICAjaW1wb3J0ZXI6IEltcG9ydFV0aWw7XG4gICN0YXJnZXQ6IE5vZGVQYXRoPHQuTm9kZT47XG5cbiAgY29uc3RydWN0b3IoaW1wb3J0ZXI6IEltcG9ydFV0aWwsIHRhcmdldDogTm9kZVBhdGg8dC5Ob2RlPikge1xuICAgIHRoaXMuI2ltcG9ydGVyID0gaW1wb3J0ZXI7XG4gICAgdGhpcy4jdGFyZ2V0ID0gdGFyZ2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgb3IgY3JlYXRlIGEgbG9jYWwgYmluZGluZyBmb3IgdGhlIGdpdmVuIGltcG9ydC5cbiAgICpcbiAgICogQHBhcmFtIG1vZHVsZVNwZWNpZmllciBUaGUgcGF0aCB0byBpbXBvcnQgZnJvbS5cbiAgICogQHBhcmFtIGV4cG9ydGVkTmFtZSBUaGUgbmFtZWQgZXhwb3J0IHlvdSB3aXNoIHRvIGFjY2Vzcywgb3IgXCJkZWZhdWx0XCIgZm9yXG4gICAqIHRoZSBkZWZhdWx0IGV4cG9ydCwgb3IgXCIqXCIgZm9yIHRoZSBuYW1lc3BhY2UgZXhwb3J0LlxuICAgKiBAcGFyYW0gbmFtZUhpbnQgT3B0aW9uYWxseSwgcHJvdmlkZSBhIGRlc2NyaXB0aXZlIG5hbWUgZm9yIHlvdXIgbmV3XG4gICAqIGJpbmRpbmcuIFdlIHdpbGwgbWFuZ2xlIHRoaXMgbmFtZSBhcyBuZWVkZWQgdG8gYXZvaWQgY29sbGlzaW9ucywgYnV0XG4gICAqIHBpY2tpbmcgYSBnb29kIG5hbWUgaGVyZSBjYW4gYWlkIGluIGRlYnVnZ2luZy5cblxuICAgKiBAcmV0dXJuIHRoZSBsb2NhbCBpZGVudGlmaWVyIGZvciB0aGUgaW1wb3J0ZWQgdmFsdWVcbiAgICovXG4gIGltcG9ydChtb2R1bGVTcGVjaWZpZXI6IHN0cmluZywgZXhwb3J0ZWROYW1lOiBzdHJpbmcsIG5hbWVIaW50Pzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyB0aGlzIG1ldGhvZCBpbiBiYWJlbC1pbXBvcnQtdXRpbCBpcyB0aGUgbG93ZXItbGV2ZWwgb25lIHRoYXQgZG9lc24ndCB0cnlcbiAgICAvLyB0byBjcmVhdGUgdmFsaWQgcmVmZXJlbmNlcyBmb3IgdXMuIEl0J3Mgb3VyIHJlc3BvbnNpYmlsaXR5IHRvIGRvIHNvLiBCdXRcbiAgICAvLyB0aGF0J3MgT0sgaGVyZSwgYmVjYXVzZSB3ZSBoYXZlIHRoZSBzYW1lIHJlc3BvbnNpYmlsaXR5IGZvciBldmVyeVxuICAgIC8vIHNjb3BlLWJhZyBpZGVudGlmaWVyLCBub3QganVzdCB0aGUgaW1wb3J0ZWQgb25lcywgYW5kIGl0IHdpbGwgYmUgZWFzaWVyXG4gICAgLy8gdG8gaGFuZGxlIHRoZW0gYWxsIGF0IG9uY2UuXG4gICAgcmV0dXJuIHRoaXMuI2ltcG9ydGVyLmltcG9ydCh0aGlzLiN0YXJnZXQsIG1vZHVsZVNwZWNpZmllciwgZXhwb3J0ZWROYW1lLCBuYW1lSGludCkubmFtZTtcbiAgfVxufVxuXG4vKipcbiAqIFlvdSBjYW4gcGFzcyBhIEphdmFzY3JpcHQgZXhwcmVzc2lvbiBhcyBhIHN0cmluZyBsaWtlOlxuICpcbiAqICAgXCJuZXcgRGF0ZSgpXCJcbiAqXG4gKiBPciBhcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN0cmluZzpcbiAqXG4gKiAgICgpID0+IFwibmV3IERhdGUoKVwiXG4gKlxuICogV2hlbiB5b3UgdXNlIGEgZnVuY3Rpb24sIGl0IGNhbiB1c2UgaW1wb3J0ZWQgdmFsdWVzOlxuICpcbiAqICAgKGNvbnRleHQpID0+IGBuZXcgJHtjb250ZXh0LmltcG9ydChcImx1eG9uXCIsIFwiRGF0ZVRpbWVcIil9KClgXG4gKlxuICovXG5leHBvcnQgdHlwZSBFeHByZXNzaW9uID0gc3RyaW5nIHwgKChjb250ZXh0OiBFeHByZXNzaW9uQ29udGV4dCkgPT4gc3RyaW5nKTtcbiJdfQ==","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.makePlugin = makePlugin;\nconst babel_import_util_1 = require(\"babel-import-util\");\nconst expression_parser_1 = require(\"./expression-parser\");\nconst js_utils_1 = require(\"./js-utils\");\nconst scope_locals_1 = require(\"./scope-locals\");\nconst syntax_1 = require(\"@glimmer/syntax\");\n__exportStar(require(\"./public-types\"), exports);\nconst INLINE_PRECOMPILE_MODULES = [\n    {\n        moduleName: 'ember-cli-htmlbars',\n        export: 'hbs',\n        allowTemplateLiteral: true,\n    },\n    {\n        moduleName: 'ember-cli-htmlbars-inline-precompile',\n        export: 'default',\n        allowTemplateLiteral: true,\n    },\n    {\n        moduleName: 'htmlbars-inline-precompile',\n        export: 'default',\n        allowTemplateLiteral: true,\n    },\n    {\n        moduleName: '@ember/template-compilation',\n        export: 'precompileTemplate',\n        enableScope: true,\n    },\n    {\n        moduleName: '@ember/template-compiler',\n        export: 'template',\n        enableScope: true,\n        rfc931Support: 'polyfilled',\n    },\n];\nfunction normalizeOpts(options) {\n    var _a;\n    if (((_a = options.targetFormat) !== null && _a !== void 0 ? _a : 'wire') === 'wire') {\n        let { compiler } = options;\n        if (!compiler) {\n            throw new Error(`when targetFormat===\"wire\" you must set the compiler or compilerPath option`);\n        }\n        return Object.assign(Object.assign({ outputModuleOverrides: {}, enableLegacyModules: [], transforms: [] }, options), { targetFormat: 'wire', compiler });\n    }\n    else {\n        return Object.assign(Object.assign({ outputModuleOverrides: {}, enableLegacyModules: [], transforms: [] }, options), { targetFormat: 'hbs' });\n    }\n}\nfunction makePlugin(loadOptions) {\n    return function htmlbarsInlinePrecompile(babel) {\n        let t = babel.types;\n        const plugin = {\n            visitor: {\n                Program: {\n                    enter(path, state) {\n                        state.normalizedOpts = normalizeOpts(loadOptions(state.opts));\n                        state.templateFactory = templateFactoryConfig(state.normalizedOpts);\n                        state.util = new babel_import_util_1.ImportUtil(babel, path);\n                        state.program = path;\n                        state.recursionGuard = new Set();\n                    },\n                    exit(_path, state) {\n                        if (state.normalizedOpts.targetFormat === 'wire') {\n                            for (let { moduleName, export: exportName } of configuredModules(state)) {\n                                state.util.removeImport(moduleName, exportName);\n                            }\n                        }\n                    },\n                },\n                TaggedTemplateExpression(path, state) {\n                    let tagPath = path.get('tag');\n                    if (!tagPath.isIdentifier()) {\n                        return;\n                    }\n                    let config = referencesInlineCompiler(tagPath, state);\n                    if (!config) {\n                        return;\n                    }\n                    if (!config.allowTemplateLiteral) {\n                        throw path.buildCodeFrameError(`Attempted to use \\`${tagPath.node.name}\\` as a template tag, but it can only be called as a function with a string passed to it: ${tagPath.node.name}('content here')`);\n                    }\n                    if (path.node.quasi.expressions.length) {\n                        throw path.buildCodeFrameError('placeholders inside a tagged template string are not supported');\n                    }\n                    let template = path.node.quasi.quasis.map((quasi) => quasi.value.cooked).join('');\n                    if (state.normalizedOpts.targetFormat === 'wire') {\n                        insertCompiledTemplate(babel, state, state.normalizedOpts, template, path, {}, config, undefined);\n                    }\n                    else {\n                        insertTransformedTemplate(babel, state, template, path, {}, config, undefined);\n                    }\n                },\n                CallExpression(path, state) {\n                    let calleePath = path.get('callee');\n                    if (!calleePath.isIdentifier()) {\n                        return;\n                    }\n                    let config = referencesInlineCompiler(calleePath, state);\n                    if (!config) {\n                        return;\n                    }\n                    if (state.recursionGuard.has(path.node)) {\n                        return;\n                    }\n                    if (path.get('arguments').length > 2) {\n                        throw path.buildCodeFrameError(`${calleePath.node.name} can only be invoked with 2 arguments: the template string and any static options`);\n                    }\n                    let [firstArg, secondArg] = path.get('arguments');\n                    let template;\n                    switch (firstArg === null || firstArg === void 0 ? void 0 : firstArg.node.type) {\n                        case 'StringLiteral':\n                            template = firstArg.node.value;\n                            break;\n                        case 'TemplateLiteral':\n                            if (firstArg.node.expressions.length) {\n                                throw path.buildCodeFrameError('placeholders inside a template string are not supported');\n                            }\n                            else {\n                                template = firstArg.node.quasis.map((quasi) => quasi.value.cooked).join('');\n                            }\n                            break;\n                        case 'TaggedTemplateExpression':\n                            throw path.buildCodeFrameError(`tagged template strings inside ${calleePath.node.name} are not supported`);\n                        default:\n                            throw path.buildCodeFrameError(`${calleePath.node.name} should be invoked with at least a single argument (the template string)`);\n                    }\n                    let userTypedOptions;\n                    let backingClass;\n                    if (!secondArg) {\n                        userTypedOptions = {};\n                    }\n                    else {\n                        if (!secondArg.isObjectExpression()) {\n                            throw path.buildCodeFrameError(`${calleePath.node.name} can only be invoked with 2 arguments: the template string, and any static options`);\n                        }\n                        userTypedOptions = new expression_parser_1.ExpressionParser(babel).parseObjectExpression(calleePath.node.name, secondArg, config.enableScope, Boolean(config.rfc931Support));\n                        if (config.rfc931Support && userTypedOptions.component) {\n                            backingClass = userTypedOptions.component;\n                        }\n                    }\n                    if (state.normalizedOpts.targetFormat === 'wire') {\n                        insertCompiledTemplate(babel, state, state.normalizedOpts, template, path, userTypedOptions, config, backingClass);\n                    }\n                    else {\n                        insertTransformedTemplate(babel, state, template, path, userTypedOptions, config, backingClass);\n                    }\n                },\n            },\n        };\n        return {\n            pre(file) {\n                // run our processing in pre so that imports for gts\n                // are kept for other plugins.\n                babel.traverse(file.ast, plugin.visitor, file.scope, this);\n            },\n            visitor: {},\n        };\n    };\n}\nfunction* configuredModules(state) {\n    for (let moduleConfig of INLINE_PRECOMPILE_MODULES) {\n        if (moduleConfig.moduleName !== '@ember/template-compilation' &&\n            moduleConfig.moduleName !== '@ember/template-compiler' &&\n            !state.normalizedOpts.enableLegacyModules.includes(moduleConfig.moduleName)) {\n            continue;\n        }\n        yield moduleConfig;\n    }\n}\nfunction referencesInlineCompiler(path, state) {\n    for (let moduleConfig of configuredModules(state)) {\n        if (path.referencesImport(moduleConfig.moduleName, moduleConfig.export)) {\n            return moduleConfig;\n        }\n    }\n    return undefined;\n}\nfunction runtimeErrorIIFE(babel, replacements) {\n    let statement = babel.template(`(function() {\\n  throw new Error('ERROR_MESSAGE');\\n})();`)(replacements);\n    return statement.expression;\n}\nfunction buildScopeLocals(userTypedOptions, formatOptions, target, mayUseLexicalThis) {\n    if (formatOptions.rfc931Support && userTypedOptions.eval) {\n        return new scope_locals_1.ScopeLocals({ mode: 'implicit', jsPath: target, mayUseLexicalThis });\n    }\n    else if (userTypedOptions.scope) {\n        return userTypedOptions.scope;\n    }\n    else {\n        return new scope_locals_1.ScopeLocals({ mode: 'explicit' });\n    }\n}\nfunction buildPrecompileOptions(babel, target, state, template, userTypedOptions, config, scope) {\n    let jsutils = new js_utils_1.JSUtils(babel, state, target, scope.add.bind(scope), state.util);\n    let meta = Object.assign({ jsutils }, userTypedOptions === null || userTypedOptions === void 0 ? void 0 : userTypedOptions.meta);\n    let output = {\n        contents: template,\n        // we've extended meta to add jsutils, but the types in @glimmer/syntax\n        // don't account for extension\n        meta: meta,\n        // TODO: embroider's template-compiler allows this to be overriden to get\n        // backward-compatible module names that don't match the real name of the\n        // on-disk file. What's our plan for migrating people away from that?\n        moduleName: state.filename,\n        // This is here so it's *always* the real filename. Historically, there is\n        // also `moduleName` but that did not match the real on-disk filename, it\n        // was the notional runtime module name from classic ember builds.\n        filename: state.filename,\n        plugins: {\n            // the cast is needed here only because our meta is extended. That is,\n            // these plugins can access meta.jsutils.\n            ast: [...state.normalizedOpts.transforms, scope.crawl()],\n        },\n    };\n    for (let [key, value] of Object.entries(userTypedOptions)) {\n        if (key !== 'scope') {\n            // `scope` in the user-facing API becomes `locals` in the low-level\n            // ember-template-compiler API\n            output[key] = value;\n        }\n    }\n    output.locals = scope.locals;\n    if (config.rfc931Support) {\n        output.strictMode = true;\n    }\n    return output;\n}\nfunction remapAndBindIdentifiers(target, babel, scopeLocals) {\n    target.traverse({\n        Identifier(path) {\n            var _a;\n            if (scopeLocals.has(path.node.name) && path.node.name !== scopeLocals.get(path.node.name)) {\n                // this identifier has different names in hbs vs js, so we need to\n                // replace the hbs name in the template compiler output with the js\n                // name\n                path.replaceWith(babel.types.identifier(scopeLocals.get(path.node.name)));\n            }\n            // this is where we tell babel's scope system about the new reference we\n            // just introduced. @babel/plugin-transform-typescript in particular\n            // cares a lot about those references being present.\n            (_a = path.scope.getBinding(path.node.name)) === null || _a === void 0 ? void 0 : _a.reference(path);\n        },\n    });\n}\nfunction insertCompiledTemplate(babel, state, opts, template, target, userTypedOptions, config, backingClass) {\n    let t = babel.types;\n    let scopeLocals = buildScopeLocals(userTypedOptions, config, target, !backingClass);\n    let options = buildPrecompileOptions(babel, target, state, template, userTypedOptions, config, scopeLocals);\n    let precompileResultString;\n    // insertRuntimeErrors is legacy and not supported by the newer rfc931 form\n    if (options.insertRuntimeErrors && !config.rfc931Support) {\n        try {\n            precompileResultString = opts.compiler.precompile(template, options);\n        }\n        catch (error) {\n            target.replaceWith(runtimeErrorIIFE(babel, { ERROR_MESSAGE: error.message }));\n            return;\n        }\n    }\n    else {\n        precompileResultString = opts.compiler.precompile(template, options);\n    }\n    let templateExpression = babel.template.expression.ast(precompileResultString);\n    t.addComment(templateExpression, 'leading', `\\n  ${template.replace(/\\*\\//g, '*\\\\/')}\\n`, \n    /* line comment? */ false);\n    state.util.replaceWith(target, (i) => {\n        var _a;\n        let templateFactoryIdentifier = i.import(state.templateFactory.moduleName, state.templateFactory.exportName);\n        let expression = t.callExpression(templateFactoryIdentifier, [templateExpression]);\n        if (config.rfc931Support) {\n            expression = t.callExpression(i.import('@ember/component', 'setComponentTemplate'), [\n                expression,\n                (_a = backingClass === null || backingClass === void 0 ? void 0 : backingClass.node) !== null && _a !== void 0 ? _a : t.callExpression(i.import('@ember/component/template-only', 'default', 'templateOnly'), []),\n            ]);\n        }\n        return expression;\n    });\n    remapAndBindIdentifiers(target, babel, scopeLocals);\n}\nfunction insertTransformedTemplate(babel, state, template, target, userTypedOptions, formatOptions, backingClass) {\n    let t = babel.types;\n    let scopeLocals = buildScopeLocals(userTypedOptions, formatOptions, target, !backingClass);\n    let options = buildPrecompileOptions(babel, target, state, template, userTypedOptions, formatOptions, scopeLocals);\n    let ast = (0, syntax_1.preprocess)(template, Object.assign(Object.assign({}, options), { mode: 'codemod' }));\n    let transformed = (0, syntax_1.print)(ast, { entityEncoding: 'raw' });\n    if (target.isCallExpression()) {\n        updateCallForm(target, transformed, formatOptions, scopeLocals, state, babel, backingClass);\n    }\n    else {\n        updateBacktickForm(scopeLocals, state, target, t, transformed, babel);\n    }\n}\nfunction updateBacktickForm(scopeLocals, state, target, t, transformed, babel) {\n    if (scopeLocals.isEmpty()) {\n        // simple case: just replace the string literal part with the transformed\n        // template contents\n        target.get('quasi').get('quasis.0').replaceWith(t.templateElement({ raw: transformed }));\n        return;\n    }\n    // need to add scope, so need to replace the backticks form with a call\n    // expression to precompileTemplate\n    maybePruneImport(state.util, target.get('tag'));\n    let newCall = state.util.replaceWith(target, (i) => t.callExpression(precompileTemplate(i), [t.stringLiteral(transformed)]));\n    updateScope(babel, newCall, scopeLocals);\n}\nfunction updateCallForm(target, transformed, formatOptions, scopeLocals, state, babel, backingClass) {\n    // first the simple part: replacing the string literal with the actual body of\n    // the rewritten template\n    target.get('arguments.0').replaceWith(babel.types.stringLiteral(transformed));\n    if (!formatOptions.enableScope && !scopeLocals.isEmpty()) {\n        // an AST transform added lexically scoped values to a template that\n        // wasn't already in a form that supports them, so convert form.\n        maybePruneImport(state.util, target.get('callee'));\n        state.util.replaceWith(target.get('callee'), (i) => precompileTemplate(i));\n    }\n    if (formatOptions.rfc931Support === 'polyfilled') {\n        maybePruneImport(state.util, target.get('callee'));\n        state.util.replaceWith(target.get('callee'), (i) => precompileTemplate(i));\n        convertStrictMode(babel, target);\n        removeEvalAndScope(target);\n        target.node.arguments = target.node.arguments.slice(0, 2);\n        state.recursionGuard.add(target.node);\n        state.util.replaceWith(target, (i) => {\n            var _a;\n            return babel.types.callExpression(i.import('@ember/component', 'setComponentTemplate'), [\n                target.node,\n                (_a = backingClass === null || backingClass === void 0 ? void 0 : backingClass.node) !== null && _a !== void 0 ? _a : babel.types.callExpression(i.import('@ember/component/template-only', 'default', 'templateOnly'), []),\n            ]);\n        });\n        // we just wrapped the target callExpression in the call to\n        // setComponentTemplate. Adjust `target` back to point at the\n        // precompileTemplate call for the final updateScope below.\n        //\n        target = target.get('arguments.0');\n    }\n    // We deliberately do updateScope at the end so that when it updates\n    // references, those references will point to the accurate paths in the\n    // final AST.\n    updateScope(babel, target, scopeLocals);\n}\nfunction templateFactoryConfig(opts) {\n    var _a;\n    let moduleName = '@ember/template-factory';\n    let exportName = 'createTemplateFactory';\n    let overrides = (_a = opts.outputModuleOverrides[moduleName]) === null || _a === void 0 ? void 0 : _a[exportName];\n    return overrides\n        ? { exportName: overrides[0], moduleName: overrides[1] }\n        : { exportName, moduleName };\n}\nfunction buildScope(babel, locals) {\n    let t = babel.types;\n    return t.arrowFunctionExpression([], t.objectExpression(locals\n        .entries()\n        .map(([name, identifier]) => t.objectProperty(t.identifier(name), t.identifier(identifier), false, name !== 'this'))));\n}\n// this is responsible both for adjusting the AST for our scope argument *and*\n// ensuring that babel's scope system will see that these new identifiers\n// reference their bindings. @babel/plugin-transform-typescript in particular\n// cares an awful lot about whether an import has valid non-type references, so\n// these newly introducd references need to be valid.\nfunction updateScope(babel, target, locals) {\n    let t = babel.types;\n    let secondArg = target.get('arguments.1');\n    if (secondArg) {\n        let scope = secondArg.get('properties').find((p) => {\n            let key = p.get('key');\n            return key.isIdentifier() && key.node.name === 'scope';\n        });\n        if (scope) {\n            if (locals.isEmpty()) {\n                scope.remove();\n            }\n            else {\n                scope.set('value', buildScope(babel, locals));\n                // funny-looking naming here, but it actually makes sense because we're\n                // connecting the glimmer scope system with the babel scope system.\n                scope.scope.crawl();\n            }\n        }\n        else if (!locals.isEmpty()) {\n            secondArg.pushContainer('properties', t.objectProperty(t.identifier('scope'), buildScope(babel, locals)));\n            secondArg.get(`properties.${secondArg.node.properties.length - 1}`).scope.crawl();\n        }\n    }\n    else if (!locals.isEmpty()) {\n        target.pushContainer('arguments', t.objectExpression([t.objectProperty(t.identifier('scope'), buildScope(babel, locals))]));\n        target.get('arguments.1').scope.crawl();\n    }\n}\nfunction removeEvalAndScope(target) {\n    let secondArg = target.get('arguments.1');\n    if (secondArg) {\n        let evalProp = secondArg.get('properties').find((p) => {\n            let key = p.get('key');\n            return key.isIdentifier() && key.node.name === 'eval';\n        });\n        if (evalProp) {\n            evalProp.remove();\n        }\n        let componentProp = secondArg.get('properties').find((p) => {\n            let key = p.get('key');\n            return key.isIdentifier() && key.node.name === 'component';\n        });\n        if (componentProp) {\n            componentProp.remove();\n        }\n    }\n}\n// Given a call to template(), convert its \"strict\" argument into\n// precompileTemplate's \"strictMode\" argument. They differ in name and default\n// value.\nfunction convertStrictMode(babel, target) {\n    let t = babel.types;\n    let secondArg = target.get('arguments.1');\n    if (secondArg) {\n        let strict = secondArg.get('properties').find((p) => {\n            let key = p.get('key');\n            return key.isIdentifier() && key.node.name === 'strict';\n        });\n        if (strict) {\n            strict.set('key', t.identifier('strictMode'));\n        }\n        else {\n            secondArg.pushContainer('properties', t.objectProperty(t.identifier('strictMode'), t.booleanLiteral(true)));\n        }\n    }\n    else {\n        target.pushContainer('arguments', t.objectExpression([t.objectProperty(t.identifier('strictMode'), t.booleanLiteral(true))]));\n    }\n}\nfunction maybePruneImport(util, identifier) {\n    if (!identifier.isIdentifier()) {\n        return;\n    }\n    let binding = identifier.scope.getBinding(identifier.node.name);\n    if (!binding) {\n        return;\n    }\n    let found = binding.referencePaths.find((path) => path.node === identifier.node);\n    if (!found) {\n        return;\n    }\n    binding.referencePaths.splice(binding.referencePaths.indexOf(found), 1);\n    binding.references--;\n    if (binding.references === 0) {\n        let specifier = binding.path;\n        if (specifier.isImportSpecifier()) {\n            let declaration = specifier.parentPath;\n            util.removeImport(declaration.node.source.value, name(specifier.node.imported));\n        }\n    }\n}\nfunction precompileTemplate(i) {\n    return i.import('@ember/template-compilation', 'precompileTemplate');\n}\nfunction name(node) {\n    if (node.type === 'StringLiteral') {\n        return node.value;\n    }\n    else {\n        return node.name;\n    }\n}\nexports.default = makePlugin((options) => options);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGx1Z2luLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicGx1Z2luLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1SkEsZ0NBZ0xDO0FBcFVELHlEQUE4RDtBQUM5RCwyREFBdUQ7QUFDdkQseUNBQTREO0FBRzVELGlEQUE2QztBQUM3Qyw0Q0FBMkU7QUFFM0UsaURBQStCO0FBWS9CLE1BQU0seUJBQXlCLEdBQW1CO0lBQ2hEO1FBQ0UsVUFBVSxFQUFFLG9CQUFvQjtRQUNoQyxNQUFNLEVBQUUsS0FBSztRQUNiLG9CQUFvQixFQUFFLElBQUk7S0FDM0I7SUFDRDtRQUNFLFVBQVUsRUFBRSxzQ0FBc0M7UUFDbEQsTUFBTSxFQUFFLFNBQVM7UUFDakIsb0JBQW9CLEVBQUUsSUFBSTtLQUMzQjtJQUNEO1FBQ0UsVUFBVSxFQUFFLDRCQUE0QjtRQUN4QyxNQUFNLEVBQUUsU0FBUztRQUNqQixvQkFBb0IsRUFBRSxJQUFJO0tBQzNCO0lBQ0Q7UUFDRSxVQUFVLEVBQUUsNkJBQTZCO1FBQ3pDLE1BQU0sRUFBRSxvQkFBb0I7UUFDNUIsV0FBVyxFQUFFLElBQUk7S0FDbEI7SUFDRDtRQUNFLFVBQVUsRUFBRSwwQkFBMEI7UUFDdEMsTUFBTSxFQUFFLFVBQVU7UUFDbEIsV0FBVyxFQUFFLElBQUk7UUFDakIsYUFBYSxFQUFFLFlBQVk7S0FDNUI7Q0FDRixDQUFDO0FBK0RGLFNBQVMsYUFBYSxDQUFDLE9BQWdCOztJQUNyQyxJQUFJLENBQUMsTUFBQSxPQUFPLENBQUMsWUFBWSxtQ0FBSSxNQUFNLENBQUMsS0FBSyxNQUFNLEVBQUUsQ0FBQztRQUNoRCxJQUFJLEVBQUUsUUFBUSxFQUFFLEdBQUcsT0FBTyxDQUFDO1FBQzNCLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNkLE1BQU0sSUFBSSxLQUFLLENBQ2IsNkVBQTZFLENBQzlFLENBQUM7UUFDSixDQUFDO1FBQ0QscUNBQ0UscUJBQXFCLEVBQUUsRUFBRSxFQUN6Qixt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QUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUVyQixJQUFJLE9BQU8sQ0FBQyxVQUFVLEtBQUssQ0FBQyxFQUFFLENBQUM7UUFDN0IsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztRQUM3QixJQUFJLFNBQVMsQ0FBQyxpQkFBaUIsRUFBRSxFQUFFLENBQUM7WUFDbEMsSUFBSSxXQUFXLEdBQUcsU0FBUyxDQUFDLFVBQTJDLENBQUM7WUFDeEUsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUNsRixDQUFDO0lBQ0gsQ0FBQztBQUNILENBQUM7QUFFRCxTQUFTLGtCQUFrQixDQUFDLENBQVc7SUFDckMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLDZCQUE2QixFQUFFLG9CQUFvQixDQUFDLENBQUM7QUFDdkUsQ0FBQztBQUVELFNBQVMsSUFBSSxDQUFDLElBQW9DO0lBQ2hELElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxlQUFlLEVBQUUsQ0FBQztRQUNsQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDcEIsQ0FBQztTQUFNLENBQUM7UUFDTixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbkIsQ0FBQztBQUNILENBQUM7QUFFRCxrQkFBZSxVQUFVLENBQVUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOb2RlUGF0aCB9IGZyb20gJ0BiYWJlbC90cmF2ZXJzZSc7XG5pbXBvcnQgdHlwZSAqIGFzIEJhYmVsIGZyb20gJ0BiYWJlbC9jb3JlJztcbmltcG9ydCB0eXBlIHsgdHlwZXMgYXMgdCB9IGZyb20gJ0BiYWJlbC9jb3JlJztcbmltcG9ydCB7IEltcG9ydFV0aWwsIHR5cGUgSW1wb3J0ZXIgfSBmcm9tICdiYWJlbC1pbXBvcnQtdXRpbCc7XG5pbXBvcnQgeyBFeHByZXNzaW9uUGFyc2VyIH0gZnJvbSAnLi9leHByZXNzaW9uLXBhcnNlcic7XG5pbXBvcnQgeyBKU1V0aWxzLCBFeHRlbmRlZFBsdWdpbkJ1aWxkZXIgfSBmcm9tICcuL2pzLXV0aWxzJztcbmltcG9ydCB0eXBlIHsgRW1iZXJUZW1wbGF0ZUNvbXBpbGVyLCBQcmVwcm9jZXNzT3B0aW9ucyB9IGZyb20gJy4vZW1iZXItdGVtcGxhdGUtY29tcGlsZXInO1xuaW1wb3J0IHsgTGVnYWN5TW9kdWxlTmFtZSB9IGZyb20gJy4vcHVibGljLXR5cGVzJztcbmltcG9ydCB7IFNjb3BlTG9jYWxzIH0gZnJvbSAnLi9zY29wZS1sb2NhbHMnO1xuaW1wb3J0IHsgdHlwZSBBU1RQbHVnaW5CdWlsZGVyLCBwcmVwcm9jZXNzLCBwcmludCB9IGZyb20gJ0BnbGltbWVyL3N5bnRheCc7XG5cbmV4cG9ydCAqIGZyb20gJy4vcHVibGljLXR5cGVzJztcblxudHlwZSBNb2R1bGVOYW1lID0gTGVnYWN5TW9kdWxlTmFtZSB8ICdAZW1iZXIvdGVtcGxhdGUtY29tcGlsYXRpb24nIHwgJ0BlbWJlci90ZW1wbGF0ZS1jb21waWxlcic7XG5cbmludGVyZmFjZSBNb2R1bGVDb25maWcge1xuICBtb2R1bGVOYW1lOiBNb2R1bGVOYW1lO1xuICBleHBvcnQ6IHN0cmluZztcbiAgYWxsb3dUZW1wbGF0ZUxpdGVyYWw/OiB0cnVlO1xuICBlbmFibGVTY29wZT86IHRydWU7XG4gIHJmYzkzMVN1cHBvcnQ/OiAncG9seWZpbGxlZCc7XG59XG5cbmNvbnN0IElOTElORV9QUkVDT01QSUxFX01PRFVMRVM6IE1vZHVsZUNvbmZpZ1tdID0gW1xuICB7XG4gICAgbW9kdWxlTmFtZTogJ2VtYmVyLWNsaS1odG1sYmFycycsXG4gICAgZXhwb3J0OiAnaGJzJyxcbiAgICBhbGxvd1RlbXBsYXRlTGl0ZXJhbDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIG1vZHVsZU5hbWU6ICdlbWJlci1jbGktaHRtbGJhcnMtaW5saW5lLXByZWNvbXBpbGUnLFxuICAgIGV4cG9ydDogJ2RlZmF1bHQnLFxuICAgIGFsbG93VGVtcGxhdGVMaXRlcmFsOiB0cnVlLFxuICB9LFxuICB7XG4gICAgbW9kdWxlTmFtZTogJ2h0bWxiYXJzLWlubGluZS1wcmVjb21waWxlJyxcbiAgICBleHBvcnQ6ICdkZWZhdWx0JyxcbiAgICBhbGxvd1RlbXBsYXRlTGl0ZXJhbDogdHJ1ZSxcbiAgfSxcbiAge1xuICAgIG1vZHVsZU5hbWU6ICdAZW1iZXIvdGVtcGxhdGUtY29tcGlsYXRpb24nLFxuICAgIGV4cG9ydDogJ3ByZWNvbXBpbGVUZW1wbGF0ZScsXG4gICAgZW5hYmxlU2NvcGU6IHRydWUsXG4gIH0sXG4gIHtcbiAgICBtb2R1bGVOYW1lOiAnQGVtYmVyL3RlbXBsYXRlLWNvbXBpbGVyJyxcbiAgICBleHBvcnQ6ICd0ZW1wbGF0ZScsXG4gICAgZW5hYmxlU2NvcGU6IHRydWUsXG4gICAgcmZjOTMxU3VwcG9ydDogJ3BvbHlmaWxsZWQnLFxuICB9LFxuXTtcblxuZXhwb3J0IGludGVyZmFjZSBPcHRpb25zIHtcbiAgLy8gVGhlIGVtYmVyLXRlbXBsYXRlLWNvbXBpbGVyLmpzIG1vZHVsZSB0aGF0IHNoaXBzIHdpdGhpbiB5b3VyIGVtYmVyLXNvdXJjZVxuICAvLyB2ZXJzaW9uLiBNYW5kYXRvcnkgd2hlbiB1c2luZyB0YXJnZXRGb3JtYXQ6ICd3aXJlJy5cbiAgY29tcGlsZXI/OiBFbWJlclRlbXBsYXRlQ29tcGlsZXI7XG5cbiAgLy8gQWxsb3dzIHlvdSB0byByZW1hcCB3aGF0IGltcG9ydHMgd2lsbCBiZSBlbWl0dGVkIGluIG91ciBjb21waWxlZCBvdXRwdXQuIEJ5XG4gIC8vIGV4YW1wbGU6XG4gIC8vXG4gIC8vICAgb3V0cHV0TW9kdWxlT3ZlcnJpZGVzOiB7XG4gIC8vICAgICAnQGVtYmVyL3RlbXBsYXRlLWZhY3RvcnknOiB7XG4gIC8vICAgICAgIGNyZWF0ZVRlbXBsYXRlRmFjdG9yeTogWydjcmVhdGVUZW1wbGF0ZUZhY3RvcnknLCAnQGdsaW1tZXIvY29yZSddLFxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy9cbiAgLy8gTm9ybWFsIEVtYmVyIGFwcHMgc2hvdWxkbid0IG5lZWQgdGhpcywgaXQgZXhpc3RzIHRvIHN1cHBvcnQgb3RoZXJcbiAgLy8gZW52aXJvbm1lbnRzIGxpa2Ugc3RhbmRhbG9uZSBHbGltbWVySlNcbiAgb3V0cHV0TW9kdWxlT3ZlcnJpZGVzPzogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgW3N0cmluZywgc3RyaW5nXT4+O1xuXG4gIC8vIEJ5IGRlZmF1bHQsIHRoaXMgcGx1Z2luIGltcGxlbWVudHMgb25seSBFbWJlcidzIHN0YWJsZSBwdWJsaWMgQVBJIGZvclxuICAvLyB0ZW1wbGF0ZSBjb21waWxhdGlvbiwgd2hpY2ggaXM6XG4gIC8vXG4gIC8vICAgIGltcG9ydCB7IHByZWNvbXBpbGVUZW1wbGF0ZSB9IGZyb20gJ0BlbWJlci90ZW1wbGF0ZS1jb21waWxhdGlvbic7XG4gIC8vXG4gIC8vIEJ1dCBoaXN0b3JpY2FsbHkgdGhlcmUgYXJlIHNldmVyYWwgb3RoZXIgaW1wb3J0YWJsZSBzeW50YXhlcyBpbiB3aWRlc3ByZWFkXG4gIC8vIHVzZSwgYW5kIHdlIGNhbiBlbmFibGUgdGhvc2UgdG9vIGJ5IGluY2x1ZGluZyB0aGVpciBtb2R1bGUgbmFtZXMgaW4gdGhpc1xuICAvLyBsaXN0LlxuICBlbmFibGVMZWdhY3lNb2R1bGVzPzogTGVnYWN5TW9kdWxlTmFtZVtdO1xuXG4gIC8vIENvbnRyb2xzIHRoZSBvdXRwdXQgZm9ybWF0LlxuICAvL1xuICAvLyAgXCJ3aXJlXCI6IFRoZSBkZWZhdWx0LiBJbiB0aGUgb3V0cHV0LCB5b3VyIHRlbXBsYXRlcyBhcmUgcmVhZHkgdG8gZXhlY3V0ZSBpblxuICAvLyAgdGhlIG1vc3QgcGVyZm9ybWFudCB3YXkuXG4gIC8vXG4gIC8vICBcImhic1wiOiBJbiB0aGUgb3V0cHV0LCB5b3VyIHRlbXBsYXRlcyB3aWxsIHN0aWxsIGJlIGluIEhCUyBmb3JtYXQuXG4gIC8vICBHZW5lcmFsbHkgdGhpcyBtZWFucyB0aGV5IHdpbGwgc3RpbGwgbmVlZCBmdXJ0aGVyIHByb2Nlc3NpbmcgYmVmb3JlXG4gIC8vICB0aGV5J3JlIHJlYWR5IHRvIGV4ZWN1dGUuIFRoZSBwdXJwb3NlIG9mIHRoaXMgbW9kZSBpcyB0byBzdXBwb3J0IHRoaW5nc1xuICAvLyAgbGlrZSBjb2RlbW9kcyBhbmQgcHJlLXB1YmxpY2F0aW9uIHRyYW5zZm9ybWF0aW9ucyBpbiBsaWJyYXJpZXMuXG4gIHRhcmdldEZvcm1hdD86ICd3aXJlJyB8ICdoYnMnO1xuXG4gIC8vIE9wdGlvbmFsIGxpc3Qgb2YgY3VzdG9tIHRyYW5zZm9ybXMgdG8gYXBwbHkgdG8gdGhlIGhhbmRsZWJhcnMgQVNUIGJlZm9yZVxuICAvLyBjb21waWxhdGlvbi5cbiAgdHJhbnNmb3Jtcz86IEV4dGVuZGVkUGx1Z2luQnVpbGRlcltdO1xufVxuXG5pbnRlcmZhY2UgV2lyZU9wdHMge1xuICB0YXJnZXRGb3JtYXQ6ICd3aXJlJztcbiAgY29tcGlsZXI6IEVtYmVyVGVtcGxhdGVDb21waWxlcjtcbiAgb3V0cHV0TW9kdWxlT3ZlcnJpZGVzOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBbc3RyaW5nLCBzdHJpbmddPj47XG4gIGVuYWJsZUxlZ2FjeU1vZHVsZXM6IExlZ2FjeU1vZHVsZU5hbWVbXTtcbiAgdHJhbnNmb3JtczogRXh0ZW5kZWRQbHVnaW5CdWlsZGVyW107XG59XG5cbmludGVyZmFjZSBIYnNPcHRzIHtcbiAgdGFyZ2V0Rm9ybWF0OiAnaGJzJztcbiAgb3V0cHV0TW9kdWxlT3ZlcnJpZGVzOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBbc3RyaW5nLCBzdHJpbmddPj47XG4gIGVuYWJsZUxlZ2FjeU1vZHVsZXM6IExlZ2FjeU1vZHVsZU5hbWVbXTtcbiAgdHJhbnNmb3JtczogRXh0ZW5kZWRQbHVnaW5CdWlsZGVyW107XG59XG5cbnR5cGUgTm9ybWFsaXplZE9wdHMgPSBXaXJlT3B0cyB8IEhic09wdHM7XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZU9wdHMob3B0aW9uczogT3B0aW9ucyk6IE5vcm1hbGl6ZWRPcHRzIHtcbiAgaWYgKChvcHRpb25zLnRhcmdldEZvcm1hdCA/PyAnd2lyZScpID09PSAnd2lyZScpIHtcbiAgICBsZXQgeyBjb21waWxlciB9ID0gb3B0aW9ucztcbiAgICBpZiAoIWNvbXBpbGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGB3aGVuIHRhcmdldEZvcm1hdD09PVwid2lyZVwiIHlvdSBtdXN0IHNldCB0aGUgY29tcGlsZXIgb3IgY29tcGlsZXJQYXRoIG9wdGlvbmBcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBvdXRwdXRNb2R1bGVPdmVycmlkZXM6IHt9LFxuICAgICAgZW5hYmxlTGVnYWN5TW9kdWxlczogW10sXG4gICAgICB0cmFuc2Zvcm1zOiBbXSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICB0YXJnZXRGb3JtYXQ6ICd3aXJlJyxcbiAgICAgIGNvbXBpbGVyLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG91dHB1dE1vZHVsZU92ZXJyaWRlczoge30sXG4gICAgICBlbmFibGVMZWdhY3lNb2R1bGVzOiBbXSxcbiAgICAgIHRyYW5zZm9ybXM6IFtdLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHRhcmdldEZvcm1hdDogJ2hicycsXG4gICAgfTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgU3RhdGU8RW52U3BlY2lmaWNPcHRpb25zPiB7XG4gIG9wdHM6IEVudlNwZWNpZmljT3B0aW9ucztcbiAgbm9ybWFsaXplZE9wdHM6IE5vcm1hbGl6ZWRPcHRzO1xuICB1dGlsOiBJbXBvcnRVdGlsO1xuICB0ZW1wbGF0ZUZhY3Rvcnk6IHsgbW9kdWxlTmFtZTogc3RyaW5nOyBleHBvcnROYW1lOiBzdHJpbmcgfTtcbiAgcHJvZ3JhbTogTm9kZVBhdGg8dC5Qcm9ncmFtPjtcbiAgbGFzdEluc2VydGVkUGF0aDogTm9kZVBhdGg8dC5TdGF0ZW1lbnQ+IHwgdW5kZWZpbmVkO1xuICBmaWxlbmFtZTogc3RyaW5nO1xuICByZWN1cnNpb25HdWFyZDogU2V0PHVua25vd24+O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVBsdWdpbjxFbnZTcGVjaWZpY09wdGlvbnM+KGxvYWRPcHRpb25zOiAob3B0czogRW52U3BlY2lmaWNPcHRpb25zKSA9PiBPcHRpb25zKSB7XG4gIHJldHVybiBmdW5jdGlvbiBodG1sYmFyc0lubGluZVByZWNvbXBpbGUoXG4gICAgYmFiZWw6IHR5cGVvZiBCYWJlbFxuICApOiBCYWJlbC5QbHVnaW5PYmo8U3RhdGU8RW52U3BlY2lmaWNPcHRpb25zPj4ge1xuICAgIGxldCB0ID0gYmFiZWwudHlwZXM7XG5cbiAgICBjb25zdCBwbHVnaW4gPSB7XG4gICAgICB2aXNpdG9yOiB7XG4gICAgICAgIFByb2dyYW06IHtcbiAgICAgICAgICBlbnRlcihwYXRoOiBOb2RlUGF0aDx0LlByb2dyYW0+LCBzdGF0ZTogU3RhdGU8RW52U3BlY2lmaWNPcHRpb25zPikge1xuICAgICAgICAgICAgc3RhdGUubm9ybWFsaXplZE9wdHMgPSBub3JtYWxpemVPcHRzKGxvYWRPcHRpb25zKHN0YXRlLm9wdHMpKTtcbiAgICAgICAgICAgIHN0YXRlLnRlbXBsYXRlRmFjdG9yeSA9IHRlbXBsYXRlRmFjdG9yeUNvbmZpZyhzdGF0ZS5ub3JtYWxpemVkT3B0cyk7XG4gICAgICAgICAgICBzdGF0ZS51dGlsID0gbmV3IEltcG9ydFV0aWwoYmFiZWwsIHBhdGgpO1xuICAgICAgICAgICAgc3RhdGUucHJvZ3JhbSA9IHBhdGg7XG4gICAgICAgICAgICBzdGF0ZS5yZWN1cnNpb25HdWFyZCA9IG5ldyBTZXQoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGV4aXQoX3BhdGg6IE5vZGVQYXRoPHQuUHJvZ3JhbT4sIHN0YXRlOiBTdGF0ZTxFbnZTcGVjaWZpY09wdGlvbnM+KSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUubm9ybWFsaXplZE9wdHMudGFyZ2V0Rm9ybWF0ID09PSAnd2lyZScpIHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgeyBtb2R1bGVOYW1lLCBleHBvcnQ6IGV4cG9ydE5hbWUgfSBvZiBjb25maWd1cmVkTW9kdWxlcyhzdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS51dGlsLnJlbW92ZUltcG9ydChtb2R1bGVOYW1lLCBleHBvcnROYW1lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG5cbiAgICAgICAgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uKFxuICAgICAgICAgIHBhdGg6IE5vZGVQYXRoPHQuVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uPixcbiAgICAgICAgICBzdGF0ZTogU3RhdGU8RW52U3BlY2lmaWNPcHRpb25zPlxuICAgICAgICApIHtcbiAgICAgICAgICBsZXQgdGFnUGF0aCA9IHBhdGguZ2V0KCd0YWcnKTtcblxuICAgICAgICAgIGlmICghdGFnUGF0aC5pc0lkZW50aWZpZXIoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgY29uZmlnID0gcmVmZXJlbmNlc0lubGluZUNvbXBpbGVyKHRhZ1BhdGgsIHN0YXRlKTtcbiAgICAgICAgICBpZiAoIWNvbmZpZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghY29uZmlnLmFsbG93VGVtcGxhdGVMaXRlcmFsKSB7XG4gICAgICAgICAgICB0aHJvdyBwYXRoLmJ1aWxkQ29kZUZyYW1lRXJyb3IoXG4gICAgICAgICAgICAgIGBBdHRlbXB0ZWQgdG8gdXNlIFxcYCR7dGFnUGF0aC5ub2RlLm5hbWV9XFxgIGFzIGEgdGVtcGxhdGUgdGFnLCBidXQgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24gd2l0aCBhIHN0cmluZyBwYXNzZWQgdG8gaXQ6ICR7dGFnUGF0aC5ub2RlLm5hbWV9KCdjb250ZW50IGhlcmUnKWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHBhdGgubm9kZS5xdWFzaS5leHByZXNzaW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IHBhdGguYnVpbGRDb2RlRnJhbWVFcnJvcihcbiAgICAgICAgICAgICAgJ3BsYWNlaG9sZGVycyBpbnNpZGUgYSB0YWdnZWQgdGVtcGxhdGUgc3RyaW5nIGFyZSBub3Qgc3VwcG9ydGVkJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBwYXRoLm5vZGUucXVhc2kucXVhc2lzLm1hcCgocXVhc2kpID0+IHF1YXNpLnZhbHVlLmNvb2tlZCkuam9pbignJyk7XG4gICAgICAgICAgaWYgKHN0YXRlLm5vcm1hbGl6ZWRPcHRzLnRhcmdldEZvcm1hdCA9PT0gJ3dpcmUnKSB7XG4gICAgICAgICAgICBpbnNlcnRDb21waWxlZFRlbXBsYXRlKFxuICAgICAgICAgICAgICBiYWJlbCxcbiAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgIHN0YXRlLm5vcm1hbGl6ZWRPcHRzLFxuICAgICAgICAgICAgICB0ZW1wbGF0ZSxcbiAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgdW5kZWZpbmVkXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnNlcnRUcmFuc2Zvcm1lZFRlbXBsYXRlKGJhYmVsLCBzdGF0ZSwgdGVtcGxhdGUsIHBhdGgsIHt9LCBjb25maWcsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIENhbGxFeHByZXNzaW9uKHBhdGg6IE5vZGVQYXRoPHQuQ2FsbEV4cHJlc3Npb24+LCBzdGF0ZTogU3RhdGU8RW52U3BlY2lmaWNPcHRpb25zPikge1xuICAgICAgICAgIGxldCBjYWxsZWVQYXRoID0gcGF0aC5nZXQoJ2NhbGxlZScpO1xuXG4gICAgICAgICAgaWYgKCFjYWxsZWVQYXRoLmlzSWRlbnRpZmllcigpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBjb25maWcgPSByZWZlcmVuY2VzSW5saW5lQ29tcGlsZXIoY2FsbGVlUGF0aCwgc3RhdGUpO1xuICAgICAgICAgIGlmICghY29uZmlnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHN0YXRlLnJlY3Vyc2lvbkd1YXJkLmhhcyhwYXRoLm5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHBhdGguZ2V0KCdhcmd1bWVudHMnKS5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICB0aHJvdyBwYXRoLmJ1aWxkQ29kZUZyYW1lRXJyb3IoXG4gICAgICAgICAgICAgIGAke2NhbGxlZVBhdGgubm9kZS5uYW1lfSBjYW4gb25seSBiZSBpbnZva2VkIHdpdGggMiBhcmd1bWVudHM6IHRoZSB0ZW1wbGF0ZSBzdHJpbmcgYW5kIGFueSBzdGF0aWMgb3B0aW9uc2BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IFtmaXJzdEFyZywgc2Vjb25kQXJnXSA9IHBhdGguZ2V0KCdhcmd1bWVudHMnKTtcblxuICAgICAgICAgIGxldCB0ZW1wbGF0ZTtcblxuICAgICAgICAgIHN3aXRjaCAoZmlyc3RBcmc/Lm5vZGUudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnU3RyaW5nTGl0ZXJhbCc6XG4gICAgICAgICAgICAgIHRlbXBsYXRlID0gZmlyc3RBcmcubm9kZS52YWx1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdUZW1wbGF0ZUxpdGVyYWwnOlxuICAgICAgICAgICAgICBpZiAoZmlyc3RBcmcubm9kZS5leHByZXNzaW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBwYXRoLmJ1aWxkQ29kZUZyYW1lRXJyb3IoXG4gICAgICAgICAgICAgICAgICAncGxhY2Vob2xkZXJzIGluc2lkZSBhIHRlbXBsYXRlIHN0cmluZyBhcmUgbm90IHN1cHBvcnRlZCdcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gZmlyc3RBcmcubm9kZS5xdWFzaXMubWFwKChxdWFzaSkgPT4gcXVhc2kudmFsdWUuY29va2VkKS5qb2luKCcnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1RhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbic6XG4gICAgICAgICAgICAgIHRocm93IHBhdGguYnVpbGRDb2RlRnJhbWVFcnJvcihcbiAgICAgICAgICAgICAgICBgdGFnZ2VkIHRlbXBsYXRlIHN0cmluZ3MgaW5zaWRlICR7Y2FsbGVlUGF0aC5ub2RlLm5hbWV9IGFyZSBub3Qgc3VwcG9ydGVkYFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgdGhyb3cgcGF0aC5idWlsZENvZGVGcmFtZUVycm9yKFxuICAgICAgICAgICAgICAgIGAke2NhbGxlZVBhdGgubm9kZS5uYW1lfSBzaG91bGQgYmUgaW52b2tlZCB3aXRoIGF0IGxlYXN0IGEgc2luZ2xlIGFyZ3VtZW50ICh0aGUgdGVtcGxhdGUgc3RyaW5nKWBcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgdXNlclR5cGVkT3B0aW9uczogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgICAgICAgbGV0IGJhY2tpbmdDbGFzczogdW5kZWZpbmVkIHwgTm9kZVBhdGg8UGFyYW1ldGVyczx0eXBlb2YgdC5jYWxsRXhwcmVzc2lvbj5bMV1bbnVtYmVyXT47XG5cbiAgICAgICAgICBpZiAoIXNlY29uZEFyZykge1xuICAgICAgICAgICAgdXNlclR5cGVkT3B0aW9ucyA9IHt9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXNlY29uZEFyZy5pc09iamVjdEV4cHJlc3Npb24oKSkge1xuICAgICAgICAgICAgICB0aHJvdyBwYXRoLmJ1aWxkQ29kZUZyYW1lRXJyb3IoXG4gICAgICAgICAgICAgICAgYCR7Y2FsbGVlUGF0aC5ub2RlLm5hbWV9IGNhbiBvbmx5IGJlIGludm9rZWQgd2l0aCAyIGFyZ3VtZW50czogdGhlIHRlbXBsYXRlIHN0cmluZywgYW5kIGFueSBzdGF0aWMgb3B0aW9uc2BcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXNlclR5cGVkT3B0aW9ucyA9IG5ldyBFeHByZXNzaW9uUGFyc2VyKGJhYmVsKS5wYXJzZU9iamVjdEV4cHJlc3Npb24oXG4gICAgICAgICAgICAgIGNhbGxlZVBhdGgubm9kZS5uYW1lLFxuICAgICAgICAgICAgICBzZWNvbmRBcmcsXG4gICAgICAgICAgICAgIGNvbmZpZy5lbmFibGVTY29wZSxcbiAgICAgICAgICAgICAgQm9vbGVhbihjb25maWcucmZjOTMxU3VwcG9ydClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnJmYzkzMVN1cHBvcnQgJiYgdXNlclR5cGVkT3B0aW9ucy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgYmFja2luZ0NsYXNzID0gdXNlclR5cGVkT3B0aW9ucy5jb21wb25lbnQgYXMgTm9kZVBhdGg8XG4gICAgICAgICAgICAgICAgUGFyYW1ldGVyczx0eXBlb2YgdC5jYWxsRXhwcmVzc2lvbj5bMV1bbnVtYmVyXVxuICAgICAgICAgICAgICA+O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzdGF0ZS5ub3JtYWxpemVkT3B0cy50YXJnZXRGb3JtYXQgPT09ICd3aXJlJykge1xuICAgICAgICAgICAgaW5zZXJ0Q29tcGlsZWRUZW1wbGF0ZShcbiAgICAgICAgICAgICAgYmFiZWwsXG4gICAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgICBzdGF0ZS5ub3JtYWxpemVkT3B0cyxcbiAgICAgICAgICAgICAgdGVtcGxhdGUsXG4gICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgIHVzZXJUeXBlZE9wdGlvbnMsXG4gICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgYmFja2luZ0NsYXNzXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnNlcnRUcmFuc2Zvcm1lZFRlbXBsYXRlKFxuICAgICAgICAgICAgICBiYWJlbCxcbiAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgIHRlbXBsYXRlLFxuICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICB1c2VyVHlwZWRPcHRpb25zLFxuICAgICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICAgIGJhY2tpbmdDbGFzc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgcHJlKHRoaXM6IFN0YXRlPEVudlNwZWNpZmljT3B0aW9ucz4sIGZpbGUpIHtcbiAgICAgICAgLy8gcnVuIG91ciBwcm9jZXNzaW5nIGluIHByZSBzbyB0aGF0IGltcG9ydHMgZm9yIGd0c1xuICAgICAgICAvLyBhcmUga2VwdCBmb3Igb3RoZXIgcGx1Z2lucy5cbiAgICAgICAgYmFiZWwudHJhdmVyc2UoZmlsZS5hc3QsIHBsdWdpbi52aXNpdG9yLCBmaWxlLnNjb3BlLCB0aGlzKTtcbiAgICAgIH0sXG4gICAgICB2aXNpdG9yOiB7fSxcbiAgICB9O1xuICB9IGFzIChiYWJlbDogdHlwZW9mIEJhYmVsKSA9PiBCYWJlbC5QbHVnaW5PYmo8dW5rbm93bj47XG59XG5cbmZ1bmN0aW9uKiBjb25maWd1cmVkTW9kdWxlczxFbnZTcGVjaWZpY09wdGlvbnM+KHN0YXRlOiBTdGF0ZTxFbnZTcGVjaWZpY09wdGlvbnM+KSB7XG4gIGZvciAobGV0IG1vZHVsZUNvbmZpZyBvZiBJTkxJTkVfUFJFQ09NUElMRV9NT0RVTEVTKSB7XG4gICAgaWYgKFxuICAgICAgbW9kdWxlQ29uZmlnLm1vZHVsZU5hbWUgIT09ICdAZW1iZXIvdGVtcGxhdGUtY29tcGlsYXRpb24nICYmXG4gICAgICBtb2R1bGVDb25maWcubW9kdWxlTmFtZSAhPT0gJ0BlbWJlci90ZW1wbGF0ZS1jb21waWxlcicgJiZcbiAgICAgICFzdGF0ZS5ub3JtYWxpemVkT3B0cy5lbmFibGVMZWdhY3lNb2R1bGVzLmluY2x1ZGVzKG1vZHVsZUNvbmZpZy5tb2R1bGVOYW1lKVxuICAgICkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHlpZWxkIG1vZHVsZUNvbmZpZztcbiAgfVxufVxuXG5mdW5jdGlvbiByZWZlcmVuY2VzSW5saW5lQ29tcGlsZXI8RW52U3BlY2lmaWNPcHRpb25zPihcbiAgcGF0aDogTm9kZVBhdGg8dC5JZGVudGlmaWVyPixcbiAgc3RhdGU6IFN0YXRlPEVudlNwZWNpZmljT3B0aW9ucz5cbik6IE1vZHVsZUNvbmZpZyB8IHVuZGVmaW5lZCB7XG4gIGZvciAobGV0IG1vZHVsZUNvbmZpZyBvZiBjb25maWd1cmVkTW9kdWxlcyhzdGF0ZSkpIHtcbiAgICBpZiAocGF0aC5yZWZlcmVuY2VzSW1wb3J0KG1vZHVsZUNvbmZpZy5tb2R1bGVOYW1lLCBtb2R1bGVDb25maWcuZXhwb3J0KSkge1xuICAgICAgcmV0dXJuIG1vZHVsZUNvbmZpZztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gcnVudGltZUVycm9ySUlGRShiYWJlbDogdHlwZW9mIEJhYmVsLCByZXBsYWNlbWVudHM6IHsgRVJST1JfTUVTU0FHRTogc3RyaW5nIH0pIHtcbiAgbGV0IHN0YXRlbWVudCA9IGJhYmVsLnRlbXBsYXRlKGAoZnVuY3Rpb24oKSB7XFxuICB0aHJvdyBuZXcgRXJyb3IoJ0VSUk9SX01FU1NBR0UnKTtcXG59KSgpO2ApKFxuICAgIHJlcGxhY2VtZW50c1xuICApIGFzIHQuRXhwcmVzc2lvblN0YXRlbWVudDtcbiAgcmV0dXJuIHN0YXRlbWVudC5leHByZXNzaW9uO1xufVxuXG5mdW5jdGlvbiBidWlsZFNjb3BlTG9jYWxzKFxuICB1c2VyVHlwZWRPcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgZm9ybWF0T3B0aW9uczogTW9kdWxlQ29uZmlnLFxuICB0YXJnZXQ6IE5vZGVQYXRoPHQuRXhwcmVzc2lvbj4sXG4gIG1heVVzZUxleGljYWxUaGlzOiBib29sZWFuXG4pOiBTY29wZUxvY2FscyB7XG4gIGlmIChmb3JtYXRPcHRpb25zLnJmYzkzMVN1cHBvcnQgJiYgdXNlclR5cGVkT3B0aW9ucy5ldmFsKSB7XG4gICAgcmV0dXJuIG5ldyBTY29wZUxvY2Fscyh7IG1vZGU6ICdpbXBsaWNpdCcsIGpzUGF0aDogdGFyZ2V0LCBtYXlVc2VMZXhpY2FsVGhpcyB9KTtcbiAgfSBlbHNlIGlmICh1c2VyVHlwZWRPcHRpb25zLnNjb3BlKSB7XG4gICAgcmV0dXJuIHVzZXJUeXBlZE9wdGlvbnMuc2NvcGUgYXMgU2NvcGVMb2NhbHM7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBTY29wZUxvY2Fscyh7IG1vZGU6ICdleHBsaWNpdCcgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYnVpbGRQcmVjb21waWxlT3B0aW9uczxFbnZTcGVjaWZpY09wdGlvbnM+KFxuICBiYWJlbDogdHlwZW9mIEJhYmVsLFxuICB0YXJnZXQ6IE5vZGVQYXRoPHQuRXhwcmVzc2lvbj4sXG4gIHN0YXRlOiBTdGF0ZTxFbnZTcGVjaWZpY09wdGlvbnM+LFxuICB0ZW1wbGF0ZTogc3RyaW5nLFxuICB1c2VyVHlwZWRPcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgY29uZmlnOiBNb2R1bGVDb25maWcsXG4gIHNjb3BlOiBTY29wZUxvY2Fsc1xuKTogUHJlcHJvY2Vzc09wdGlvbnMgJiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIGxldCBqc3V0aWxzID0gbmV3IEpTVXRpbHMoYmFiZWwsIHN0YXRlLCB0YXJnZXQsIHNjb3BlLmFkZC5iaW5kKHNjb3BlKSwgc3RhdGUudXRpbCk7XG4gIGxldCBtZXRhID0gT2JqZWN0LmFzc2lnbih7IGpzdXRpbHMgfSwgdXNlclR5cGVkT3B0aW9ucz8ubWV0YSk7XG5cbiAgbGV0IG91dHB1dDogUHJlcHJvY2Vzc09wdGlvbnMgJiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHtcbiAgICBjb250ZW50czogdGVtcGxhdGUsXG5cbiAgICAvLyB3ZSd2ZSBleHRlbmRlZCBtZXRhIHRvIGFkZCBqc3V0aWxzLCBidXQgdGhlIHR5cGVzIGluIEBnbGltbWVyL3N5bnRheFxuICAgIC8vIGRvbid0IGFjY291bnQgZm9yIGV4dGVuc2lvblxuICAgIG1ldGE6IG1ldGEgYXMgUHJlcHJvY2Vzc09wdGlvbnNbJ21ldGEnXSxcblxuICAgIC8vIFRPRE86IGVtYnJvaWRlcidzIHRlbXBsYXRlLWNvbXBpbGVyIGFsbG93cyB0aGlzIHRvIGJlIG92ZXJyaWRlbiB0byBnZXRcbiAgICAvLyBiYWNrd2FyZC1jb21wYXRpYmxlIG1vZHVsZSBuYW1lcyB0aGF0IGRvbid0IG1hdGNoIHRoZSByZWFsIG5hbWUgb2YgdGhlXG4gICAgLy8gb24tZGlzayBmaWxlLiBXaGF0J3Mgb3VyIHBsYW4gZm9yIG1pZ3JhdGluZyBwZW9wbGUgYXdheSBmcm9tIHRoYXQ/XG4gICAgbW9kdWxlTmFtZTogc3RhdGUuZmlsZW5hbWUsXG5cbiAgICAvLyBUaGlzIGlzIGhlcmUgc28gaXQncyAqYWx3YXlzKiB0aGUgcmVhbCBmaWxlbmFtZS4gSGlzdG9yaWNhbGx5LCB0aGVyZSBpc1xuICAgIC8vIGFsc28gYG1vZHVsZU5hbWVgIGJ1dCB0aGF0IGRpZCBub3QgbWF0Y2ggdGhlIHJlYWwgb24tZGlzayBmaWxlbmFtZSwgaXRcbiAgICAvLyB3YXMgdGhlIG5vdGlvbmFsIHJ1bnRpbWUgbW9kdWxlIG5hbWUgZnJvbSBjbGFzc2ljIGVtYmVyIGJ1aWxkcy5cbiAgICBmaWxlbmFtZTogc3RhdGUuZmlsZW5hbWUsXG5cbiAgICBwbHVnaW5zOiB7XG4gICAgICAvLyB0aGUgY2FzdCBpcyBuZWVkZWQgaGVyZSBvbmx5IGJlY2F1c2Ugb3VyIG1ldGEgaXMgZXh0ZW5kZWQuIFRoYXQgaXMsXG4gICAgICAvLyB0aGVzZSBwbHVnaW5zIGNhbiBhY2Nlc3MgbWV0YS5qc3V0aWxzLlxuICAgICAgYXN0OiBbLi4uc3RhdGUubm9ybWFsaXplZE9wdHMudHJhbnNmb3Jtcywgc2NvcGUuY3Jhd2woKV0gYXMgQVNUUGx1Z2luQnVpbGRlcltdLFxuICAgIH0sXG4gIH07XG5cbiAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHVzZXJUeXBlZE9wdGlvbnMpKSB7XG4gICAgaWYgKGtleSAhPT0gJ3Njb3BlJykge1xuICAgICAgLy8gYHNjb3BlYCBpbiB0aGUgdXNlci1mYWNpbmcgQVBJIGJlY29tZXMgYGxvY2Fsc2AgaW4gdGhlIGxvdy1sZXZlbFxuICAgICAgLy8gZW1iZXItdGVtcGxhdGUtY29tcGlsZXIgQVBJXG4gICAgICBvdXRwdXRba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIG91dHB1dC5sb2NhbHMgPSBzY29wZS5sb2NhbHM7XG5cbiAgaWYgKGNvbmZpZy5yZmM5MzFTdXBwb3J0KSB7XG4gICAgb3V0cHV0LnN0cmljdE1vZGUgPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuZnVuY3Rpb24gcmVtYXBBbmRCaW5kSWRlbnRpZmllcnModGFyZ2V0OiBOb2RlUGF0aCwgYmFiZWw6IHR5cGVvZiBCYWJlbCwgc2NvcGVMb2NhbHM6IFNjb3BlTG9jYWxzKSB7XG4gIHRhcmdldC50cmF2ZXJzZSh7XG4gICAgSWRlbnRpZmllcihwYXRoOiBOb2RlUGF0aDx0LklkZW50aWZpZXI+KSB7XG4gICAgICBpZiAoc2NvcGVMb2NhbHMuaGFzKHBhdGgubm9kZS5uYW1lKSAmJiBwYXRoLm5vZGUubmFtZSAhPT0gc2NvcGVMb2NhbHMuZ2V0KHBhdGgubm9kZS5uYW1lKSkge1xuICAgICAgICAvLyB0aGlzIGlkZW50aWZpZXIgaGFzIGRpZmZlcmVudCBuYW1lcyBpbiBoYnMgdnMganMsIHNvIHdlIG5lZWQgdG9cbiAgICAgICAgLy8gcmVwbGFjZSB0aGUgaGJzIG5hbWUgaW4gdGhlIHRlbXBsYXRlIGNvbXBpbGVyIG91dHB1dCB3aXRoIHRoZSBqc1xuICAgICAgICAvLyBuYW1lXG4gICAgICAgIHBhdGgucmVwbGFjZVdpdGgoYmFiZWwudHlwZXMuaWRlbnRpZmllcihzY29wZUxvY2Fscy5nZXQocGF0aC5ub2RlLm5hbWUpKSk7XG4gICAgICB9XG4gICAgICAvLyB0aGlzIGlzIHdoZXJlIHdlIHRlbGwgYmFiZWwncyBzY29wZSBzeXN0ZW0gYWJvdXQgdGhlIG5ldyByZWZlcmVuY2Ugd2VcbiAgICAgIC8vIGp1c3QgaW50cm9kdWNlZC4gQGJhYmVsL3BsdWdpbi10cmFuc2Zvcm0tdHlwZXNjcmlwdCBpbiBwYXJ0aWN1bGFyXG4gICAgICAvLyBjYXJlcyBhIGxvdCBhYm91dCB0aG9zZSByZWZlcmVuY2VzIGJlaW5nIHByZXNlbnQuXG4gICAgICBwYXRoLnNjb3BlLmdldEJpbmRpbmcocGF0aC5ub2RlLm5hbWUpPy5yZWZlcmVuY2UocGF0aCk7XG4gICAgfSxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGluc2VydENvbXBpbGVkVGVtcGxhdGU8RW52U3BlY2lmaWNPcHRpb25zPihcbiAgYmFiZWw6IHR5cGVvZiBCYWJlbCxcbiAgc3RhdGU6IFN0YXRlPEVudlNwZWNpZmljT3B0aW9ucz4sXG4gIG9wdHM6IFdpcmVPcHRzLFxuICB0ZW1wbGF0ZTogc3RyaW5nLFxuICB0YXJnZXQ6IE5vZGVQYXRoPHQuRXhwcmVzc2lvbj4sXG4gIHVzZXJUeXBlZE9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBjb25maWc6IE1vZHVsZUNvbmZpZyxcbiAgYmFja2luZ0NsYXNzOiBOb2RlUGF0aDxQYXJhbWV0ZXJzPHR5cGVvZiB0LmNhbGxFeHByZXNzaW9uPlsxXVtudW1iZXJdPiB8IHVuZGVmaW5lZFxuKSB7XG4gIGxldCB0ID0gYmFiZWwudHlwZXM7XG4gIGxldCBzY29wZUxvY2FscyA9IGJ1aWxkU2NvcGVMb2NhbHModXNlclR5cGVkT3B0aW9ucywgY29uZmlnLCB0YXJnZXQsICFiYWNraW5nQ2xhc3MpO1xuICBsZXQgb3B0aW9ucyA9IGJ1aWxkUHJlY29tcGlsZU9wdGlvbnMoXG4gICAgYmFiZWwsXG4gICAgdGFyZ2V0LFxuICAgIHN0YXRlLFxuICAgIHRlbXBsYXRlLFxuICAgIHVzZXJUeXBlZE9wdGlvbnMsXG4gICAgY29uZmlnLFxuICAgIHNjb3BlTG9jYWxzXG4gICk7XG5cbiAgbGV0IHByZWNvbXBpbGVSZXN1bHRTdHJpbmc6IHN0cmluZztcblxuICAvLyBpbnNlcnRSdW50aW1lRXJyb3JzIGlzIGxlZ2FjeSBhbmQgbm90IHN1cHBvcnRlZCBieSB0aGUgbmV3ZXIgcmZjOTMxIGZvcm1cbiAgaWYgKG9wdGlvbnMuaW5zZXJ0UnVudGltZUVycm9ycyAmJiAhY29uZmlnLnJmYzkzMVN1cHBvcnQpIHtcbiAgICB0cnkge1xuICAgICAgcHJlY29tcGlsZVJlc3VsdFN0cmluZyA9IG9wdHMuY29tcGlsZXIucHJlY29tcGlsZSh0ZW1wbGF0ZSwgb3B0aW9ucyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRhcmdldC5yZXBsYWNlV2l0aChydW50aW1lRXJyb3JJSUZFKGJhYmVsLCB7IEVSUk9SX01FU1NBR0U6IChlcnJvciBhcyBhbnkpLm1lc3NhZ2UgfSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwcmVjb21waWxlUmVzdWx0U3RyaW5nID0gb3B0cy5jb21waWxlci5wcmVjb21waWxlKHRlbXBsYXRlLCBvcHRpb25zKTtcbiAgfVxuXG4gIGxldCB0ZW1wbGF0ZUV4cHJlc3Npb24gPSBiYWJlbC50ZW1wbGF0ZS5leHByZXNzaW9uLmFzdChwcmVjb21waWxlUmVzdWx0U3RyaW5nKTtcblxuICB0LmFkZENvbW1lbnQoXG4gICAgdGVtcGxhdGVFeHByZXNzaW9uLFxuICAgICdsZWFkaW5nJyxcbiAgICBgXFxuICAke3RlbXBsYXRlLnJlcGxhY2UoL1xcKlxcLy9nLCAnKlxcXFwvJyl9XFxuYCxcbiAgICAvKiBsaW5lIGNvbW1lbnQ/ICovIGZhbHNlXG4gICk7XG5cbiAgc3RhdGUudXRpbC5yZXBsYWNlV2l0aCh0YXJnZXQsIChpKSA9PiB7XG4gICAgbGV0IHRlbXBsYXRlRmFjdG9yeUlkZW50aWZpZXIgPSBpLmltcG9ydChcbiAgICAgIHN0YXRlLnRlbXBsYXRlRmFjdG9yeS5tb2R1bGVOYW1lLFxuICAgICAgc3RhdGUudGVtcGxhdGVGYWN0b3J5LmV4cG9ydE5hbWVcbiAgICApO1xuXG4gICAgbGV0IGV4cHJlc3Npb24gPSB0LmNhbGxFeHByZXNzaW9uKHRlbXBsYXRlRmFjdG9yeUlkZW50aWZpZXIsIFt0ZW1wbGF0ZUV4cHJlc3Npb25dKTtcblxuICAgIGlmIChjb25maWcucmZjOTMxU3VwcG9ydCkge1xuICAgICAgZXhwcmVzc2lvbiA9IHQuY2FsbEV4cHJlc3Npb24oaS5pbXBvcnQoJ0BlbWJlci9jb21wb25lbnQnLCAnc2V0Q29tcG9uZW50VGVtcGxhdGUnKSwgW1xuICAgICAgICBleHByZXNzaW9uLFxuICAgICAgICBiYWNraW5nQ2xhc3M/Lm5vZGUgPz9cbiAgICAgICAgICB0LmNhbGxFeHByZXNzaW9uKFxuICAgICAgICAgICAgaS5pbXBvcnQoJ0BlbWJlci9jb21wb25lbnQvdGVtcGxhdGUtb25seScsICdkZWZhdWx0JywgJ3RlbXBsYXRlT25seScpLFxuICAgICAgICAgICAgW11cbiAgICAgICAgICApLFxuICAgICAgXSk7XG4gICAgfVxuICAgIHJldHVybiBleHByZXNzaW9uO1xuICB9KTtcblxuICByZW1hcEFuZEJpbmRJZGVudGlmaWVycyh0YXJnZXQsIGJhYmVsLCBzY29wZUxvY2Fscyk7XG59XG5cbmZ1bmN0aW9uIGluc2VydFRyYW5zZm9ybWVkVGVtcGxhdGU8RW52U3BlY2lmaWNPcHRpb25zPihcbiAgYmFiZWw6IHR5cGVvZiBCYWJlbCxcbiAgc3RhdGU6IFN0YXRlPEVudlNwZWNpZmljT3B0aW9ucz4sXG4gIHRlbXBsYXRlOiBzdHJpbmcsXG4gIHRhcmdldDogTm9kZVBhdGg8dC5DYWxsRXhwcmVzc2lvbj4gfCBOb2RlUGF0aDx0LlRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbj4sXG4gIHVzZXJUeXBlZE9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxuICBmb3JtYXRPcHRpb25zOiBNb2R1bGVDb25maWcsXG4gIGJhY2tpbmdDbGFzczogTm9kZVBhdGg8UGFyYW1ldGVyczx0eXBlb2YgdC5jYWxsRXhwcmVzc2lvbj5bMV1bbnVtYmVyXT4gfCB1bmRlZmluZWRcbikge1xuICBsZXQgdCA9IGJhYmVsLnR5cGVzO1xuICBsZXQgc2NvcGVMb2NhbHMgPSBidWlsZFNjb3BlTG9jYWxzKHVzZXJUeXBlZE9wdGlvbnMsIGZvcm1hdE9wdGlvbnMsIHRhcmdldCwgIWJhY2tpbmdDbGFzcyk7XG4gIGxldCBvcHRpb25zID0gYnVpbGRQcmVjb21waWxlT3B0aW9ucyhcbiAgICBiYWJlbCxcbiAgICB0YXJnZXQsXG4gICAgc3RhdGUsXG4gICAgdGVtcGxhdGUsXG4gICAgdXNlclR5cGVkT3B0aW9ucyxcbiAgICBmb3JtYXRPcHRpb25zLFxuICAgIHNjb3BlTG9jYWxzXG4gICk7XG4gIGxldCBhc3QgPSBwcmVwcm9jZXNzKHRlbXBsYXRlLCB7IC4uLm9wdGlvbnMsIG1vZGU6ICdjb2RlbW9kJyB9KTtcbiAgbGV0IHRyYW5zZm9ybWVkID0gcHJpbnQoYXN0LCB7IGVudGl0eUVuY29kaW5nOiAncmF3JyB9KTtcblxuICBpZiAodGFyZ2V0LmlzQ2FsbEV4cHJlc3Npb24oKSkge1xuICAgIHVwZGF0ZUNhbGxGb3JtPEVudlNwZWNpZmljT3B0aW9ucz4oXG4gICAgICB0YXJnZXQsXG4gICAgICB0cmFuc2Zvcm1lZCxcbiAgICAgIGZvcm1hdE9wdGlvbnMsXG4gICAgICBzY29wZUxvY2FscyxcbiAgICAgIHN0YXRlLFxuICAgICAgYmFiZWwsXG4gICAgICBiYWNraW5nQ2xhc3NcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHVwZGF0ZUJhY2t0aWNrRm9ybTxFbnZTcGVjaWZpY09wdGlvbnM+KHNjb3BlTG9jYWxzLCBzdGF0ZSwgdGFyZ2V0LCB0LCB0cmFuc2Zvcm1lZCwgYmFiZWwpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUJhY2t0aWNrRm9ybTxFbnZTcGVjaWZpY09wdGlvbnM+KFxuICBzY29wZUxvY2FsczogU2NvcGVMb2NhbHMsXG4gIHN0YXRlOiBTdGF0ZTxFbnZTcGVjaWZpY09wdGlvbnM+LFxuICB0YXJnZXQ6IE5vZGVQYXRoPHQuVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uPixcbiAgdDogdHlwZW9mIEJhYmVsLnR5cGVzLFxuICB0cmFuc2Zvcm1lZDogc3RyaW5nLFxuICBiYWJlbDogdHlwZW9mIEJhYmVsXG4pIHtcbiAgaWYgKHNjb3BlTG9jYWxzLmlzRW1wdHkoKSkge1xuICAgIC8vIHNpbXBsZSBjYXNlOiBqdXN0IHJlcGxhY2UgdGhlIHN0cmluZyBsaXRlcmFsIHBhcnQgd2l0aCB0aGUgdHJhbnNmb3JtZWRcbiAgICAvLyB0ZW1wbGF0ZSBjb250ZW50c1xuICAgICh0YXJnZXQuZ2V0KCdxdWFzaScpLmdldCgncXVhc2lzLjAnKSBhcyBOb2RlUGF0aDx0LlRlbXBsYXRlRWxlbWVudD4pLnJlcGxhY2VXaXRoKFxuICAgICAgdC50ZW1wbGF0ZUVsZW1lbnQoeyByYXc6IHRyYW5zZm9ybWVkIH0pXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBuZWVkIHRvIGFkZCBzY29wZSwgc28gbmVlZCB0byByZXBsYWNlIHRoZSBiYWNrdGlja3MgZm9ybSB3aXRoIGEgY2FsbFxuICAvLyBleHByZXNzaW9uIHRvIHByZWNvbXBpbGVUZW1wbGF0ZVxuICBtYXliZVBydW5lSW1wb3J0KHN0YXRlLnV0aWwsIHRhcmdldC5nZXQoJ3RhZycpKTtcbiAgbGV0IG5ld0NhbGwgPSBzdGF0ZS51dGlsLnJlcGxhY2VXaXRoKHRhcmdldCwgKGkpID0+XG4gICAgdC5jYWxsRXhwcmVzc2lvbihwcmVjb21waWxlVGVtcGxhdGUoaSksIFt0LnN0cmluZ0xpdGVyYWwodHJhbnNmb3JtZWQpXSlcbiAgKTtcbiAgdXBkYXRlU2NvcGUoYmFiZWwsIG5ld0NhbGwsIHNjb3BlTG9jYWxzKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2FsbEZvcm08RW52U3BlY2lmaWNPcHRpb25zPihcbiAgdGFyZ2V0OiBOb2RlUGF0aDxCYWJlbC50eXBlcy5DYWxsRXhwcmVzc2lvbj4sXG4gIHRyYW5zZm9ybWVkOiBzdHJpbmcsXG4gIGZvcm1hdE9wdGlvbnM6IE1vZHVsZUNvbmZpZyxcbiAgc2NvcGVMb2NhbHM6IFNjb3BlTG9jYWxzLFxuICBzdGF0ZTogU3RhdGU8RW52U3BlY2lmaWNPcHRpb25zPixcbiAgYmFiZWw6IHR5cGVvZiBCYWJlbCxcbiAgYmFja2luZ0NsYXNzOlxuICAgIHwgTm9kZVBhdGg8QmFiZWwudHlwZXMuRXhwcmVzc2lvbiB8IEJhYmVsLnR5cGVzLkFyZ3VtZW50UGxhY2Vob2xkZXIgfCBCYWJlbC50eXBlcy5TcHJlYWRFbGVtZW50PlxuICAgIHwgdW5kZWZpbmVkXG4pIHtcbiAgLy8gZmlyc3QgdGhlIHNpbXBsZSBwYXJ0OiByZXBsYWNpbmcgdGhlIHN0cmluZyBsaXRlcmFsIHdpdGggdGhlIGFjdHVhbCBib2R5IG9mXG4gIC8vIHRoZSByZXdyaXR0ZW4gdGVtcGxhdGVcbiAgKHRhcmdldC5nZXQoJ2FyZ3VtZW50cy4wJykgYXMgTm9kZVBhdGg8dC5Ob2RlPikucmVwbGFjZVdpdGgoXG4gICAgYmFiZWwudHlwZXMuc3RyaW5nTGl0ZXJhbCh0cmFuc2Zvcm1lZClcbiAgKTtcblxuICBpZiAoIWZvcm1hdE9wdGlvbnMuZW5hYmxlU2NvcGUgJiYgIXNjb3BlTG9jYWxzLmlzRW1wdHkoKSkge1xuICAgIC8vIGFuIEFTVCB0cmFuc2Zvcm0gYWRkZWQgbGV4aWNhbGx5IHNjb3BlZCB2YWx1ZXMgdG8gYSB0ZW1wbGF0ZSB0aGF0XG4gICAgLy8gd2Fzbid0IGFscmVhZHkgaW4gYSBmb3JtIHRoYXQgc3VwcG9ydHMgdGhlbSwgc28gY29udmVydCBmb3JtLlxuICAgIG1heWJlUHJ1bmVJbXBvcnQoc3RhdGUudXRpbCwgdGFyZ2V0LmdldCgnY2FsbGVlJykpO1xuICAgIHN0YXRlLnV0aWwucmVwbGFjZVdpdGgodGFyZ2V0LmdldCgnY2FsbGVlJyksIChpKSA9PiBwcmVjb21waWxlVGVtcGxhdGUoaSkpO1xuICB9XG5cbiAgaWYgKGZvcm1hdE9wdGlvbnMucmZjOTMxU3VwcG9ydCA9PT0gJ3BvbHlmaWxsZWQnKSB7XG4gICAgbWF5YmVQcnVuZUltcG9ydChzdGF0ZS51dGlsLCB0YXJnZXQuZ2V0KCdjYWxsZWUnKSk7XG4gICAgc3RhdGUudXRpbC5yZXBsYWNlV2l0aCh0YXJnZXQuZ2V0KCdjYWxsZWUnKSwgKGkpID0+IHByZWNvbXBpbGVUZW1wbGF0ZShpKSk7XG4gICAgY29udmVydFN0cmljdE1vZGUoYmFiZWwsIHRhcmdldCk7XG4gICAgcmVtb3ZlRXZhbEFuZFNjb3BlKHRhcmdldCk7XG4gICAgdGFyZ2V0Lm5vZGUuYXJndW1lbnRzID0gdGFyZ2V0Lm5vZGUuYXJndW1lbnRzLnNsaWNlKDAsIDIpO1xuICAgIHN0YXRlLnJlY3Vyc2lvbkd1YXJkLmFkZCh0YXJnZXQubm9kZSk7XG4gICAgc3RhdGUudXRpbC5yZXBsYWNlV2l0aCh0YXJnZXQsIChpKSA9PlxuICAgICAgYmFiZWwudHlwZXMuY2FsbEV4cHJlc3Npb24oaS5pbXBvcnQoJ0BlbWJlci9jb21wb25lbnQnLCAnc2V0Q29tcG9uZW50VGVtcGxhdGUnKSwgW1xuICAgICAgICB0YXJnZXQubm9kZSxcbiAgICAgICAgYmFja2luZ0NsYXNzPy5ub2RlID8/XG4gICAgICAgICAgYmFiZWwudHlwZXMuY2FsbEV4cHJlc3Npb24oXG4gICAgICAgICAgICBpLmltcG9ydCgnQGVtYmVyL2NvbXBvbmVudC90ZW1wbGF0ZS1vbmx5JywgJ2RlZmF1bHQnLCAndGVtcGxhdGVPbmx5JyksXG4gICAgICAgICAgICBbXVxuICAgICAgICAgICksXG4gICAgICBdKVxuICAgICk7XG4gICAgLy8gd2UganVzdCB3cmFwcGVkIHRoZSB0YXJnZXQgY2FsbEV4cHJlc3Npb24gaW4gdGhlIGNhbGwgdG9cbiAgICAvLyBzZXRDb21wb25lbnRUZW1wbGF0ZS4gQWRqdXN0IGB0YXJnZXRgIGJhY2sgdG8gcG9pbnQgYXQgdGhlXG4gICAgLy8gcHJlY29tcGlsZVRlbXBsYXRlIGNhbGwgZm9yIHRoZSBmaW5hbCB1cGRhdGVTY29wZSBiZWxvdy5cbiAgICAvL1xuICAgIHRhcmdldCA9IHRhcmdldC5nZXQoJ2FyZ3VtZW50cy4wJykgYXMgTm9kZVBhdGg8dC5DYWxsRXhwcmVzc2lvbj47XG4gIH1cbiAgLy8gV2UgZGVsaWJlcmF0ZWx5IGRvIHVwZGF0ZVNjb3BlIGF0IHRoZSBlbmQgc28gdGhhdCB3aGVuIGl0IHVwZGF0ZXNcbiAgLy8gcmVmZXJlbmNlcywgdGhvc2UgcmVmZXJlbmNlcyB3aWxsIHBvaW50IHRvIHRoZSBhY2N1cmF0ZSBwYXRocyBpbiB0aGVcbiAgLy8gZmluYWwgQVNULlxuICB1cGRhdGVTY29wZShiYWJlbCwgdGFyZ2V0LCBzY29wZUxvY2Fscyk7XG59XG5cbmZ1bmN0aW9uIHRlbXBsYXRlRmFjdG9yeUNvbmZpZyhvcHRzOiBOb3JtYWxpemVkT3B0cykge1xuICBsZXQgbW9kdWxlTmFtZSA9ICdAZW1iZXIvdGVtcGxhdGUtZmFjdG9yeSc7XG4gIGxldCBleHBvcnROYW1lID0gJ2NyZWF0ZVRlbXBsYXRlRmFjdG9yeSc7XG4gIGxldCBvdmVycmlkZXMgPSBvcHRzLm91dHB1dE1vZHVsZU92ZXJyaWRlc1ttb2R1bGVOYW1lXT8uW2V4cG9ydE5hbWVdO1xuICByZXR1cm4gb3ZlcnJpZGVzXG4gICAgPyB7IGV4cG9ydE5hbWU6IG92ZXJyaWRlc1swXSwgbW9kdWxlTmFtZTogb3ZlcnJpZGVzWzFdIH1cbiAgICA6IHsgZXhwb3J0TmFtZSwgbW9kdWxlTmFtZSB9O1xufVxuXG5mdW5jdGlvbiBidWlsZFNjb3BlKGJhYmVsOiB0eXBlb2YgQmFiZWwsIGxvY2FsczogU2NvcGVMb2NhbHMpIHtcbiAgbGV0IHQgPSBiYWJlbC50eXBlcztcblxuICByZXR1cm4gdC5hcnJvd0Z1bmN0aW9uRXhwcmVzc2lvbihcbiAgICBbXSxcbiAgICB0Lm9iamVjdEV4cHJlc3Npb24oXG4gICAgICBsb2NhbHNcbiAgICAgICAgLmVudHJpZXMoKVxuICAgICAgICAubWFwKChbbmFtZSwgaWRlbnRpZmllcl0pID0+XG4gICAgICAgICAgdC5vYmplY3RQcm9wZXJ0eSh0LmlkZW50aWZpZXIobmFtZSksIHQuaWRlbnRpZmllcihpZGVudGlmaWVyKSwgZmFsc2UsIG5hbWUgIT09ICd0aGlzJylcbiAgICAgICAgKVxuICAgIClcbiAgKTtcbn1cblxuLy8gdGhpcyBpcyByZXNwb25zaWJsZSBib3RoIGZvciBhZGp1c3RpbmcgdGhlIEFTVCBmb3Igb3VyIHNjb3BlIGFyZ3VtZW50ICphbmQqXG4vLyBlbnN1cmluZyB0aGF0IGJhYmVsJ3Mgc2NvcGUgc3lzdGVtIHdpbGwgc2VlIHRoYXQgdGhlc2UgbmV3IGlkZW50aWZpZXJzXG4vLyByZWZlcmVuY2UgdGhlaXIgYmluZGluZ3MuIEBiYWJlbC9wbHVnaW4tdHJhbnNmb3JtLXR5cGVzY3JpcHQgaW4gcGFydGljdWxhclxuLy8gY2FyZXMgYW4gYXdmdWwgbG90IGFib3V0IHdoZXRoZXIgYW4gaW1wb3J0IGhhcyB2YWxpZCBub24tdHlwZSByZWZlcmVuY2VzLCBzb1xuLy8gdGhlc2UgbmV3bHkgaW50cm9kdWNkIHJlZmVyZW5jZXMgbmVlZCB0byBiZSB2YWxpZC5cbmZ1bmN0aW9uIHVwZGF0ZVNjb3BlKGJhYmVsOiB0eXBlb2YgQmFiZWwsIHRhcmdldDogTm9kZVBhdGg8dC5DYWxsRXhwcmVzc2lvbj4sIGxvY2FsczogU2NvcGVMb2NhbHMpIHtcbiAgbGV0IHQgPSBiYWJlbC50eXBlcztcbiAgbGV0IHNlY29uZEFyZyA9IHRhcmdldC5nZXQoJ2FyZ3VtZW50cy4xJykgYXMgTm9kZVBhdGg8dC5PYmplY3RFeHByZXNzaW9uPiB8IHVuZGVmaW5lZDtcbiAgaWYgKHNlY29uZEFyZykge1xuICAgIGxldCBzY29wZSA9IHNlY29uZEFyZy5nZXQoJ3Byb3BlcnRpZXMnKS5maW5kKChwKSA9PiB7XG4gICAgICBsZXQga2V5ID0gcC5nZXQoJ2tleScpIGFzIE5vZGVQYXRoPHQuTm9kZT47XG4gICAgICByZXR1cm4ga2V5LmlzSWRlbnRpZmllcigpICYmIGtleS5ub2RlLm5hbWUgPT09ICdzY29wZSc7XG4gICAgfSk7XG4gICAgaWYgKHNjb3BlKSB7XG4gICAgICBpZiAobG9jYWxzLmlzRW1wdHkoKSkge1xuICAgICAgICBzY29wZS5yZW1vdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNjb3BlLnNldCgndmFsdWUnLCBidWlsZFNjb3BlKGJhYmVsLCBsb2NhbHMpKTtcbiAgICAgICAgLy8gZnVubnktbG9va2luZyBuYW1pbmcgaGVyZSwgYnV0IGl0IGFjdHVhbGx5IG1ha2VzIHNlbnNlIGJlY2F1c2Ugd2UncmVcbiAgICAgICAgLy8gY29ubmVjdGluZyB0aGUgZ2xpbW1lciBzY29wZSBzeXN0ZW0gd2l0aCB0aGUgYmFiZWwgc2NvcGUgc3lzdGVtLlxuICAgICAgICBzY29wZS5zY29wZS5jcmF3bCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWxvY2Fscy5pc0VtcHR5KCkpIHtcbiAgICAgIHNlY29uZEFyZy5wdXNoQ29udGFpbmVyKFxuICAgICAgICAncHJvcGVydGllcycsXG4gICAgICAgIHQub2JqZWN0UHJvcGVydHkodC5pZGVudGlmaWVyKCdzY29wZScpLCBidWlsZFNjb3BlKGJhYmVsLCBsb2NhbHMpKVxuICAgICAgKTtcbiAgICAgIChcbiAgICAgICAgc2Vjb25kQXJnLmdldChcbiAgICAgICAgICBgcHJvcGVydGllcy4ke3NlY29uZEFyZy5ub2RlLnByb3BlcnRpZXMubGVuZ3RoIC0gMX1gXG4gICAgICAgICkgYXMgTm9kZVBhdGg8dC5PYmplY3RQcm9wZXJ0eT5cbiAgICAgICkuc2NvcGUuY3Jhd2woKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIWxvY2Fscy5pc0VtcHR5KCkpIHtcbiAgICB0YXJnZXQucHVzaENvbnRhaW5lcihcbiAgICAgICdhcmd1bWVudHMnLFxuICAgICAgdC5vYmplY3RFeHByZXNzaW9uKFt0Lm9iamVjdFByb3BlcnR5KHQuaWRlbnRpZmllcignc2NvcGUnKSwgYnVpbGRTY29wZShiYWJlbCwgbG9jYWxzKSldKVxuICAgICk7XG4gICAgKHRhcmdldC5nZXQoJ2FyZ3VtZW50cy4xJykgYXMgTm9kZVBhdGg8dC5PYmplY3RFeHByZXNzaW9uPikuc2NvcGUuY3Jhd2woKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVFdmFsQW5kU2NvcGUodGFyZ2V0OiBOb2RlUGF0aDx0LkNhbGxFeHByZXNzaW9uPikge1xuICBsZXQgc2Vjb25kQXJnID0gdGFyZ2V0LmdldCgnYXJndW1lbnRzLjEnKSBhcyBOb2RlUGF0aDx0Lk9iamVjdEV4cHJlc3Npb24+IHwgdW5kZWZpbmVkO1xuICBpZiAoc2Vjb25kQXJnKSB7XG4gICAgbGV0IGV2YWxQcm9wID0gc2Vjb25kQXJnLmdldCgncHJvcGVydGllcycpLmZpbmQoKHApID0+IHtcbiAgICAgIGxldCBrZXkgPSBwLmdldCgna2V5JykgYXMgTm9kZVBhdGg8dC5Ob2RlPjtcbiAgICAgIHJldHVybiBrZXkuaXNJZGVudGlmaWVyKCkgJiYga2V5Lm5vZGUubmFtZSA9PT0gJ2V2YWwnO1xuICAgIH0pO1xuICAgIGlmIChldmFsUHJvcCkge1xuICAgICAgZXZhbFByb3AucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgbGV0IGNvbXBvbmVudFByb3AgPSBzZWNvbmRBcmcuZ2V0KCdwcm9wZXJ0aWVzJykuZmluZCgocCkgPT4ge1xuICAgICAgbGV0IGtleSA9IHAuZ2V0KCdrZXknKSBhcyBOb2RlUGF0aDx0Lk5vZGU+O1xuICAgICAgcmV0dXJuIGtleS5pc0lkZW50aWZpZXIoKSAmJiBrZXkubm9kZS5uYW1lID09PSAnY29tcG9uZW50JztcbiAgICB9KTtcbiAgICBpZiAoY29tcG9uZW50UHJvcCkge1xuICAgICAgY29tcG9uZW50UHJvcC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gR2l2ZW4gYSBjYWxsIHRvIHRlbXBsYXRlKCksIGNvbnZlcnQgaXRzIFwic3RyaWN0XCIgYXJndW1lbnQgaW50b1xuLy8gcHJlY29tcGlsZVRlbXBsYXRlJ3MgXCJzdHJpY3RNb2RlXCIgYXJndW1lbnQuIFRoZXkgZGlmZmVyIGluIG5hbWUgYW5kIGRlZmF1bHRcbi8vIHZhbHVlLlxuZnVuY3Rpb24gY29udmVydFN0cmljdE1vZGUoYmFiZWw6IHR5cGVvZiBCYWJlbCwgdGFyZ2V0OiBOb2RlUGF0aDx0LkNhbGxFeHByZXNzaW9uPikge1xuICBsZXQgdCA9IGJhYmVsLnR5cGVzO1xuICBsZXQgc2Vjb25kQXJnID0gdGFyZ2V0LmdldCgnYXJndW1lbnRzLjEnKSBhcyBOb2RlUGF0aDx0Lk9iamVjdEV4cHJlc3Npb24+IHwgdW5kZWZpbmVkO1xuICBpZiAoc2Vjb25kQXJnKSB7XG4gICAgbGV0IHN0cmljdCA9IHNlY29uZEFyZy5nZXQoJ3Byb3BlcnRpZXMnKS5maW5kKChwKSA9PiB7XG4gICAgICBsZXQga2V5ID0gcC5nZXQoJ2tleScpIGFzIE5vZGVQYXRoPHQuTm9kZT47XG4gICAgICByZXR1cm4ga2V5LmlzSWRlbnRpZmllcigpICYmIGtleS5ub2RlLm5hbWUgPT09ICdzdHJpY3QnO1xuICAgIH0pIGFzIE5vZGVQYXRoPHQuT2JqZWN0UHJvcGVydHk+O1xuICAgIGlmIChzdHJpY3QpIHtcbiAgICAgIHN0cmljdC5zZXQoJ2tleScsIHQuaWRlbnRpZmllcignc3RyaWN0TW9kZScpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2Vjb25kQXJnLnB1c2hDb250YWluZXIoXG4gICAgICAgICdwcm9wZXJ0aWVzJyxcbiAgICAgICAgdC5vYmplY3RQcm9wZXJ0eSh0LmlkZW50aWZpZXIoJ3N0cmljdE1vZGUnKSwgdC5ib29sZWFuTGl0ZXJhbCh0cnVlKSlcbiAgICAgICk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRhcmdldC5wdXNoQ29udGFpbmVyKFxuICAgICAgJ2FyZ3VtZW50cycsXG4gICAgICB0Lm9iamVjdEV4cHJlc3Npb24oW3Qub2JqZWN0UHJvcGVydHkodC5pZGVudGlmaWVyKCdzdHJpY3RNb2RlJyksIHQuYm9vbGVhbkxpdGVyYWwodHJ1ZSkpXSlcbiAgICApO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1heWJlUHJ1bmVJbXBvcnQoXG4gIHV0aWw6IEltcG9ydFV0aWwsXG4gIGlkZW50aWZpZXI6IE5vZGVQYXRoPHQuRXhwcmVzc2lvbiB8IHQuVjhJbnRyaW5zaWNJZGVudGlmaWVyPlxuKSB7XG4gIGlmICghaWRlbnRpZmllci5pc0lkZW50aWZpZXIoKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgYmluZGluZyA9IGlkZW50aWZpZXIuc2NvcGUuZ2V0QmluZGluZyhpZGVudGlmaWVyLm5vZGUubmFtZSk7XG5cbiAgaWYgKCFiaW5kaW5nKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IGZvdW5kID0gYmluZGluZy5yZWZlcmVuY2VQYXRocy5maW5kKChwYXRoKSA9PiBwYXRoLm5vZGUgPT09IGlkZW50aWZpZXIubm9kZSk7XG4gIGlmICghZm91bmQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBiaW5kaW5nLnJlZmVyZW5jZVBhdGhzLnNwbGljZShiaW5kaW5nLnJlZmVyZW5jZVBhdGhzLmluZGV4T2YoZm91bmQpLCAxKTtcbiAgYmluZGluZy5yZWZlcmVuY2VzLS07XG5cbiAgaWYgKGJpbmRpbmcucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgIGxldCBzcGVjaWZpZXIgPSBiaW5kaW5nLnBhdGg7XG4gICAgaWYgKHNwZWNpZmllci5pc0ltcG9ydFNwZWNpZmllcigpKSB7XG4gICAgICBsZXQgZGVjbGFyYXRpb24gPSBzcGVjaWZpZXIucGFyZW50UGF0aCBhcyBOb2RlUGF0aDx0LkltcG9ydERlY2xhcmF0aW9uPjtcbiAgICAgIHV0aWwucmVtb3ZlSW1wb3J0KGRlY2xhcmF0aW9uLm5vZGUuc291cmNlLnZhbHVlLCBuYW1lKHNwZWNpZmllci5ub2RlLmltcG9ydGVkKSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHByZWNvbXBpbGVUZW1wbGF0ZShpOiBJbXBvcnRlcikge1xuICByZXR1cm4gaS5pbXBvcnQoJ0BlbWJlci90ZW1wbGF0ZS1jb21waWxhdGlvbicsICdwcmVjb21waWxlVGVtcGxhdGUnKTtcbn1cblxuZnVuY3Rpb24gbmFtZShub2RlOiB0LlN0cmluZ0xpdGVyYWwgfCB0LklkZW50aWZpZXIpIHtcbiAgaWYgKG5vZGUudHlwZSA9PT0gJ1N0cmluZ0xpdGVyYWwnKSB7XG4gICAgcmV0dXJuIG5vZGUudmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5vZGUubmFtZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBtYWtlUGx1Z2luPE9wdGlvbnM+KChvcHRpb25zKSA9PiBvcHRpb25zKTtcbiJdfQ=="],"names":["sanitize","identifier","cleaned","replace","RegExp","illegalChar","source","_m","letter","toUpperCase","exports","sanitize_1","require","ImportUtil","constructor","babel","program","t","types","removeImport","moduleSpecifier","exportedName","topLevelPath","get","matchModule","importSpecifierPath","find","specifierPath","matchSpecifier","node","specifiers","length","remove","removeAllImports","import","target","nameHint","unreferencedImport","desiredName","defaultNameHint","preferredName","isNamespaceImport","isDefaultImport","isNamedImport","declaration","findImportFrom","hasNamespaceSpecifier","s","type","hasNamedSpecifiers","cannotUseExistingDeclaration","specifier","spec","_a","scope","getBinding","local","name","kind","addSpecifier","insertAfterExistingImports","importDeclaration","stringLiteral","importForSideEffect","replaceWith","fn","mutate","i","insertAfter","insertBefore","symbols","Map","importer","set","updateReference","path","isIdentifier","hit","newIdentifier","binding","Error","reference","result","traverse","ReferencedIdentifier","unusedNameLike","buildSpecifier","added","unshift","push","registerBinding","localName","importDefaultSpecifier","importNamespaceSpecifier","importSpecifier","isImportDeclaration","value","importKind","undefined","statement","lastIndex","index","body","entries","splice","candidate","counter","hasBinding","generateUidIdentifierBasedOnNode","isImportDefaultSpecifier","isImportNamespaceSpecifier","isImportSpecifier","imported","astNodeHasBinding","cursor","parentNode","parent","blockParams","includes","children","readOnlyArray","mutationMethods","array","message","Proxy","prop","Reflect","_target","_prop","deleteProperty","hbs_utils_1","read_only_array_1","Set","ScopeLocals","params","_ScopeLocals_mapping","_ScopeLocals_locals","_ScopeLocals_params","__classPrivateFieldSet","locals","__classPrivateFieldGet","has","key","isEmpty","Object","add","hbsName","jsName","crawl","_env","seen","visitor","Template","enter","exit","_node","_path","mode","mayUseLexicalThis","_ScopeLocals_instances","_ScopeLocals_isInJsScope","call","jsPath","keys","indexOf","PathExpression","head","ElementNode","tag","split","ALLOWED_GLOBALS","scope_locals_1","ExpressionParser","parseExpression","invokedName","parseObjectExpression","parseArrayExpression","buildCodeFrameError","JSON","stringify","map","element","isSpreadElement","isExpression","parseScope","isObjectExpression","isFunctionExpression","isArrowFunctionExpression","objExpression","returnStatements","filter","argument","properties","reduce","res","isObjectMethod","isStringLiteral","propName","parseEval","isObjectProperty","isReturnStatement","returnExpression","isCallExpression","callee","args","arg","isMemberExpression","obj","isNumericLiteral","isEval","shouldParseScope","shouldSupportRFC931","forEach","property","computed","propertyName","eval","component","valuePath","JSUtils","state","template","addedBinding","_JSUtils_babel","_JSUtils_state","_JSUtils_template","_JSUtils_addedBinding","_JSUtils_importer","lastInsertedPath","bindExpression","expression","opts","_JSUtils_instances","_JSUtils_emitStatement","variableDeclaration","variableDeclarator","_JSUtils_parseExpression","bindImport","importedIdentifier","emitExpression","expressionStatement","unshiftContainer","expressionString","ExpressionContext","parsed","parse","statements","isUsed","_ExpressionContext_importer","_ExpressionContext_target","makePlugin","babel_import_util_1","expression_parser_1","js_utils_1","syntax_1","__exportStar","INLINE_PRECOMPILE_MODULES","moduleName","export","allowTemplateLiteral","enableScope","rfc931Support","normalizeOpts","options","targetFormat","compiler","assign","outputModuleOverrides","enableLegacyModules","transforms","loadOptions","htmlbarsInlinePrecompile","plugin","Program","normalizedOpts","templateFactory","templateFactoryConfig","util","recursionGuard","exportName","configuredModules","TaggedTemplateExpression","tagPath","config","referencesInlineCompiler","quasi","expressions","quasis","cooked","join","insertCompiledTemplate","insertTransformedTemplate","CallExpression","calleePath","firstArg","secondArg","userTypedOptions","backingClass","Boolean","pre","file","ast","moduleConfig","referencesImport","runtimeErrorIIFE","replacements","buildScopeLocals","formatOptions","buildPrecompileOptions","jsutils","bind","meta","output","contents","filename","plugins","strictMode","remapAndBindIdentifiers","scopeLocals","Identifier","precompileResultString","insertRuntimeErrors","precompile","error","ERROR_MESSAGE","templateExpression","addComment","templateFactoryIdentifier","callExpression","preprocess","transformed","print","entityEncoding","updateCallForm","updateBacktickForm","templateElement","raw","maybePruneImport","newCall","precompileTemplate","updateScope","convertStrictMode","removeEvalAndScope","arguments","slice","overrides","buildScope","arrowFunctionExpression","objectExpression","objectProperty","p","pushContainer","evalProp","componentProp","strict","booleanLiteral","found","referencePaths","references","parentPath"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7]}